!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("chatframe",[],t):"object"==typeof exports?exports.chatframe=t():e.chatframe=t()}(window,(function(){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/",n(n.s=58)}([function(e,t){e.exports=require("react")},function(e,t){e.exports=require("styled-components")},function(e,t){e.exports=require("date-fns")},function(e,t){e.exports=require("lodash")},function(e,t){e.exports=require("react-redux")},function(e,t){e.exports=require("lodash/get")},function(e,t){e.exports=require("@material-ui/core/Typography")},function(e,t){e.exports=require("@material-ui/core/colors/grey")},function(e,t){e.exports=require("@material-ui/core/styles")},function(e,t){e.exports=require("@material-ui/core/Button")},function(e,t){e.exports=require("@material-ui/core/colors")},function(e,t){e.exports=require("@material-ui/core/Grid")},function(e,t){e.exports=require("@material-ui/core/CardContent")},function(e,t){e.exports=require("uuid")},function(e,t){e.exports=require("@material-ui/core/Link")},function(e,t){e.exports=require("@material-ui/core/Card")},function(e,t){e.exports=require("redux")},function(e,t){e.exports=require("react-google-maps")},function(e,t){e.exports=require("markdown-to-jsx")},function(e,t){e.exports=require("@material-ui/core/Avatar")},function(e,t){e.exports=require("@material-ui/core/IconButton")},function(e,t){e.exports=require("@material-ui/core/CardActions")},function(e,t){e.exports=require("@material-ui/core/TextField")},function(e,t){e.exports=require("validator/lib/isHexColor")},function(e,t){e.exports=require("lodash/merge")},function(e,t){e.exports=require("@material-ui/core/Tooltip")},function(e,t){e.exports=require("@material-ui/core/TableCell")},function(e,t){e.exports=require("webfontloader")},function(e,t){e.exports=require("@material-ui/core/styles/MuiThemeProvider")},function(e,t){e.exports=require("redux-thunk")},function(e,t){e.exports=require("@material-ui/core/Fab")},function(e,t){e.exports=require("@material-ui/icons/Chat")},function(e,t){e.exports=require("@material-ui/core/Zoom")},function(e,t){e.exports=require("lodash/find")},function(e,t){e.exports=require("lodash/omit")},function(e,t){e.exports=require("@material-ui/core/Paper")},function(e,t){e.exports=require("@material-ui/icons/Fullscreen")},function(e,t){e.exports=require("@material-ui/icons/FullscreenExit")},function(e,t){e.exports=require("@material-ui/icons/Info")},function(e,t){e.exports=require("@material-ui/icons/Close")},function(e,t){e.exports=require("@material-ui/core/DialogTitle")},function(e,t){e.exports=require("@material-ui/core/Dialog")},function(e,t){e.exports=require("@material-ui/core/DialogActions")},function(e,t){e.exports=require("@material-ui/core/DialogContent")},function(e,t){e.exports=require("@material-ui/core/DialogContentText")},function(e,t){e.exports=require("lodash/isEqual")},function(e,t){e.exports=require("@material-ui/core/colors/green")},function(e,t){e.exports=require("@material-ui/core/CardMedia")},function(e,t){e.exports=require("@material-ui/core/CardHeader")},function(e,t){e.exports=require("@material-ui/core/Table")},function(e,t){e.exports=require("@material-ui/core/TableBody")},function(e,t){e.exports=require("@material-ui/core/TableRow")},function(e,t){e.exports=require("@material-ui/core/FormControl")},function(e,t){e.exports=require("@material-ui/core/FormGroup")},function(e,t){e.exports=require("@material-ui/core/FormControlLabel")},function(e,t){e.exports=require("@material-ui/core/Checkbox")},function(e,t){e.exports=require("lodash/every")},function(e,t){e.exports=require("@material-ui/icons/Send")},function(e,t,n){e.exports=n(60)},function(e,t){e.exports=require("whatwg-fetch")},function(e,t,n){"use strict";n.r(t);var r=n(4),o=n(16),i=n(0),a=n.n(i),c=n(1),u=n.n(c),l=n(27),s=n.n(l),f=n(28),p=n.n(f),y=n(29),b=n.n(y),m=(n(59),n(7)),d=n.n(m),g=n(8),h=n(10),v=n(23),j=n.n(v);var O=n(30),w=n.n(O),M=n(31),E=n.n(M),x=n(32),T=n.n(x),S=n(19),L=n.n(S),N=n(5),D=n.n(N),I=n(2),P="yyyy-MM-dd'T'HH:mm:ss.SSS",C=n(13),k=n(33),_=n.n(k),R=n(34),z=n.n(R);function A(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function U(e){try{return fetch(e).then((function(e){return e.json()}))}catch(e){return console.error(e),{}}}var Y=function e(t){var n=this;if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),A(this,"encodeQueryData",(function(e){var t=[];for(var n in e)t.push("".concat(encodeURIComponent(n),"=").concat(encodeURIComponent(e[n])));return t.join("&")})),A(this,"textRequest",(function(e){if(!e)throw new Error("Query should not be empty");var t={query:e,uuid:n.uuid},r=n.encodeQueryData(t);return U("".concat(n.textUrl,"?").concat(r))})),A(this,"eventRequest",(function(e){if(!e)throw new Error("Query should not be empty");var t={query:e,uuid:n.uuid},r=n.encodeQueryData(t);return U("".concat(n.eventUrl,"?").concat(r))})),!t||!t.textUrl)throw new Error("Fulfillment URL is required to generate a conversation client");this.textUrl=t.textUrl,this.eventUrl=t.eventUrl,this.uuid=Object(C.v4)()};function V(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Q(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?V(Object(n),!0).forEach((function(t){W(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):V(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function W(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function q(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,o=!1,i=void 0;try{for(var a,c=e[Symbol.iterator]();!(r=(a=c.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==c.return||c.return()}finally{if(o)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return B(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return B(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function B(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function G(e){return function(t){var n=D()(e,"queryResult.outputContexts",[]);t({type:"SET_OUTPUT_CONTEXTS",rawOutputContexts:n});var r,o=D()(e,"queryResult.fulfillmentMessages",[]),i=[],a=!1;try{i=o.map((function(e){var n=function(e){switch(e){case"text":return"text";case"card":return"card";case"quickReplies":return"suggestion";case"image":return"image";case"payload":return"payload";default:return"text"}}(e.message),r=D()(e,"quickReplies.quickReplies",[]),o=D()(e,"text.text",null),i={title:D()(e,"card.title",""),subtitle:D()(e,"card.subtitle",""),imageUrl:D()(e,"card.imageUri",""),buttons:D()(e,"card.buttons",[])},c={imageUri:D()(e,"image.imageUri",""),accessibilityText:D()(e,"image.accessibilityText","")},u={};if("payload"===n){for(var l=D()(e,"payload.fields",{}),s=0,f=Object.entries(l);s<f.length;s++){var p=q(f[s],2),y=p[0],b=p[1];if("stringValue"!==b.kind){if(b.kind&&"stringValue"!==b.kind)throw new Error("Use stringValue to send payloads");return u}try{u[y]=JSON.parse(b.stringValue)}catch(e){u[y]=b.stringValue}}if("disableInput"in u){if(Object.keys(u).length>1){var m=z()(u,["disableInput"]);t({type:"RECEIVE_WEBHOOK_DATA",modifiedPayload:m})}a=!0,t({type:"DISABLE_INPUT"})}else t({type:"RECEIVE_WEBHOOK_DATA",payload:u})}switch(n){case"text":return{type:n,text:o};case"image":return{type:n,image:c};case"suggestion":return{type:n,suggestions:r};case"card":return{type:n,card:i};case"payload":return{type:n,payload:u};default:return{type:n,text:o}}}))}catch(e){console.log(e)}a?r=i.filter((function(e){return!D()(e,"payload.disableInput",!1)})):(t({type:"ENABLE_INPUT"}),r=i);var c=Object(I.format)(new Date,P),u={entity:"bot",loading:!1,messageId:e.responseId,key:Object(C.v4)(),messageSession:e.session,language:e.queryResult.languageCode,systemTime:c,responses:r};t(function(e){return function(t,n){var r=n().conversation.messages;(t(_()(e.responses,["type","suggestion"])?{type:"SHOW_BUTTON_BAR"}:{type:"HIDE_BUTTON_BAR"}),0===r.length)?t({type:"SAVE_RESPONSE",newConversationArray:[e]}):t({type:"SAVE_RESPONSE",newConversationArray:r.map((function(t){return t.loading?e:t})).sort((function(e,t){var n=Object(I.parse)(e.systemTime,P,new Date(e.systemTime)),r=Object(I.parse)(t.systemTime,P,new Date(t.systemTime));return Object(I.differenceInMilliseconds)(n,r)}))})}}(u))}}var H=function(e){return Q(Q({},e),{},{queryResult:Q(Q({},e.queryResult),{},{fulfillmentMessages:[{message:"",platform:"PLATFORM_UNSPECIFIED",text:{text:[""]}}],fulfillmentText:""})})},F=function(e,t){return function(n,r){var o=r().conversation.client;n({type:"INITIATE_LOADING"}),function(e,t){try{return e(t).then((function(n){if(4===n.webhookStatus.code)e(t).then((function(n){var r=n.json();if(4===r.webhookStatus.code)e(t).then((function(e){var t=e.json();return 0!==t.webhookStatus.code?H(t):t}));else if(0!==r.webhookStatus.code)return H(r);return r}));else if(0!==n.webhookStatus.code)return H(n);return n}))}catch(e){return console.error(e),{}}}(o[e],t).then((function(t){t?(n(G(t)),n({type:"CLEAR_ERROR"})):(n({type:"DISPLAY_ERROR",error:"No response received from chat provider. Please try again."}),"eventRequest"===e&&n({type:"SET_CONVERSATION_ENDED"}))})).catch((function(e){throw new Error(e)})).catch((function(e){console.log(e),n({type:"DISPLAY_ERROR",error:"Unable to connect to the chat provider. Please try again."})}))}},J=function(e){return F("eventRequest",e)};function Z(e,t){return function(n){try{if(!e)throw new Error("No conversation provider selected.");if("dialogflow"!==e.toLowerCase())throw n({type:"DISPLAY_ERROR",error:"Unable to connect to ".concat(e)}),new Error("".concat(e," is not a recognized conversation provider."));n(function(e){return function(t){t({type:"SAVE_CLIENT",client:new Y(e),clientName:"dialogflow"})}}(t))}catch(e){console.log(e)}}}function K(e){return function(t,n){var r=n().conversation.clientName;try{if("dialogflow"!==r.toLowerCase())throw new Error("".concat(r," is not a recognized conversation provider."));t(function(e){return F("textRequest",e)}(e))}catch(e){console.log(e),t({type:"DISPLAY_ERROR",error:"Unable to connect to ".concat(r)})}}}function X(e){return function(t,n){var r=n().conversation.messages.length,o=Object(I.format)(new Date,P);t({type:"SAVE_USER_RESPONSE",response:{entity:"user",messageId:"usermessage-".concat(r),systemTime:o,text:e}}),t({type:"HIDE_BUTTON_BAR"}),t(K(e))}}function $(e){return function(t){t(X(e))}}function ee(e){return(ee="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function te(){return function(e,t){var n=t().conversation.conversationStarted;e({type:"SHOW_WINDOW"}),n||(e(J("Welcome")),e({type:"SET_CONVERSATION_STARTED"}))}}function ne(){return function(e,t){var n=t().conversation.lastUpdateTime,r=new Date,o=Object(I.parse)(n,P,new Date(n)),i=Object(I.differenceInMinutes)(r,o),a=Object(I.differenceInSeconds)(r,o),c="Now";i>=1?c="".concat(i," min ago"):a>=9&&(c="".concat(a," sec ago")),e({type:"UPDATE_CURRENT_TIME",headerTime:c,currentTime:Object(I.format)(r,P)})}}function re(e){return function(t){var n=e.title,r=e.avatar,o=e.client,i=e.clientOptions,a=e.initialActive,c=e.fullscreen,u=e.policyText,l=e.mapConfig,s=e.activationText,f=e.feedbackUrl,p=r;if(p||(p="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4KPCEtLSBHZW5lcmF0b3I6IEFkb2JlIElsbHVzdHJhdG9yIDIzLjAuNCwgU1ZHIEV4cG9ydCBQbHVnLUluIC4gU1ZHIFZlcnNpb246IDYuMDAgQnVpbGQgMCkgIC0tPgo8c3ZnIHZlcnNpb249IjEuMSIgaWQ9IkxheWVyXzEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHg9IjBweCIgeT0iMHB4IgoJIHZpZXdCb3g9IjAgMCAyNTkyIDE3MjgiIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDI1OTIgMTcyODsiIHhtbDpzcGFjZT0icHJlc2VydmUiPgo8c3R5bGUgdHlwZT0idGV4dC9jc3MiPgoJLnN0MHtmaWxsOiNGQkRCMzI7c3Ryb2tlOiNGQURBMzI7fQoJLnN0MXtmaWxsOiNENDczOTQ7fQoJLnN0MntzdHJva2U6I0ZBREEzMjt9Cjwvc3R5bGU+CjxnPgoJPHBhdGggY2xhc3M9InN0MCIgZD0iTTE4MTQuMjMsMTMzNmMzMC4yNC00Mi45LDU1LjQ5LTg4LjgsNzUuNDItMTM2LjgyYzM1LjY5LTg1Ljk5LDU0LjM1LTE3OC43NSw1NC4yLTI3My4wOQoJCWMtMC4yOC0zOTMuNTktMzE5LjI0LTcxMi42LTcxMi44My03MTIuOTRjLTE1OS4wNiwwLTMwNS45NCw1Mi4wOS00MjQuNTMsMTQwLjE1QzY2OS40Myw0ODAuNDEsNTgzLjY1LDY2Mi4wNSw1ODMuNjUsODYzLjcyCgkJYzAsMzg0LjM5LDMxMS42MSw2OTUuOTksNjk1Ljk5LDY5NS45OWMxMTAuOTcsMC4wOSwyMjAuMzQtMjYuMzksMzE4Ljk4LTc3LjIyYzQuMjgtMi4yMSw4Ljc5LTMuOTQsMTMuNDYtNS4xN2wyMi4xNS01LjgyCgkJYzE3LjgxLTQuNjgsMzYuNzYtMS42Nyw1Mi4yNCw4LjNsMTEuODgsNy42NWMyMi43NiwxMC4zNCw0Ni45MSwxNy4yOSw3MS42OSwyMC42MmMyMC4yNSwzLjA5LDQwLjU4LDUuNTIsNjAuOTgsNy4zCgkJYzEwLjA4LDAuODgsMjAuMTcsMS42LDMwLjI4LDIuMTdjMjYuMjIsMS4yNyw2MC43MSwwLjE3LDg2LjYxLTIuODVjLTMyLjQtMjIuNy04Ny42Ny03My43My0xMDkuNjEtMTEyLjYybC0xOC4wMi0zNy4zNgoJCUMxODE2LjEsMTM1NS42NSwxODE0LjA2LDEzNDUuODQsMTgxNC4yMywxMzM2eiIvPgoJPHBhdGggZD0iTTExMTUuNDYsNTk1LjQ5YzIuMzMtMjIuNjgtNC42NS00MS4zNi0yNC41Ny01My41NmMtNDIuNDUtMjMuMTUtOTcuMjEsMC42Ny05MS43Nyw1My41NmMwLDI2LjU5LDAsNTMuMTgsMCw3OS43OAoJCWMtNS40NCw1Mi44OSw0OS4zMSw3Ni43MSw5MS43Nyw1My41NmMxOS45Mi0xMi4yLDI2LjkxLTMwLjg4LDI0LjU3LTUzLjU2QzExMTUuNDYsNjQ4LjY3LDExMTUuNDYsNjIyLjA4LDExMTUuNDYsNTk1LjQ5eiIvPgoJPHBhdGggZD0iTTE1NjEuMjUsNTk1LjQ5YzIuMzMtMjIuNjgtNC42NS00MS4zNi0yNC41Ny01My41NmMtNDIuNDUtMjMuMTUtOTcuMjEsMC42Ny05MS43Nyw1My41NmMwLDI2LjU5LDAsNTMuMTgsMCw3OS43OAoJCWMtNS40NCw1Mi44OSw0OS4zMSw3Ni43MSw5MS43Nyw1My41NmMxOS45Mi0xMi4yLDI2LjkxLTMwLjg4LDI0LjU3LTUzLjU2QzE1NjEuMjUsNjQ4LjY3LDE1NjEuMjUsNjIyLjA4LDE1NjEuMjUsNTk1LjQ5eiIvPgoJPHBhdGggY2xhc3M9InN0MSIgZD0iTTEyMDguOTksOTYzLjE2YzIwLjkzLDEwLjI2LDQ0LjQ2LDE2LjAzLDY5LjM0LDE2LjAzYzI0Ljg4LDAsNDguNDItNS43Niw2OS4zNC0xNi4wMwoJCWMtNy45NS0zMC44OC0zNS45OC01My42OS02OS4zNC01My42OVMxMjE2Ljk0LDkzMi4yOCwxMjA4Ljk5LDk2My4xNnoiLz4KCTxwYXRoIGQ9Ik0xMjA4Ljk5LDk2My4xNmM3Ljk1LTMwLjg4LDM1Ljk4LTUzLjY5LDY5LjM0LTUzLjY5czYxLjM5LDIyLjgxLDY5LjM0LDUzLjY5YzUyLjMxLTI1LjY2LDg4LjMyLTc5LjQ0LDg4LjMzLTE0MS42MwoJCWgtMzE1LjM0QzExMjAuNjcsODgzLjcyLDExNTYuNjgsOTM3LjUsMTIwOC45OSw5NjMuMTZ6Ii8+Cgk8cGF0aCBjbGFzcz0ic3QyIiBkPSJNMTgwNi4zOCw0MDYuNjNjMTA2LjY3LDEyMi4yOSwxNzEuMzIsMjgyLjE5LDE3MS40NCw0NTcuMTljMC4yNCwxNTQuNDUtNTEuMTQsMzA0LjU1LTE0NS45OSw0MjYuNDUKCQljLTYuNyw5LjM5LTExLjMzLDIwLjA5LTEzLjU4LDMxLjRjLTMuNDksMTQuNC0yLDI5LjU2LDQuMjEsNDMuMDJsMTguMDIsMzcuMzZjMjEuOTQsMzguODksNzcuMjEsODkuOTIsMTA5LjYxLDExMi42MgoJCWMtMjUuOSwzLjAyLTYwLjM5LDQuMTItODYuNjEsMi44NWMtMzAuNTUtMS43LTYxLjAxLTQuODYtOTEuMjYtOS40N2MtMjQuNzgtMy4zMy00OC45My0xMC4yOC03MS42OS0yMC42MmwtMTEuODgtNy42NQoJCWMtMTUuNDgtOS45Ni0zNC40NC0xMi45Ny01Mi4yNC04LjNsLTIyLjE1LDUuODJjLTQuNjYsMS4yMi05LjE3LDIuOTYtMTMuNDYsNS4xN2MtOTguNjQsNTAuODMtMjA4LjAyLDc3LjMxLTMxOC45OCw3Ny4yMgoJCWMtMzg0LjM5LDAtNjk1Ljk5LTMxMS42MS02OTUuOTktNjk1Ljk5czMxMS42MS02OTUuOTksNjk1Ljk5LTY5NS45OWM3MC4zNywwLjA2LDEzOC4zLDEwLjU1LDIwMi4zMywzMC4wMgoJCWM1NS4xMyw2LjQxLDUzLjI5LTUzLjcsMjQuNDYtNjEuMzljLTcxLjY0LTIyLjMxLTE0Ny44MS0zNC4zMy0yMjYuNzktMzQuMzNjLTQyMC42NywwLTc2MS42OSwzNDEuMDItNzYxLjY5LDc2MS42OQoJCXMzNDEuMDIsNzYxLjY5LDc2MS42OSw3NjEuNjljMTI1Ljg0LDAsMjQ0LjU0LTMwLjUxLDM0OS4xMy04NC41NWM4LjQzLTIuNjIsMTUuMy00LjYzLDIyLjE1LTUuODJjNC45NywzLjY1LDEwLjIxLDcsMTUuNjcsMTAuMDgKCQljNzEuNDQsNDAuMjYsMzIyLjk0LDYxLjc2LDM4OS42My0wLjQyYzE5LjY4LTEyLjc3LDI1LjAxLTMwLjkzLTE3LjczLTU1LjY3Yy01Ljc4LTMuMzQtMTIuMzktNi43MS0xOS44Ni0xMC4wNwoJCWMtMjcuODYtMTIuNTMtMjkuMDgtMTUuMjEtNTMuMDItMzQuNDljLTI0Ljc1LTE5Ljk0LTQ3LjE2LTQwLjU3LTcyLjI5LTc4LjMzYy00LTguNi04LjQ0LTE4LjItMTMuNDEtMjkuMDIKCQljMC40OS0yLjE0LDEuMDItNC4zMSwxLjU4LTYuNTJjMTAwLjE4LTEyOC45NSwxNTkuODQtMjkwLjk2LDE1OS44NC00NjYuOWMwLTE5Ni44Ni03NC42OC0zNzYuMjgtMTk3LjI2LTUxMS40NwoJCUMxODA5LjA1LDMyMC4yNCwxNzYwLjExLDM2MS45LDE4MDYuMzgsNDA2LjYzeiIvPgoJPHBhdGggY2xhc3M9InN0MiIgZD0iTTE3MTEuNTMsMjM0LjcxYy0xOS4yNC0xMy4xNy0zOS4xMS0yNS40Ny01OS41Ni0zNi44NmMtMzMuOS0xOC44OC01Ni44MSw0My45LTMzLjcsNTYuNwoJCWMxNy42NSw5Ljc4LDM0Ljg0LDIwLjMsNTEuNTEsMzEuNTJDMTcwMy4yOSwzMDguNjMsMTc0Ny43NywyNTkuNTIsMTcxMS41MywyMzQuNzF6Ii8+CjwvZz4KPC9zdmc+Cg=="),t({type:"SET_TITLE",title:n}),t({type:"SET_AVATAR",avatar:p}),t(Z(o,i)),t((function(e,t){var n=t().conversation.timer;n&&clearInterval(n);var r=setInterval((function(){return e(ne())}),1e4);e({type:"TIMER_START",newTimer:r}),e(ne())})),u&&""!==u&&t({type:"SET_PRIVACY_POLICY",policyText:u}),s&&""!==s&&t({type:"SET_ACTIVATION_TEXT",activationText:s}),f&&t({type:"SET_FEEDBACK_URL",feedbackUrl:f}),l){var y=l.googleMapsKey,b=l.centerCoordinates,m=D()(b,"lat",null),d=D()(b,"lng",null);if(y&&""!==y&&t({type:"SET_GOOGLE_MAPS_KEY",googleMapsKey:y}),b)try{if("object"!==ee(b)||null===m||null===d)throw new Error("Please provide valid latitude and longitude coordinates, see README");t({type:"SET_CENTER_COORDINATES",centerCoordinates:b})}catch(e){console.log(e)}}!0===a?(t({type:"SET_CONVERSATION_STARTED"}),t(J("Welcome")),t(te())):t({type:"HIDE_WINDOW"}),t(!0===c?{type:"FULLSCREEN"}:{type:"WINDOWED"})}}function oe(e){return(oe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ie(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ae(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ce(e,t){return(ce=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ue(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=se(e);if(t){var o=se(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return le(this,n)}}function le(e,t){return!t||"object"!==oe(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function se(e){return(se=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function fe(){var e=be(["\n  && {\n    width: 32px;\n    height: 32px;\n    margin-right: 10px;\n    border-radius: 50% 50% 0px 50%;\n  }\n"]);return fe=function(){return e},e}function pe(){var e=be(["\n  text-transform: none;\n  padding-right: 10px;\n  color: ",";\n"]);return pe=function(){return e},e}function ye(){var e=be(["\n  && {\n    display: ",";\n    pointer-events: auto;\n    width: ",";\n    height: ",";\n    padding: ",";\n    border-radius: ",";\n  }\n"]);return ye=function(){return e},e}function be(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var me=u()(w.a)(ye(),(function(e){return e.active?"flex":"none"}),(function(e){return e.activationtext?"auto":"56px"}),(function(e){return e.activationtext?"auto":"56px"}),(function(e){return e.activationtext?"4px 6px":"auto"}),(function(e){return e.activationtext?"20px":"50%"})),de=u.a.div(pe(),(function(e){return e.theme.palette.getContrastText(e.theme.palette.primary.dark)})),ge=u()(L.a)(fe()),he=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ce(e,t)}(i,e);var t,n,r,o=ue(i);function i(){return ie(this,i),o.apply(this,arguments)}return t=i,(n=[{key:"render",value:function(){var e=this.props,t=e.title,n=e.windowVisible,r=e.showWindow,o=e.activationText,i=e.theme,c=e.avatar,u=o?a.a.createElement(a.a.Fragment,null,a.a.createElement(ge,{alt:t,src:c}),a.a.createElement(de,{theme:i},o)):a.a.createElement(E.a,null);return a.a.createElement(T.a,{in:!n,unmountOnExit:!0},a.a.createElement(me,{color:"primary",onClick:r,active:n?0:1,activationtext:o?1:0},u))}}])&&ae(t.prototype,n),r&&ae(t,r),i}(i.PureComponent),ve=Object(g.withTheme)()(Object(r.connect)((function(e){return{title:e.config.title,windowVisible:e.config.windowVisible,activationText:e.config.activationText,avatar:e.config.avatar}}),(function(e){return{showWindow:function(){e(te())}}}))(he)),je=n(35),Oe=n.n(je),we=n(6),Me=n.n(we),Ee=n(36),xe=n.n(Ee),Te=n(37),Se=n.n(Te),Le=n(38),Ne=n.n(Le),De=n(20),Ie=n.n(De),Pe=n(39),Ce=n.n(Pe),ke=n(25),_e=n.n(ke),Re=n(9),ze=n.n(Re),Ae=n(3);function Ue(e){return(Ue="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ye(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ve(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Qe(e,t){return(Qe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function We(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Be(e);if(t){var o=Be(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return qe(this,n)}}function qe(e,t){return!t||"object"!==Ue(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Be(e){return(Be=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ge(){var e=Ke(["\n  && {\n    font-size: 12px;\n    font-weight: lighter;\n    flex: 0;\n    cursor: pointer;\n    min-width: 85px;\n    padding: 1px;\n    border-radius: 10px;\n    border: 1px solid ",";\n    color: ",";\n    &:hover {\n      background: rgba(255, 255, 255, 0.15);\n    }\n  }\n"]);return Ge=function(){return e},e}function He(){var e=Ke(["\n  && {\n    padding: 6px;\n    flex: 0;\n    cursor: pointer;\n    color: ",";\n    &:hover {\n      background: rgba(255, 255, 255, 0.15);\n    }\n  }\n"]);return He=function(){return e},e}function Fe(){var e=Ke(["\n  && {\n    font-family: 'Product Sans';\n    font-weight: 400;\n    height: 32px;\n    font-size: 18px;\n    line-height: 32px;\n    flex: 1;\n    color: ",";\n  }\n"]);return Fe=function(){return e},e}function Je(){var e=Ke(["\n  && {\n    position: relative;\n    background: ",";\n    padding: 6px;\n    height: 32px;\n    display: flex;\n    flex-flow: row nowrap;\n    align-items: center;\n    border-bottom-left-radius: 0px;\n    border-bottom-right-radius: 0px;\n    border-top-right-radius: 4px;\n    border-top-left-radius: 4px;\n    z-index: 1;\n    grid-area: header;\n    box-sizing: content-box; /*For WordPress*/\n    line-height: normal; /*For WordPress*/\n  }\n"]);return Je=function(){return e},e}function Ze(){var e=Ke(["\n  && {\n    flex: 0 0 32px;\n    width: 32px;\n    height: 32px;\n    margin-right: 16px;\n    border-radius: 50% 50% 0px 50%;\n  }\n"]);return Ze=function(){return e},e}function Ke(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var Xe=u()(L.a)(Ze()),$e=u.a.div(Je(),(function(e){return e.theme.palette.header.main})),et=u()(Me.a)(Fe(),(function(e){return e.theme.palette.getContrastText(e.theme.palette.primary.dark)})),tt=u()(Ie.a)(He(),(function(e){return e.theme.palette.getContrastText(e.theme.palette.primary.dark)})),nt=u()(ze.a)(Ge(),(function(e){return e.theme.palette.getContrastText(e.theme.palette.primary.dark)}),(function(e){return e.theme.palette.getContrastText(e.theme.palette.primary.dark)})),rt=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Qe(e,t)}(i,e);var t,n,r,o=We(i);function i(){return Ye(this,i),o.apply(this,arguments)}return t=i,(n=[{key:"render",value:function(){var e=this.props,t=e.title,n=e.theme,r=e.hideWindow,o=e.showWindowed,i=e.showFullscreen,c=e.fullscreen,u=e.avatar,l=e.showPrivacyPolicy,s=e.sendQuickReply,f=e.messages,p=Object(Ae.findLast)(f,(function(e){return Object(Ae.find)(e.responses,["type","suggestion"])})),y=null;if(p){var b=p.responses.filter((function(e){return"suggestion"===e.type}))[0].suggestions;y=Object(Ae.find)(b,(function(e){return"home"===e.toLowerCase()||"start over"===e.toLowerCase()}))}return a.a.createElement($e,{theme:n},a.a.createElement(Xe,{alt:t,src:u}),a.a.createElement(et,{theme:n,variant:"h6"},t),y&&a.a.createElement(_e.a,{title:"Return to subject selection",placement:"bottom"},a.a.createElement(nt,{theme:n,onClick:function(){return s("START OVER")}},"Start Over")),a.a.createElement(_e.a,{title:"Privacy Policy",placement:"bottom"},a.a.createElement(tt,{theme:n,onClick:l,"aria-label":"Windowed"},a.a.createElement(Ne.a,{fontSize:"small"}))),c?a.a.createElement(tt,{theme:n,onClick:o,"aria-label":"Windowed"},a.a.createElement(Se.a,{fontSize:"small"})):a.a.createElement(tt,{theme:n,onClick:function(e){console.log("maximize clicked"),i(e)},"aria-label":"Fullscreen"},a.a.createElement(xe.a,{fontSize:"small"})),a.a.createElement(tt,{theme:n,onClick:r,"aria-label":"Close"},a.a.createElement(Ce.a,{fontSize:"small"})))}}])&&Ve(t.prototype,n),r&&Ve(t,r),i}(i.PureComponent),ot=Object(g.withTheme)()(Object(r.connect)((function(e){return{title:e.config.title,fullscreen:e.config.fullscreen,avatar:e.config.avatar,messages:e.conversation.messages}}),(function(e){return{hideWindow:function(){return e({type:"HIDE_WINDOW"})},showFullscreen:function(){return e({type:"FULLSCREEN"})},showWindowed:function(){return e({type:"WINDOWED"})},showPrivacyPolicy:function(){return e({type:"SHOW_PRIVACY_POLICY"})},sendQuickReply:function(t){return e($(t))}}}))(rt)),it=n(40),at=n.n(it),ct=n(41),ut=n.n(ct),lt=n(42),st=n.n(lt),ft=n(43),pt=n.n(ft),yt=n(44),bt=n.n(yt);function mt(e){return(mt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function dt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function gt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ht(e,t){return(ht=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function vt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Ot(e);if(t){var o=Ot(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return jt(this,n)}}function jt(e,t){return!t||"object"!==mt(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ot(e){return(Ot=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function wt(){var e=function(e,t){t||(t=e.slice(0));return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}(["\n  && {\n    position: absolute;\n  }\n"]);return wt=function(){return e},e}var Mt=u()(ut.a)(wt()),Et=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ht(e,t)}(i,e);var t,n,r,o=vt(i);function i(){return dt(this,i),o.apply(this,arguments)}return t=i,(n=[{key:"render",value:function(){var e=this.props,t=e.hidePrivacyPolicy,n=e.privacyPolicyVisible,r=e.privacyPolicy,o=e.parentRef;return a.a.createElement(Mt,{open:n,onClose:t,"aria-labelledby":"privacy-policy",container:o,scroll:"paper"},a.a.createElement(at.a,null,"Privacy Statement"),a.a.createElement(pt.a,null,a.a.createElement(bt.a,null,r)),a.a.createElement(st.a,null,a.a.createElement(ze.a,{onClick:t,color:"primary"},"Close")))}}])&&gt(t.prototype,n),r&&gt(t,r),i}(i.PureComponent),xt={hidePrivacyPolicy:function(){return{type:"HIDE_PRIVACY_POLICY"}}},Tt=Object(r.connect)((function(e){return{privacyPolicyVisible:e.config.privacyPolicyVisible,privacyPolicy:e.config.privacyPolicy}}),xt)(Et),St=n(45),Lt=n.n(St),Nt=n(24),Dt=n.n(Nt),It=n(18),Pt=n.n(It),Ct=n(14),kt=n.n(Ct),_t=n(46),Rt=n.n(_t);function zt(e){return(zt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function At(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ut(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Yt(e,t){return(Yt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Vt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Wt(e);if(t){var o=Wt(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Qt(this,n)}}function Qt(e,t){return!t||"object"!==zt(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Wt(e){return(Wt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function qt(){var e=Gt(["\n  animation: dot-keyframes 1s infinite ease-in-out;\n  background-color: ",";\n  border-radius: 10px;\n  display: inline-block;\n  height: 8px;\n  width: 8px;\n\n  &:nth-child(2) {\n    animation-delay: 0.25s;\n  }\n\n  &:nth-child(3) {\n    animation-delay: 0.5s;\n  }\n\n  @keyframes dot-keyframes {\n    0% {\n      opacity: 0.4;\n      transform: scale(1, 1);\n    }\n\n    50% {\n      opacity: 1;\n      transform: scale(1.3, 1.3);\n    }\n\n    100% {\n      opacity: 0.4;\n      transform: scale(1, 1);\n    }\n  }\n"]);return qt=function(){return e},e}function Bt(){var e=Gt(["\n  text-align: center;\n  width: 42px;\n  height: 100%;\n  display: flex;\n  flex-flow: row nowrap;\n  justify-content: space-around;\n  align-items: center;\n"]);return Bt=function(){return e},e}function Gt(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var Ht=u.a.div(Bt()),Ft=u.a.div(qt(),Rt.a[900]),Jt=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Yt(e,t)}(i,e);var t,n,r,o=Vt(i);function i(){return At(this,i),o.apply(this,arguments)}return t=i,(n=[{key:"render",value:function(){return a.a.createElement(Ht,null,a.a.createElement(Ft,null),a.a.createElement(Ft,null),a.a.createElement(Ft,null))}}])&&Ut(t.prototype,n),r&&Ut(t,r),i}(i.PureComponent);function Zt(e){return(Zt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Kt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Xt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function $t(e,t){return($t=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function en(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=rn(e);if(t){var o=rn(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return tn(this,n)}}function tn(e,t){return!t||"object"!==Zt(t)&&"function"!=typeof t?nn(e):t}function nn(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function rn(e){return(rn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function on(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function an(){var e=fn(["\n  && {\n    color: ",";\n    margin-top: 6px;\n    padding-left: 5px;\n    padding-right: 2px;\n  }\n"]);return an=function(){return e},e}function cn(){var e=fn(["\n  && {\n    max-width: 360px;\n    overflow: hidden;\n    background-color: ",";\n    color: #ffffff;\n    border-top-left-radius: 10px;\n    border-top-right-radius: 1px;\n    border-bottom-right-radius: 10px;\n    border-bottom-left-radius: 10px;\n    padding: 9px;\n  }\n"]);return cn=function(){return e},e}function un(){var e=fn(["\n  && {\n    background: ",";\n    border-top-right-radius: 10px;\n    border-top-left-radius: 1px;\n    border-bottom-right-radius: 10px;\n    border-bottom-left-radius: 10px;\n    padding: 9px;\n  }\n"]);return un=function(){return e},e}function ln(){var e=fn(["\n  width: 100%;\n  display: flex;\n  flex-flow: row nowrap;\n  padding: 0;\n  justify-content: ",";\n"]);return ln=function(){return e},e}function sn(){var e=fn(["\n  display: flex;\n  flex-flow: column nowrap;\n  margin: 10px;\n  height: min-content;\n  align-items: ",";\n  scroll-margin: 15px;\n  p, div {\n    font-size: 14px;\n  }\n"]);return sn=function(){return e},e}function fn(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var pn=u.a.div(sn(),(function(e){return"user"===e.entity?"flex-end":"flex-start"})),yn=u.a.div(ln(),(function(e){return"user"===e.entity?"flex-end":"flex-start"})),bn=u.a.div(un(),d.a[400]),mn=u.a.div(cn(),(function(e){return e.theme.palette.primary.main})),dn=u()(Me.a)(an(),d.a[500]),gn={forceBlock:!0,overrides:{h6:{component:Me.a,props:{variant:"h6"}},p:{component:Me.a,props:{variant:"body1"}},a:{component:kt.a}}},hn=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&$t(e,t)}(i,e);var t,n,r,o=en(i);function i(){var e;Kt(this,i);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return on(nn(e=o.call.apply(o,[this].concat(n))),"state",{isResponseDelayed:!1}),e}return t=i,(n=[{key:"componentDidMount",value:function(){var e=this;this.props.isLoading&&(this.loadingTimer=setTimeout((function(){e.setState((function(){return{isResponseDelayed:!0}}))}),8e3))}},{key:"componentWillUnmount",value:function(){clearTimeout(this.loadingTimer)}},{key:"render",value:function(){var e,t=this.props,n=t.message,r=t.entity,o=t.isLoading,i=t.timestamp,c=t.currentTime,u=t.theme,l=t.showTimestamp,s=t.error,f=t.className,p=t.key,y=this.state.isResponseDelayed,b=Object(I.parse)(i,P,new Date(c)),m=Object(I.isSameDay)(new Date,b),d=Object(I.isSameDay)(b,Object(I.subDays)(new Date,1)),g=null;return g=m?"Today ".concat(Object(I.format)(b,"h:mm aa")):d?"Yesterday ".concat(Object(I.format)(b,"h:mm aa")):Object(I.format)(b,"MMMM dd, yyyy h:mm aa"),e=n&&""!==n[0]?n:["I’m sorry, I am having trouble understanding that question right now. Please try again later or ask me something else."],a.a.createElement(pn,{entity:r,className:f,key:p},a.a.createElement(yn,{entity:r},"user"===r&&a.a.createElement(mn,{elevation:1,theme:u},n),"user"!==r&&a.a.createElement(bn,{elevation:1},o&&!s&&!y&&a.a.createElement(Jt,null),o&&!s&&y&&a.a.createElement(Pt.a,{options:gn},"Thank you for your patience, I’m working hard to get you the best answer. Hold tight!"),o&&s&&s,!o&&a.a.createElement(Pt.a,{options:gn},e[0]))),l?a.a.createElement(dn,{variant:"caption"},g):null)}}])&&Xt(t.prototype,n),r&&Xt(t,r),i}(i.Component),vn=Object(g.withTheme)()(Object(r.connect)((function(e){return{currentTime:e.conversation.currentTime,error:e.error}}))(hn)),jn=n(15),On=n.n(jn),wn=n(21),Mn=n.n(wn),En=n(12),xn=n.n(En),Tn=n(47),Sn=n.n(Tn);function Ln(e){return(Ln="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Nn(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Dn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function In(e,t){return(In=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Pn(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=kn(e);if(t){var o=kn(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Cn(this,n)}}function Cn(e,t){return!t||"object"!==Ln(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function kn(e){return(kn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _n(){var e=zn(["\n  && {\n    height: ",";\n    background-size: cover;\n    background-position: center center;\n  }\n"]);return _n=function(){return e},e}function Rn(){var e=zn(["\n  && {\n    border-top-left-radius: 10px;\n    border-top-right-radius: 10px;\n    border-bottom-right-radius: 10px;\n    border-bottom-left-radius: 10px;\n    background: #fff;\n    margin: 15px 16px 15px 16px;\n    white-space: pre-line;\n    scroll-margin: 15px;\n  }\n"]);return Rn=function(){return e},e}function zn(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var An=u()(On.a)(Rn()),Un=u()(Sn.a)(_n(),(function(e){return e.image&&""!==e.image?"200px":"0px"})),Yn=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&In(e,t)}(i,e);var t,n,r,o=Pn(i);function i(){return Nn(this,i),o.apply(this,arguments)}return t=i,(n=[{key:"render",value:function(){var e=this.props.data,t=e.title,n=e.subtitle,r=e.imageUrl,o=e.buttons,i=e.className;return a.a.createElement(An,{className:i,key:this.props.key},r?a.a.createElement(Un,{image:encodeURI(r),title:""}):null,a.a.createElement(xn.a,null,a.a.createElement(Me.a,{gutterBottom:!0,variant:"h6"},t),a.a.createElement(Pt.a,{options:{forceBlock:!0,overrides:{h6:{component:Me.a,props:{variant:"h6"}},p:{component:Me.a,props:{variant:"body1"}},a:{component:kt.a}}}},n)),a.a.createElement(Mn.a,null,o.map((function(e,t){var n="card-".concat(t).concat(Object(I.format)(new Date,P));return a.a.createElement(ze.a,{href:e.postback,target:"_blank",size:"small",color:"primary",key:n},e.text)}))))}}])&&Dn(t.prototype,n),r&&Dn(t,r),i}(i.PureComponent),Vn=Object(r.connect)((function(e){return{inputValue:e.userInput}}))(Yn),Qn=n(48),Wn=n.n(Qn),qn=n(49),Bn=n.n(qn),Gn=n(50),Hn=n.n(Gn),Fn=n(26),Jn=n.n(Fn),Zn=n(51),Kn=n.n(Zn),Xn=n(17);function $n(){var e=ir(["\n  &&& {\n    width: 20%;\n    padding-right: 0;\n    text-align: right;\n  }\n"]);return $n=function(){return e},e}function er(){var e=ir(["\n  && {\n    width: 70%;\n    padding: 4px 0px 4px 0px;\n  }\n"]);return er=function(){return e},e}function tr(){var e=ir(["\n  td {\n    padding: 4px 0px 4px 0px;\n  }\n  tr:last-of-type {\n    td {\n      border-bottom: none;\n    }\n  }\n"]);return tr=function(){return e},e}function nr(){var e=ir(["\n  &&& {\n    padding-top: 0;\n    padding-bottom: 0;\n  }\n"]);return nr=function(){return e},e}function rr(){var e=ir(["\n  height: 150px;\n  font-size: 14px;\n  margin-top: 10px;\n"]);return rr=function(){return e},e}function or(){var e=ir(["\n  && {\n    border-top-left-radius: 10px;\n    border-top-right-radius: 10px;\n    border-bottom-right-radius: 10px;\n    border-bottom-left-radius: 10px;\n    background: #fff;\n    margin: 15px 16px 15px 16px;\n    white-space: pre-line;\n    scroll-margin: 15px;\n  }\n"]);return or=function(){return e},e}function ir(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var ar=u()(On.a)(or()),cr=u.a.div(rr()),ur=u()(xn.a)(nr()),lr=u()(Hn.a)(tr()),sr=u()(Jn.a)(er()),fr=u()(Jn.a)($n());var pr=Object(r.connect)((function(e){return{googleMapsKey:e.config.googleMapsKey}}))((function(e){var t=e.data,n=e.googleMapsKey,r=e.className,o=e.key,i={width:30,height:30},c="https://maps.googleapis.com/maps/api/js?key=".concat(n,"&v=3"),u=Object(Xn.withScriptjs)(Object(Xn.withGoogleMap)((function(){return a.a.createElement(Xn.GoogleMap,{defaultZoom:8,defaultCenter:t.nearestLocations[0],defaultOptions:{zoomControl:!0,mapTypeControl:!1,streetViewControl:!1,fullscreenControl:!1}},t.locations.map((function(e,t){return a.a.createElement(Xn.Marker,{key:t,position:{lat:e.lat,lng:e.lng},icon:{url:"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0Ij48cGF0aCBmaWxsPSIjRUUzODQwIiBkPSJNMTIgMkM4LjEzIDIgNSA1LjEzIDUgOWMwIDUuMjUgNyAxMyA3IDEzczctNy43NSA3LTEzYzAtMy44Ny0zLjEzLTctNy03em0wIDkuNWMtMS4zOCAwLTIuNS0xLjEyLTIuNS0yLjVzMS4xMi0yLjUgMi41LTIuNSAyLjUgMS4xMiAyLjUgMi41LTEuMTIgMi41LTIuNSAyLjV6Ii8+PHBhdGggZD0iTTAgMGgyNHYyNEgweiIgZmlsbD0ibm9uZSIvPjwvc3ZnPg==",scaledSize:i},onClick:function(){return t="https://www.google.com/maps/search/?api=1&query=Google&query_place_id=".concat(e.placeId),void window.open(t,"_blank");var t}})})),a.a.createElement(Xn.Marker,{position:{lat:t.currentGeocode.lat,lng:t.currentGeocode.lng},icon:{url:"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCI+PGRlZnM+PHBhdGggaWQ9ImEiIGQ9Ik0wIDBoMjR2MjRIMFYweiIvPjwvZGVmcz48Y2xpcFBhdGggaWQ9ImIiPjx1c2UgeGxpbms6aHJlZj0iI2EiIG92ZXJmbG93PSJ2aXNpYmxlIi8+PC9jbGlwUGF0aD48cGF0aCBjbGlwLXBhdGg9InVybCgjYikiIGZpbGw9IiMyOTc5RkYiIGQ9Ik0xMiAyQzguMTQgMiA1IDUuMTQgNSA5YzAgNS4yNSA3IDEzIDcgMTNzNy03Ljc1IDctMTNjMC0zLjg2LTMuMTQtNy03LTd6bTAgMmMxLjEgMCAyIC45IDIgMiAwIDEuMTEtLjkgMi0yIDJzLTItLjg5LTItMmMwLTEuMS45LTIgMi0yem0wIDEwYy0xLjY3IDAtMy4xNC0uODUtNC0yLjE1LjAyLTEuMzIgMi42Ny0yLjA1IDQtMi4wNXMzLjk4LjczIDQgMi4wNWMtLjg2IDEuMy0yLjMzIDIuMTUtNCAyLjE1eiIvPjwvc3ZnPg==",scaledSize:i}}))})));return a.a.createElement(ar,{className:r,key:o},a.a.createElement(Wn.a,{title:"Office Locations",titleTypographyProps:{variant:"h6"}}),a.a.createElement(ur,null,a.a.createElement(u,{googleMapURL:c,loadingElement:a.a.createElement("div",{style:{height:"".concat("230px")}}),containerElement:a.a.createElement("div",{style:{height:"".concat("230px")}}),mapElement:a.a.createElement("div",{style:{height:"100%"}})}),a.a.createElement(cr,null,a.a.createElement(Bn.a,{padding:"dense"},a.a.createElement(lr,null,t.nearestLocations.map((function(e,t){return a.a.createElement(Kn.a,{key:t},a.a.createElement(sr,{padding:"dense"},a.a.createElement(Me.a,null,a.a.createElement(kt.a,{href:"https://www.google.com/maps/search/?api=1&query=Google&query_place_id=".concat(e.placeId),target:"blank"},e.street,",",e.city))),a.a.createElement(fr,{padding:"dense"},e.distance))})))))))})),yr=n(52),br=n.n(yr),mr=n(53),dr=n.n(mr),gr=n(54),hr=n.n(gr),vr=n(55),jr=n.n(vr),Or=n(22),wr=n.n(Or),Mr=n(56),Er=n.n(Mr);function xr(e){return(xr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Tr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Sr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Tr(Object(n),!0).forEach((function(t){_r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Tr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Lr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Nr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Dr(e,t){return(Dr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ir(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=kr(e);if(t){var o=kr(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Pr(this,n)}}function Pr(e,t){return!t||"object"!==xr(t)&&"function"!=typeof t?Cr(e):t}function Cr(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function kr(e){return(kr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Rr(){var e=function(e,t){t||(t=e.slice(0));return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}(["\n  font-size: 14px;\n  font-weight: bold;\n  padding-bottom: 15px;\n  padding-top: 13px;\n"]);return Rr=function(){return e},e}var zr=u.a.div(Rr()),Ar=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Dr(e,t)}(i,e);var t,n,r,o=Ir(i);function i(){var e;Lr(this,i);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return _r(Cr(e=o.call.apply(o,[this].concat(n))),"state",{isSubmitted:!1,feedbackComment:""}),e}return t=i,(n=[{key:"render",value:function(){var e=this,t=this.props,n=t.feedbackInputs,r=t.feedbackUrl,o=t.saveFeedbackInput,i=t.sendFeedback,c=t.session,u=t.outputContexts;return a.a.createElement(a.a.Fragment,null,this.state.isSubmitted?a.a.createElement(xn.a,null,"Thank you. Your feedback is important to us and will help improve Gen."):a.a.createElement("div",null,a.a.createElement(xn.a,null,a.a.createElement(Me.a,{gutterBottom:!0,variant:"h6"},n.wasHelpful?"Why was Gen helpful?":"Why was Gen not helpful?"),a.a.createElement(br.a,{component:"fieldset"},a.a.createElement(dr.a,null,n.feedbackList?n.feedbackList.map((function(e){return a.a.createElement(hr.a,{key:e.value,control:a.a.createElement(jr.a,{checked:e.checked,onChange:(t=e.value,function(e){var n={value:t,checked:e.target.checked};o(n)}),value:e.value}),label:e.value});var t})):null,a.a.createElement(zr,null,"Add your comments"),a.a.createElement(wr.a,{placeholder:"Type something",variant:"outlined",multiline:!0,value:this.state.feedbackComment,onChange:function(t){var n=t.target.value;e.setState((function(e){return Sr(Sr({},e),{},{feedbackComment:n})}))},InputProps:{classes:{inputMultiline:this.props.classes.inputMultiline}}})))),a.a.createElement(Mn.a,null,a.a.createElement(ze.a,{size:"small",color:"primary",onClick:function(){var t,o,a={wasHelpful:n.wasHelpful,session:c,feedbackList:(t=n.feedbackList,t.filter((function(e){return e.checked?e.value:null})).map((function(e){return e.value}))),comment:e.state.feedbackComment,outputContexts:u};o=a,fetch(r,{method:"POST",body:JSON.stringify(o),headers:{"Content-Type":"application/json"}}),i("Feedback complete"),e.setState((function(e){return Sr(Sr({},e),{},{isSubmitted:!0})}))},disabled:!(n.feedbackList&&n.feedbackList.length>0&&!Er()(n.feedbackList,(function(e){return!e.checked}))||this.state.feedbackComment)},"Submit"))))}}])&&Nr(t.prototype,n),r&&Nr(t,r),i}(i.PureComponent),Ur=Object(g.withStyles)((function(){return{root:{},inputMultiline:{fontSize:"0.875rem",overflowY:"hidden"}}}))(Object(r.connect)((function(e){return{feedbackInputs:e.feedbackInput,feedbackUrl:e.config.feedbackUrl,outputContexts:e.conversation.outputContexts}}),(function(e){return{saveFeedbackInput:function(t){e(function(e){return{type:"SAVE_FEEDBACK_INPUT",value:e}}(t))},sendFeedback:function(t){e(function(e){return function(t){t(K(e))}}(t))}}}))(Ar));function Yr(e){return(Yr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Vr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Qr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Wr(e,t){return(Wr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function qr(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Gr(e);if(t){var o=Gr(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Br(this,n)}}function Br(e,t){return!t||"object"!==Yr(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Gr(e){return(Gr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Hr(){var e=function(e,t){t||(t=e.slice(0));return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}(["\n  && {\n    border-top-left-radius: 10px;\n    border-top-right-radius: 10px;\n    border-bottom-right-radius: 10px;\n    border-bottom-left-radius: 10px;\n    background: #fff;\n    margin: 15px 16px 15px 16px;\n    white-space: pre-line;\n    scroll-margin: 15px;\n  }\n"]);return Hr=function(){return e},e}var Fr=u()(On.a)(Hr()),Jr=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Wr(e,t)}(i,e);var t,n,r,o=qr(i);function i(){return Vr(this,i),o.apply(this,arguments)}return t=i,(n=[{key:"componentDidMount",value:function(){var e=this.props;(0,e.setFeedbackOptions)(e.feedbackData)}},{key:"render",value:function(){var e=this.props,t=e.session,n=e.className,r=e.key;return a.a.createElement(Fr,{className:n,key:r},a.a.createElement(Ur,{session:t}))}}])&&Qr(t.prototype,n),r&&Qr(t,r),i}(i.PureComponent),Zr=Object(r.connect)((function(e){return{feedbackInputs:e.feedbackInput}}),(function(e){return{setFeedbackOptions:function(t){e(function(e){return{type:"SET_FEEDBACK_OPTIONS",value:e}}(t))}}}))(Jr);function Kr(){var e=function(e,t){t||(t=e.slice(0));return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}(["\n    @media (max-width: ","em) {\n      ",";\n    }\n  "]);return Kr=function(){return e},e}var Xr={giant:1170,desktop:992,tablet:768,phone:620},$r=Object.keys(Xr).reduce((function(e,t){var n=Xr[t]/16;return e[t]=function(){return Object(c.css)(Kr(),n,c.css.apply(void 0,arguments))},e}),{});function eo(e){return(eo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function to(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function no(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?to(Object(n),!0).forEach((function(t){lo(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):to(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ro(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function oo(e,t){return(oo=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function io(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=uo(e);if(t){var o=uo(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return ao(this,n)}}function ao(e,t){return!t||"object"!==eo(t)&&"function"!=typeof t?co(e):t}function co(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function uo(e){return(uo=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function lo(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function so(){var e=bo(["\n   transform: none;\n  "]);return so=function(){return e},e}function fo(){var e=bo(["\n  background: ",";\n  z-index: 4;\n  grid-area: chatwindow;\n  margin-bottom: 1px;\n  margin-top: 8px;\n\n  /* Vertically flips the content element so that the messages won't be upside down */\n  transform: scale(1, -1);\n\n  ",";\n"]);return fo=function(){return e},e}function po(){var e=bo(["\n    flex-direction: column-reverse;\n    overflow: auto;\n    transform: none;\n  "]);return po=function(){return e},e}function yo(){var e=bo(["\n  display: flex;\n  flex-direction: column;\n  /* Vertically flips the container element to achieve flex-direction:column-reverse effect */\n  transform: scale(1, -1);\n  overflow: auto;\n  ",";\n"]);return yo=function(){return e},e}function bo(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var mo=u.a.div(yo(),$r.tablet(po())),go=u.a.div(fo(),d.a[100],$r.tablet(so()));function ho(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return a.a.createElement(vn,{message:e.text,entity:e.entity,key:e.key,isLoading:!1,timestamp:e.systemTime,showTimestamp:t,className:n?"scrollIntoView":""})}var vo=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&oo(e,t)}(i,e);var t,n,r,o=io(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),lo(co(t=o.call(this,e)),"componentRef",a.a.createRef(null)),lo(co(t),"state",{messageElements:[]}),lo(co(t),"messages",[]),lo(co(t),"findIndexFirstElementInLastResponse",(function(e){var t=0,n=!1;return Object(Ae.forEachRight)(e,(function(e,r){"bot"===e.entity?n||(t=r):n=!0})),t})),lo(co(t),"parseMessages",(function(){var e=t.props.messages,n=[];return e.forEach((function(e){var t={systemTime:e.systemTime,entity:e.entity,session:e.messageSession,key:e.key};if(e.loading){var r=Dt()(e,t);n.push(r)}else if("bot"===e.entity)e.responses.forEach((function(e,r){if("text"===e.type||"card"===e.type||"payload"===e.type){var o=Dt()(e,no(no({},t),{},{key:"".concat(t.key,"_").concat(r)}));n.push(o)}}));else if("user"===e.entity){var o=Dt()(e,t);n.push(o)}})),n})),lo(co(t),"createMessageElements",(function(){var e=t.parseMessages(),n=[],r=e;e.length>1&&(r=Object(Ae.sortBy)(e,(function(e){return new Date(e.systemTime)})));var o=t.findIndexFirstElementInLastResponse(r);r.forEach((function(e,t){var i,c=t===o,u=!1;t===r.length-1&&(u=!0),e.loading?n.push((i=e,a.a.createElement(vn,{key:"loading",entity:"bot",timestamp:i.systemTime,isLoading:i.loading}))):"user"===e.entity?n.push(function(e){return a.a.createElement(vn,{message:e.text,entity:e.entity,key:e.key,timestamp:e.systemTime,isLoading:!1})}(e)):"bot"===e.entity&&"text"===e.type?n.push(ho(e,u,c)):"bot"===e.entity&&"card"===e.type?n.push(function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return a.a.createElement(Vn,{data:e.card,timestamp:e.systemTime,key:e.key,className:t?"scrollIntoView":""})}(e,c)):"bot"===e.entity&&"payload"===e.type&&e.payload.mapPayload?n.push(function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return a.a.createElement(pr,{data:e.payload.mapPayload,timestamp:e.systemTime,key:e.key,className:t?"scrollIntoView":""})}(e,c)):"bot"===e.entity&&"payload"===e.type&&e.payload.feedback?n.push(function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return a.a.createElement(Zr,{feedbackData:e.payload.feedback,session:e.session,entity:e.entity,key:e.key,isLoading:!1,timestamp:e.systemTime,className:t?"scrollIntoView":""})}(e,c)):n.push(ho({text:["Something went wrong."]}))})),t.setState((function(e){return no(no({},e),{},{messageElements:n})}),(function(){document.getElementsByClassName("scrollIntoView")[0]&&setTimeout((function(){return document.getElementsByClassName("scrollIntoView")[0].scrollIntoView(!1)}),0)}))})),lo(co(t),"handleWheel",(function(e){e.deltaY&&(e.preventDefault(),e.currentTarget.scrollTop-=parseFloat(getComputedStyle(e.currentTarget).getPropertyValue("font-size"))*(e.deltaY<0?-1:1)*2)})),t.componentRef=a.a.createRef(),t}return t=i,(n=[{key:"componentDidUpdate",value:function(){var e=this.parseMessages();Lt()(this.messages,e)||(this.messages=e,this.createMessageElements()),this.componentRef.current&&this.componentRef.current.addEventListener("wheel",this.handleWheel)}},{key:"render",value:function(){var e=this.state.messageElements;return a.a.createElement(mo,{ref:this.componentRef},a.a.createElement(go,{elevation:1,square:!0},e))}}])&&ro(t.prototype,n),r&&ro(t,r),i}(i.PureComponent),jo=Object(r.connect)((function(e){return{messages:e.conversation.messages,buttonBarVisible:e.buttonBar.visible,error:e.error}}))(vo),Oo=n(57),wo=n.n(Oo);function Mo(e){return{type:"SAVE_USER_INPUT",userInput:{value:e,charLength:e.length||0,maxExceeded:e.length>255}}}function Eo(e){return(Eo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function xo(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function To(e,t){return(To=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function So(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Do(e);if(t){var o=Do(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Lo(this,n)}}function Lo(e,t){return!t||"object"!==Eo(t)&&"function"!=typeof t?No(e):t}function No(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Do(e){return(Do=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Io(){var e=ko(["\n  && {\n    padding-right: 15px;\n    &:hover {\n      background: transparent;\n    }\n  }\n"]);return Io=function(){return e},e}function Po(){var e=ko(["\n  && {\n    padding: 5px 15px;\n    padding-bottom: ",";\n    /*All properties below are specified to combat WordPress*/\n    \n    textarea {\n      border: none;\n      width: 100%;\n      outline: none;\n      color: #000;\n      height: 100%;\n      padding: 0;\n      font-size: 14px;\n    }\n  }\n"]);return Po=function(){return e},e}function Co(){var e=ko(["\n  grid-area: userinput;\n  background: #fefefe;\n  display: flex;\n  display: ",";\n  flex-flow: row nowrap;\n  justify-content: center;\n  align-items: center;\n  border-top: 1px solid rgba(0, 0, 0, 0.2);\n  z-index: 4;\n  border-bottom-left-radius: 4px;\n  border-bottom-right-radius: 4px;\n"]);return Co=function(){return e},e}function ko(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var _o=u.a.div(Co(),(function(e){return e.visible?"none":"flex"})),Ro=u()(wr.a)(Po(),(function(e){return null!==e.helperText&&"16px"})),zo=u()(Ie.a)(Io()),Ao=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&To(e,t)}(i,e);var t,n,r,o=So(i);function i(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(e=o.call(this)).handleKeyPress=e.handleKeyPress.bind(No(e)),e}return t=i,(n=[{key:"handleKeyPress",value:function(e){13===e.charCode&&(this.props.submitUserInput(),e.preventDefault())}},{key:"render",value:function(){var e=this.props,t=e.saveUserInput,n=e.inputValue,r=e.shouldDisable,o=n.value,i="".concat(n.charLength,"/255"),c=n.maxExceeded,u=null;return u=c?"Exceeded character limit: ".concat(i):null,a.a.createElement(_o,{visible:r},a.a.createElement(Ro,{multiline:!0,rowsMax:"4",fullWidth:!0,InputProps:{disableUnderline:!0},placeholder:"Send a message",helperText:u,FormHelperTextProps:{style:{color:"#cd5c5c",margin:0}},onChange:t,value:o,onKeyPress:this.handleKeyPress}),a.a.createElement(zo,{onClick:this.props.submitUserInput,"aria-label":"Send",color:"primary",disabled:c,disableRipple:!0},a.a.createElement(wo.a,null)))}}])&&xo(t.prototype,n),r&&xo(t,r),i}(i.PureComponent),Uo=Object(r.connect)((function(e){return{inputValue:e.userInput,shouldDisable:e.conversation.disableInput}}),(function(e){return{saveUserInput:function(t){e(Mo(t.target.value))},submitUserInput:function(){e((function(e,t){var n=t().userInput,r=n.value.trim();r&&""!==r&&function(e){return!(e.length>256)}(n.value)&&(e(X(n.value)),e(Mo("")))}))}}}))(Ao),Yo=n(11),Vo=n.n(Yo);function Qo(e){return(Qo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Wo(e){return function(e){if(Array.isArray(e))return Bo(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||qo(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function qo(e,t){if(e){if("string"==typeof e)return Bo(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Bo(e,t):void 0}}function Bo(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Go(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ho(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Fo(e,t){return(Fo=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Jo(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Xo(e);if(t){var o=Xo(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Zo(this,n)}}function Zo(e,t){return!t||"object"!==Qo(t)&&"function"!=typeof t?Ko(e):t}function Ko(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Xo(e){return(Xo=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function $o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ei(){var e=ni(["\n  && {\n    margin-right: 8px;\n    margin-top: 8px;\n    padding-left: 5px;\n    padding-right: 5px;\n    display: ",";\n    background-color: ",";\n    color: ",";\n    border-radius: 10px;\n    font-size: 14px;\n    width: 100%\n    \n  }\n\n  :hover {\n    background-color: rgb(181,181,181) !important;\n  }\n"]);return ei=function(){return e},e}function ti(){var e=ni(["\n  grid-area: buttonbar;\n  display: flex;\n  flex-flow: row wrap;\n  justify-content: flex-start;\n  align-items: flex-start;\n  align-content: flex-start;\n  padding: ",";\n  background: ",";\n  border-top: ",";\n  overflow-y: auto;\n"]);return ti=function(){return e},e}function ni(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var ri=u.a.div(ti(),(function(e){return e.visible?"4px 8px 12px 16px":"0 16px"}),d.a[300],(function(e){return e.visible?"1px solid rgba(0, 0, 0, 0.2)":"none"})),oi=u()(ze.a)(ei(),(function(e){return"true"===e.visible?"block":"none"}),(function(e){return"true"===e.navigationbutton?"rgb(36,39,44)":"rgb(240,240,240)"}),(function(e){return"true"===e.navigationbutton?" white":"secondary"})),ii=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Fo(e,t)}(i,e);var t,n,r,o=Jo(i);function i(){var e;Go(this,i);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return $o(Ko(e=o.call.apply(o,[this].concat(n))),"minColumnSpan",(function(e){return e.length>=18?3:e.length>=13&&e.length<18?2:1})),$o(Ko(e),"arrangeSubjectMatterSuggestions",(function(e){return[[Object(Ae.find)(e,(function(e){return"child support"===e.label.toLowerCase()}))],[Object(Ae.find)(e,(function(e){return"snap"===e.label.toLowerCase()})),Object(Ae.find)(e,(function(e){return"tanf"===e.label.toLowerCase()}))],[Object(Ae.find)(e,(function(e){return"workforce development"===e.label.toLowerCase()}))]]})),$o(Ko(e),"playTetris",(function(e){var t=function(e,t){var n=Object(Ae.find)(t,(function(t){return t.minColumnSpan===e})),r=Object(Ae.filter)(t,(function(e){return!n||e.label!==n.label}));return{next:n,remainingButtons:r}};return Object(Ae.reduce)(e,(function(e,n){if(Object(Ae.findIndex)(e.remainingButtons,(function(e){return e.label===n.label}))>=0){var r=n,o=Object(Ae.filter)(e.remainingButtons,(function(e){return e.label!==r.label}));if(3===r.minColumnSpan)return{buttonRows:[].concat(Wo(e.buttonRows),[[r]]),remainingButtons:o};if(2===r.minColumnSpan){var i=t(2,o);o=i.remainingButtons,i.next||(o=(i=t(1,o)).remainingButtons);var a=i.next,c=Object(Ae.filter)([r,a],(function(e){return!!e}));return{buttonRows:[].concat(Wo(e.buttonRows),[c]),remainingButtons:o}}if(1===r.minColumnSpan){var u=t(1,o),l=u.next;if(o=u.remainingButtons,l){var s=t(1,o),f=s.next;o=s.remainingButtons;var p=Object(Ae.filter)([r,l,f],(function(e){return!!e}));return{buttonRows:[].concat(Wo(e.buttonRows),[p]),remainingButtons:o}}u.next||(l=(u=t(2,o)).next,o=u.remainingButtons);var y=Object(Ae.filter)([r,l],(function(e){return!!e}));return{buttonRows:[].concat(Wo(e.buttonRows),[y]),remainingButtons:o}}}return e}),{buttonRows:[],remainingButtons:e}).buttonRows})),e}return t=i,(n=[{key:"render",value:function(){var e=this.props,t=e.visible,n=e.messages,r=e.sendQuickReply,o=e.paginationPage,i=e.changeSuggestionPage,c=function(e){return Object(Ae.findLast)(e,(function(e){return Object(Ae.find)(e.responses,["type","suggestion"])}))}(n),u=[],l=null,s=!1;if(c){var f=c.responses.filter((function(e){return"suggestion"===e.type}))[0].suggestions,p=Object(Ae.filter)(f,(function(e){return"go back"!==e.toLowerCase()&&"home"!==e.toLowerCase()&&"start over"!==e.toLowerCase()}));4===p.length&&Object(Ae.find)(p,(function(e){return"child support"===e.toLowerCase()}))&&Object(Ae.find)(p,(function(e){return"tanf"===e.toLowerCase()}))&&Object(Ae.find)(p,(function(e){return"snap"===e.toLowerCase()}))&&Object(Ae.find)(p,(function(e){return"workforce development"===e.toLowerCase()}))&&(s=!0),l=Object(Ae.find)(f,(function(e){return"go back"===e.toLowerCase()}));var y,b=function(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=qo(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,c=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return a=e.done,e},e:function(e){c=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(c)throw i}}}}(p);try{for(b.s();!(y=b.n()).done;){var m=y.value,d=this.minColumnSpan(m);u.push({label:m,id:c.messageId,visible:t,minColumnSpan:d})}}catch(e){b.e(e)}finally{b.f()}}var g=s?this.arrangeSubjectMatterSuggestions(u):this.playTetris(u),h=Math.ceil(g.length/4),v=new Array(h).fill().map((function(){return g.splice(0,4)})),j=v[o-1]?v[o-1]:v[0];return(u.length>0||l)&&a.a.createElement(ri,{visible:t},a.a.createElement(Vo.a,{container:!0},u.length>0&&j.map((function(e,t){return a.a.createElement(Vo.a,{key:"buttonRow_".concat(t),container:!0,item:!0,spacing:8,xs:12},e.map((function(n,o){return a.a.createElement(Vo.a,{key:"buttonRow_".concat(t,"_").concat(o),item:!0,xs:12/e.length},a.a.createElement(oi,{size:"small",color:"secondary",key:"".concat(n.id,"-btn").concat(o),visible:n.visible.toString(),navigationbutton:"false",onClick:function(){return r(n.label.toUpperCase())}},n.label.toUpperCase()))})))})),a.a.createElement(Vo.a,{item:!0,container:!0,xs:12,justify:"space-between",spacing:8},l&&1===o&&a.a.createElement(Vo.a,{item:!0,xs:4},a.a.createElement(oi,{size:"small",color:"secondary",visible:"true",navigationbutton:"true",onClick:function(){return r(l.toUpperCase())}},l.toUpperCase())),h>1&&o>1&&a.a.createElement(Vo.a,{item:!0,xs:5},a.a.createElement(oi,{size:"small",color:"secondary",visible:"true",navigationbutton:"true",onClick:function(){return i(o-1)}},"Previous Options")),h>1&&o<h&&a.a.createElement(Vo.a,{item:!0,xs:5},a.a.createElement(oi,{size:"small",color:"secondary",visible:"true",navigationbutton:"true",onClick:function(){return i(o+1)}},"More Options")))))}}])&&Ho(t.prototype,n),r&&Ho(t,r),i}(i.PureComponent),ai=Object(r.connect)((function(e){return{visible:e.buttonBar.visible,messages:e.conversation.messages,paginationPage:e.buttonBar.paginationPage}}),(function(e){return{sendQuickReply:function(t){e($(t))},changeSuggestionPage:function(t){return e({type:"CHANGE_SUGGESTION_PAGE",paginationPage:t})}}}))(ii);function ci(e){return(ci="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ui(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function li(e,t){return(li=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function si(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=pi(e);if(t){var o=pi(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return fi(this,n)}}function fi(e,t){return!t||"object"!==ci(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function pi(e){return(pi=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function yi(){var e=hi(["\n  && {\n    width: 100%;\n    height: 100%;\n    transform-origin: bottom right;\n    pointer-events: auto;\n    background: ",";\n    display: grid;\n    grid-template-columns: 1fr;\n    grid-template-rows: 44px 1fr auto min-content;\n    grid-template-areas:\n      'header'\n      'chatwindow'\n      'buttonbar'\n      'userinput';\n    box-sizing: content-box;\n  }\n"]);return yi=function(){return e},e}function bi(){var e=hi(["\n    width: ",";\n    height: ",";\n    right: 10px;\n    max-width: none;\n    max-height: none;\n  "]);return bi=function(){return e},e}function mi(){var e=hi(["\n      width: 0;\n      height: 0;\n    "]);return mi=function(){return e},e}function di(){var e=hi(["\n        width: calc(100% - 96px);\n        height: calc(100% - 96px);\n      "]);return di=function(){return e},e}function gi(){var e=hi(["\n  && {\n    width: 400px;\n    height: 70vh;\n    max-height: 600px;\n    overflow: hidden;\n    position: absolute;\n    bottom: 48px;\n    right: 48px;\n    transition: width 120ms ease-in-out, height 150ms ease-in-out;\n    pointer-events: none;\n\n    ",";\n    \n    ",";\n\n    ",";\n  }\n"]);return gi=function(){return e},e}function hi(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var vi=u()(Oe.a)(gi(),(function(e){return e.fullscreen&&Object(c.css)(di())}),(function(e){return!e.visible&&Object(c.css)(mi())}),$r.phone(bi(),(function(e){return e.visible?"calc(100% - 20px)":"0"}),(function(e){return e.visible?"calc(100% - 96px)":"0"}))),ji=u.a.div(yi(),d.a[100]),Oi=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&li(e,t)}(i,e);var t,n,r,o=si(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=o.call(this,e)).containerRef=a.a.createRef(),t}return t=i,(n=[{key:"render",value:function(){var e=this.props,t=e.windowVisible,n=e.fullscreen;return a.a.createElement(vi,{elevation:4,fullscreen:n?1:0,visible:t?1:0},a.a.createElement(ji,{ref:this.containerRef,className:"mui-fixed"},a.a.createElement(ot,null),a.a.createElement(Tt,{parentRef:this.containerRef.current}),a.a.createElement(jo,null),a.a.createElement(ai,null),a.a.createElement(Uo,null)))}}])&&ui(t.prototype,n),r&&ui(t,r),i}(i.PureComponent),wi=Object(r.connect)((function(e){return{windowVisible:e.config.windowVisible,fullscreen:e.config.fullscreen}}))(Oi);function Mi(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ei(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Mi(Object(n),!0).forEach((function(t){xi(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Mi(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function xi(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Ti={avatar:null,title:"Chat Window",windowVisible:!1,fullscreen:!1,privacyPolicyVisible:!1,googleMapsKey:"",centerCoordinates:"",activationText:"",privacyPolicy:"Please do not enter any personally identifiable information such as SSN, Date of Birth, Case Number or last name.",feedbackUrl:""};var Si=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ti,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"HIDE_PRIVACY_POLICY":return Ei(Ei({},e),{},{privacyPolicyVisible:!1});case"SHOW_PRIVACY_POLICY":return Ei(Ei({},e),{},{privacyPolicyVisible:!0});case"SET_PRIVACY_POLICY":return Ei(Ei({},e),{},{privacyPolicy:t.policyText});case"SET_GOOGLE_MAPS_KEY":return Ei(Ei({},e),{},{googleMapsKey:t.googleMapsKey});case"SET_CENTER_COORDINATES":return Ei(Ei({},e),{},{centerCoordinates:t.centerCoordinates});case"SET_ACTIVATION_TEXT":return Ei(Ei({},e),{},{activationText:t.activationText});case"SET_AVATAR":return Ei(Ei({},e),{},{avatar:t.avatar});case"SET_TITLE":return Ei(Ei({},e),{},{title:t.title});case"SHOW_WINDOW":return Ei(Ei({},e),{},{windowVisible:!0});case"HIDE_WINDOW":return Ei(Ei({},e),{},{windowVisible:!1});case"FULLSCREEN":return Ei(Ei({},e),{},{fullscreen:!0});case"WINDOWED":return Ei(Ei({},e),{},{fullscreen:!1});case"SET_FEEDBACK_URL":return Ei(Ei({},e),{},{feedbackUrl:t.feedbackUrl});default:return e}};function Li(e){return function(e){if(Array.isArray(e))return Ni(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return Ni(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ni(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ni(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Di(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ii(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Di(Object(n),!0).forEach((function(t){Pi(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Di(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Pi(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Ci={client:null,clientName:null,messages:[],webhookPayload:null,disableInput:!1,lastUpdateTime:Object(I.format)(new Date,P),currentTime:Object(I.format)(new Date,P),headerTime:"Now",timer:null,conversationStarted:!1};var ki=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ci,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SAVE_CLIENT":return Ii(Ii({},e),{},{client:t.client,clientName:t.clientName});case"UPDATE_CURRENT_TIME":return Ii(Ii({},e),{},{headerTime:t.headerTime,currentTime:t.currentTime});case"TIMER_START":return Ii(Ii({},e),{},{timer:t.timer});case"INITIATE_LOADING":return Ii(Ii({},e),{},{messages:[].concat(Li(e.messages),[{loading:!0,entity:"bot",systemTime:Object(I.format)(new Date,P)}])});case"SAVE_RESPONSE":return Ii(Ii({},e),{},{lastUpdateTime:Object(I.format)(new Date,P),headerTime:"Now",messages:t.newConversationArray});case"SAVE_USER_RESPONSE":return Ii(Ii({},e),{},{lastUpdateTime:Object(I.format)(new Date,P),headerTime:"Now",messages:[].concat(Li(e.messages),[Ii(Ii({},t.response),{},{key:Object(C.v4)()})]).sort((function(e,t){var n=Object(I.parse)(e.systemTime,P,new Date(e.systemTime)),r=Object(I.parse)(t.systemTime,P,new Date(t.systemTime));return Object(I.differenceInMilliseconds)(r,n)}))});case"RECEIVE_WEBHOOK_DATA":return Ii(Ii({},e),{},{webhookPayload:t.payload});case"ENABLE_INPUT":return Ii(Ii({},e),{},{disableInput:!1});case"DISABLE_INPUT":return Ii(Ii({},e),{},{disableInput:!0});case"SET_CONVERSATION_STARTED":return Ii(Ii({},e),{},{conversationStarted:!0});case"SET_CONVERSATION_ENDED":return Ii(Ii({},e),{},{conversationStarted:!1});case"SET_OUTPUT_CONTEXTS":return Ii(Ii({},e),{},{outputContexts:t.rawOutputContexts});default:return e}};function _i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ri(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_i(Object(n),!0).forEach((function(t){zi(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function zi(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Ai={visible:!1,buttons:[]};var Ui=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ai,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SHOW_BUTTON_BAR":return Ri(Ri({},e),{},{visible:!0});case"HIDE_BUTTON_BAR":return Ri(Ri({},e),{},{visible:!1});case"INITIATE_LOADING":case"SAVE_RESPONSE":case"SAVE_USER_RESPONSE":return Ri(Ri({},e),{},{paginationPage:1});case"CHANGE_SUGGESTION_PAGE":return Ri(Ri({},e),{},{paginationPage:t.paginationPage});default:return e}},Yi={value:"",charLength:0,maxExceeded:!1};var Vi=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Yi,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SAVE_USER_INPUT":return t.userInput;default:return e}};function Qi(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Wi(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Qi(Object(n),!0).forEach((function(t){qi(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Qi(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function qi(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Bi={submitted:!1,wasHelpful:null,feedbackList:null};var Gi=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Bi,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SAVE_FEEDBACK_INPUT":return Wi(Wi({},e),{},{feedbackList:e.feedbackList.map((function(e){return e.value===t.value.value?Wi(Wi({},e),{},{checked:t.value.checked}):e}))});case"SET_FEEDBACK_OPTIONS":return Wi(Wi({},e),{},{wasHelpful:t.value.helpful,feedbackList:t.value.options.map((function(e){return Wi(Wi({},e),{},{checked:!1})}))});case"SET_FEEDBACK_SUBMITTED":return Wi(Wi({},e),{},{submitted:!0});default:return e}};var Hi=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"DISPLAY_ERROR":return t.error;case"CLEAR_ERROR":return"";default:return e}},Fi=Object(o.combineReducers)({config:Si,conversation:ki,buttonBar:Ui,userInput:Vi,feedbackInput:Gi,error:Hi});function Ji(e){return(Ji="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Zi(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ki(e,t){return(Ki=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Xi(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=ea(e);if(t){var o=ea(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return $i(this,n)}}function $i(e,t){return!t||"object"!==Ji(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ea(e){return(ea=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ta(){var e=function(e,t){t||(t=e.slice(0));return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}(["\n  width: 100%;\n  height: 100%;\n  pointer-events: none;\n  position: fixed;\n  top: 0;\n  left: 0;\n  z-index: 999999;\n  display: flex;\n  flex-flow: column nowrap;\n  justify-content: center;\n  align-items: center;\n  align-content: center;\n  box-sizing: border-box;\n  font-family: 'Roboto', sans-serif;\n  line-height: normal; /*For WordPress*/\n  & > * {\n    box-sizing: border-box;\n    font-family: 'Roboto', sans-serif;\n\n    & ::-webkit-scrollbar-thumb {\n      background-color: ",";\n      -webkit-border-radius: 8px;\n      border-radius: 8px;\n      border: 2px solid ",";\n    }\n    & ::-webkit-scrollbar {\n      background-color: ",";\n      width: 8px;\n    }\n  }\n"]);return ta=function(){return e},e}s.a.load({google:{families:["Roboto:300,400,500","Product Sans:400"]}});var na=u.a.div(ta(),d.a[600],d.a[100],d.a[100]),ra=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||o.compose,oa=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ki(e,t)}(u,e);var t,n,i,c=Xi(u);function u(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),(t=c.call(this,e)).store=Object(o.createStore)(Fi,ra(Object(o.applyMiddleware)(b.a))),t.currentValue=null,t.theme=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"lightBlue",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"pink",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"lightBlue",r={palette:{error:h.red,contrastThreshold:3,tonalOffset:.2},typography:{useNextVariants:!0},overrides:{MuiFab:{root:{position:"absolute",bottom:48,right:48}}}};if(j()(e))r.palette.primary={main:e};else{if(!h[e])throw new Error("".concat(e," is not a valid color. Use a color name from https://material.io/guidelines/style/color.html#color-color-palette"));r.palette.primary=h[e]}if(j()(t))r.palette.secondary={main:t};else{if(!t||!h[t])throw new Error("".concat(t," is not a valid color. \n      Use a color name from https://material.io/guidelines/style/color.html#color-color-palette"));r.palette.secondary=h[t]}if(j()(n))r.palette.header={main:n};else{if(!h[n])throw new Error("".concat(n," is not a valid color. Use a color name from https://material.io/guidelines/style/color.html#color-color-palette"));r.palette.header=h[n]}return Object(g.createMuiTheme)(r)}(t.props.primaryColor,t.props.secondaryColor,t.props.headerColor),t}return t=u,(n=[{key:"componentDidMount",value:function(){var e=this;this.store.dispatch(re(this.props,this.theme)),this.unsubscribe=this.store.subscribe((function(){return e.handleChange(e.store)}))}},{key:"componentWillUnmount",value:function(){this.unsubscribe()}},{key:"select",value:function(e){return e.conversation.webhookPayload}},{key:"handleChange",value:function(e){var t=this.currentValue;this.currentValue=this.select(e.getState()),t!==this.currentValue&&this.props.onPayload&&this.props.onPayload(this.currentValue)}},{key:"render",value:function(){return a.a.createElement(r.Provider,{store:this.store},a.a.createElement(p.a,{theme:this.theme},a.a.createElement(na,null,a.a.createElement(wi,null),a.a.createElement(ve,null))))}}])&&Zi(t.prototype,n),i&&Zi(t,i),u}(i.PureComponent);t.default=oa}])}));
//# sourceMappingURL=chatframe.js.map