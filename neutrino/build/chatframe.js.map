{"version":3,"sources":["webpack://[name]/webpack/universalModuleDefinition","webpack://[name]/webpack/bootstrap","webpack://[name]/external \"react\"","webpack://[name]/external \"styled-components\"","webpack://[name]/external \"date-fns\"","webpack://[name]/external \"lodash\"","webpack://[name]/external \"react-redux\"","webpack://[name]/external \"lodash/get\"","webpack://[name]/external \"@material-ui/core/Typography\"","webpack://[name]/external \"@material-ui/core/colors/grey\"","webpack://[name]/external \"@material-ui/core/styles\"","webpack://[name]/external \"@material-ui/core/Button\"","webpack://[name]/external \"@material-ui/core/colors\"","webpack://[name]/external \"@material-ui/core/Grid\"","webpack://[name]/external \"@material-ui/core/CardContent\"","webpack://[name]/external \"uuid\"","webpack://[name]/external \"@material-ui/core/Link\"","webpack://[name]/external \"@material-ui/core/Card\"","webpack://[name]/external \"redux\"","webpack://[name]/external \"react-google-maps\"","webpack://[name]/external \"markdown-to-jsx\"","webpack://[name]/external \"@material-ui/core/Avatar\"","webpack://[name]/external \"@material-ui/core/IconButton\"","webpack://[name]/external \"@material-ui/core/CardActions\"","webpack://[name]/external \"@material-ui/core/TextField\"","webpack://[name]/external \"validator/lib/isHexColor\"","webpack://[name]/external \"lodash/merge\"","webpack://[name]/external \"@material-ui/core/Tooltip\"","webpack://[name]/external \"@material-ui/core/TableCell\"","webpack://[name]/external \"webfontloader\"","webpack://[name]/external \"@material-ui/core/styles/MuiThemeProvider\"","webpack://[name]/external \"redux-thunk\"","webpack://[name]/external \"@material-ui/core/Fab\"","webpack://[name]/external \"@material-ui/icons/Chat\"","webpack://[name]/external \"@material-ui/core/Zoom\"","webpack://[name]/external \"lodash/find\"","webpack://[name]/external \"lodash/omit\"","webpack://[name]/external \"@material-ui/core/Paper\"","webpack://[name]/external \"@material-ui/icons/Fullscreen\"","webpack://[name]/external \"@material-ui/icons/FullscreenExit\"","webpack://[name]/external \"@material-ui/icons/Info\"","webpack://[name]/external \"@material-ui/icons/Close\"","webpack://[name]/external \"@material-ui/core/DialogTitle\"","webpack://[name]/external \"@material-ui/core/Dialog\"","webpack://[name]/external \"@material-ui/core/DialogActions\"","webpack://[name]/external \"@material-ui/core/DialogContent\"","webpack://[name]/external \"@material-ui/core/DialogContentText\"","webpack://[name]/external \"lodash/isEqual\"","webpack://[name]/external \"@material-ui/core/colors/green\"","webpack://[name]/external \"@material-ui/core/CardMedia\"","webpack://[name]/external \"@material-ui/core/CardHeader\"","webpack://[name]/external \"@material-ui/core/Table\"","webpack://[name]/external \"@material-ui/core/TableBody\"","webpack://[name]/external \"@material-ui/core/TableRow\"","webpack://[name]/external \"@material-ui/core/FormControl\"","webpack://[name]/external \"@material-ui/core/FormGroup\"","webpack://[name]/external \"@material-ui/core/FormControlLabel\"","webpack://[name]/external \"@material-ui/core/Checkbox\"","webpack://[name]/external \"lodash/every\"","webpack://[name]/external \"@material-ui/icons/Send\"","webpack://[name]/external \"whatwg-fetch\"","webpack://[name]/./src/components/chatframe/config/dateFormats.js","webpack://[name]/./src/components/chatframe/conversationClient.js","webpack://[name]/./src/components/chatframe/actions/dialogflow.js","webpack://[name]/./src/components/chatframe/actions/actionTypes.js","webpack://[name]/./src/components/chatframe/actions/conversation.js","webpack://[name]/./src/components/chatframe/actions/initialization.js","webpack://[name]/./src/components/chatframe/genbot_avatar.svg","webpack://[name]/./src/components/chatframe/ActivatorButton.jsx","webpack://[name]/./src/components/chatframe/Header.jsx","webpack://[name]/./src/components/chatframe/PrivacyPolicy.jsx","webpack://[name]/./src/components/chatframe/Loading.jsx","webpack://[name]/./src/components/chatframe/Message.jsx","webpack://[name]/./src/components/chatframe/CardResponse.jsx","webpack://[name]/./src/components/chatframe/MapResponse.jsx","webpack://[name]/./src/components/chatframe/pin.svg","webpack://[name]/./src/components/chatframe/person-pin.svg","webpack://[name]/./src/components/chatframe/FeedbackInput.jsx","webpack://[name]/./src/components/chatframe/actions/feedbackInput.js","webpack://[name]/./src/components/chatframe/FeedbackResponse.jsx","webpack://[name]/./src/components/chatframe/styles/media.js","webpack://[name]/./src/components/chatframe/ChatWindow.jsx","webpack://[name]/./src/components/chatframe/actions/userInput.js","webpack://[name]/./src/components/chatframe/UserInput.jsx","webpack://[name]/./src/components/chatframe/ButtonBar.jsx","webpack://[name]/./src/components/chatframe/ChatContainer.jsx","webpack://[name]/./src/components/chatframe/reducers/configReducer.js","webpack://[name]/./src/components/chatframe/reducers/conversationReducer.js","webpack://[name]/./src/components/chatframe/reducers/buttonBarReducer.js","webpack://[name]/./src/components/chatframe/reducers/userInputReducer.js","webpack://[name]/./src/components/chatframe/reducers/feedbackInputReducer.js","webpack://[name]/./src/components/chatframe/reducers/errorReducer.js","webpack://[name]/./src/components/chatframe/reducers/rootReducer.js","webpack://[name]/./src/components/chatframe/ChatFrame.jsx","webpack://[name]/./src/components/chatframe/createTheme.jsx","webpack://[name]/./src/components/chatframe/index.js"],"names":["root","factory","exports","module","define","amd","window","installedModules","__webpack_require__","moduleId","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","require","sysTimeFormat","fetchIntent","url","fetch","then","req","json","e","console","error","Client","options","data","params","push","encodeURIComponent","join","query","Error","uuid","queryParams","encodeQueryData","textUrl","eventUrl","this","uuidv4","getMessageFromDialogflow","response","dispatch","rawOutputContexts","type","responses","rawResponses","unfilteredResponses","containsDisablePayload","map","msg","mapMessageTypeToDescriptor","message","suggestions","text","card","title","subtitle","imageUrl","buttons","image","imageUri","accessibilityText","payload","rawPayload","entries","field","kind","JSON","parse","stringValue","err","keys","length","modifiedPayload","omit","log","filter","systemTime","format","Date","entity","loading","messageId","responseId","messageSession","session","language","queryResult","languageCode","getState","messages","conversation","find","newConversationArray","sort","a","b","dateA","dateB","differenceInMilliseconds","saveResponse","constructEmptyResponse","fulfillmentMessages","platform","fulfillmentText","sendToDialogflow","client","requestFunction","response1","webhookStatus","code","response2","_response2","response3","_response3","sendDialogflowRequest","catch","sendEvent","event","setupClient","clientOptions","toLowerCase","clientName","setupDialogflow","sendMessage","sendMessageWithDialogflow","createUserResponse","numMessages","sendQuickReply","showWindow","conversationStarted","updateIdleTime","lastUpdateTime","now","lastUpdate","diffMinutes","differenceInMinutes","diffSeconds","differenceInSeconds","headerTime","currentTime","initialize","props","avatar","initialActive","fullscreen","policyText","mapConfig","activationText","feedbackUrl","userAvatar","timer","clearInterval","newTimer","setInterval","googleMapsKey","centerCoordinates","latitude","longitude","Btn","styled","Fab","active","activationtext","TextContainer","div","theme","palette","getContrastText","primary","dark","BotAvatar","Avatar","ActivatorButton","windowVisible","contentToDisplay","alt","src","in","unmountOnExit","color","onClick","PureComponent","withTheme","connect","state","config","Container","header","main","HeaderText","Typography","HeaderButton","IconButton","StartOverButton","Button","Header","hideWindow","showWindowed","showFullscreen","showPrivacyPolicy","lastMessageWithSuggestions","findLast","startOverButtonLabel","x","variant","placement","aria-label","fontSize","StyledDialog","Dialog","PrivacyPolicy","hidePrivacyPolicy","privacyPolicyVisible","privacyPolicy","parentRef","open","onClose","aria-labelledby","container","scroll","mapDispatchToProps","Dot","green","Loading","ChatBubble","ExternalMessage","grey","UserMessage","Timestamp","markdownOptions","forceBlock","overrides","h6","component","Link","Message","isResponseDelayed","isLoading","loadingTimer","setTimeout","setState","clearTimeout","filteredBotMessage","timestamp","showTimestamp","className","parsedTimestamp","isToday","isSameDay","isYesterday","subDays","formattedTimestamp","elevation","Component","CardContainer","Card","CardImage","CardMedia","CardResponse","encodeURI","gutterBottom","index","cardKey","href","postback","target","size","inputValue","userInput","TableContainer","StyledCardContent","CardContent","StyledTableBody","TableBody","StyledAddressTableCell","TableCell","StyledDistanceTableCell","iconSize","width","height","googleMapsUrl","Map","withScriptjs","withGoogleMap","defaultZoom","defaultCenter","nearestLocations","defaultOptions","zoomControl","mapTypeControl","streetViewControl","fullscreenControl","locations","row","position","lat","lng","icon","scaledSize","placeId","currentGeocode","titleTypographyProps","googleMapURL","loadingElement","style","containerElement","mapElement","padding","street","city","distance","FeedbackInputLabel","FeedbackInput","isSubmitted","feedbackComment","feedbackInputs","saveFeedbackInput","sendFeedback","outputContexts","wasHelpful","feedbackList","choice","control","checked","onChange","inputItem","label","placeholder","multiline","newValue","prevState","InputProps","classes","inputMultiline","list","item","comment","method","body","stringify","headers","disabled","every","withStyles","overflowY","feedbackInput","FeedbackResponse","setFeedbackOptions","feedbackData","sizes","giant","desktop","tablet","phone","media","reduce","accumulator","emSize","css","ContentWrapper","Content","buildBotTextMessage","shouldScrollIntoView","ChatWindow","React","createRef","messageElements","indexFound","forEachRight","mIndex","messageData","forEach","metadata","loadingMessage","merge","res","botMessage","userMessage","newMessages","parseMessages","msgElements","sortedNewMessages","sortBy","indexFirstElementInLastResponse","findIndexFirstElementInLastResponse","buildUserMessage","buildBotCardMessage","mapPayload","buildBotMapMessage","feedback","buildFeedbackResponse","document","getElementsByClassName","scrollIntoView","deltaY","preventDefault","currentTarget","scrollTop","parseFloat","getComputedStyle","getPropertyValue","componentRef","isEqual","createMessageElements","current","addEventListener","handleWheel","ref","square","buttonBarVisible","buttonBar","visible","saveUserInput","charLength","maxExceeded","OuterFrame","TextInput","TextField","helperText","Icon","UserInput","handleKeyPress","charCode","submitUserInput","shouldDisable","inputValues","charLimit","helperTextValue","rowsMax","fullWidth","disableUnderline","FormHelperTextProps","margin","onKeyPress","disableRipple","disableInput","trimmedValue","trim","validateCharacterLimit","navigationbutton","ButtonBar","suggestion","suggestionElements","findNextInCollection","reqColumnSpan","currentCollection","next","minColumnSpan","remainingButtons","results","currentButton","findIndex","btn1","_remainingButtons","buttonRows","nextInCollectionResult","btn2","buttonRow","nextInCollectionResult2","btn3","paginationPage","changeSuggestionPage","findLastMessageWithSuggestions","backButtonLabel","isSelectingSubjectMatter","excludedBackAndStartOver","id","arrangeSubjectMatterSuggestions","playTetris","numberOfNavigationPages","Math","ceil","paginationPages","Array","fill","splice","activeSuggestionPage","btns","spacing","xs","btn","toString","toUpperCase","justify","newPage","Paper","ChatContainer","containerRef","initialState","action","webhookPayload","submitted","helpful","rootReducer","combineReducers","WebFont","load","google","families","OuterContainer","composeEnhancer","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","compose","ChatFrame","store","createStore","applyMiddleware","thunkMiddleware","currentValue","primaryColor","secondaryColor","headerColor","newTheme","colors","contrastThreshold","tonalOffset","typography","useNextVariants","MuiFab","bottom","right","isHexColor","secondary","createMuiTheme","createTheme","unsubscribe","subscribe","handleChange","previousValue","select","onPayload"],"mappings":"CAAA,SAA2CA,EAAMC,GAC1B,iBAAZC,SAA0C,iBAAXC,OACxCA,OAAOD,QAAUD,IACQ,mBAAXG,QAAyBA,OAAOC,IAC9CD,OAAO,YAAa,GAAIH,GACE,iBAAZC,QACdA,QAAmB,UAAID,IAEvBD,EAAgB,UAAIC,IARtB,CASGK,QAAQ,WACX,O,YCTE,IAAIC,EAAmB,GAGvB,SAASC,EAAoBC,GAG5B,GAAGF,EAAiBE,GACnB,OAAOF,EAAiBE,GAAUP,QAGnC,IAAIC,EAASI,EAAiBE,GAAY,CACzCC,EAAGD,EACHE,GAAG,EACHT,QAAS,IAUV,OANAU,EAAQH,GAAUI,KAAKV,EAAOD,QAASC,EAAQA,EAAOD,QAASM,GAG/DL,EAAOQ,GAAI,EAGJR,EAAOD,QA0Df,OArDAM,EAAoBM,EAAIF,EAGxBJ,EAAoBO,EAAIR,EAGxBC,EAAoBQ,EAAI,SAASd,EAASe,EAAMC,GAC3CV,EAAoBW,EAAEjB,EAASe,IAClCG,OAAOC,eAAenB,EAASe,EAAM,CAAEK,YAAY,EAAMC,IAAKL,KAKhEV,EAAoBgB,EAAI,SAAStB,GACX,oBAAXuB,QAA0BA,OAAOC,aAC1CN,OAAOC,eAAenB,EAASuB,OAAOC,YAAa,CAAEC,MAAO,WAE7DP,OAAOC,eAAenB,EAAS,aAAc,CAAEyB,OAAO,KAQvDnB,EAAoBoB,EAAI,SAASD,EAAOE,GAEvC,GADU,EAAPA,IAAUF,EAAQnB,EAAoBmB,IAC/B,EAAPE,EAAU,OAAOF,EACpB,GAAW,EAAPE,GAA8B,iBAAVF,GAAsBA,GAASA,EAAMG,WAAY,OAAOH,EAChF,IAAII,EAAKX,OAAOY,OAAO,MAGvB,GAFAxB,EAAoBgB,EAAEO,GACtBX,OAAOC,eAAeU,EAAI,UAAW,CAAET,YAAY,EAAMK,MAAOA,IACtD,EAAPE,GAA4B,iBAATF,EAAmB,IAAI,IAAIM,KAAON,EAAOnB,EAAoBQ,EAAEe,EAAIE,EAAK,SAASA,GAAO,OAAON,EAAMM,IAAQC,KAAK,KAAMD,IAC9I,OAAOF,GAIRvB,EAAoB2B,EAAI,SAAShC,GAChC,IAAIe,EAASf,GAAUA,EAAO2B,WAC7B,WAAwB,OAAO3B,EAAgB,SAC/C,WAA8B,OAAOA,GAEtC,OADAK,EAAoBQ,EAAEE,EAAQ,IAAKA,GAC5BA,GAIRV,EAAoBW,EAAI,SAASiB,EAAQC,GAAY,OAAOjB,OAAOkB,UAAUC,eAAe1B,KAAKuB,EAAQC,IAGzG7B,EAAoBgC,EAAI,IAIjBhC,EAAoBA,EAAoBiC,EAAI,I,gBClFrDtC,EAAOD,QAAUwC,QAAQ,U,cCAzBvC,EAAOD,QAAUwC,QAAQ,sB,cCAzBvC,EAAOD,QAAUwC,QAAQ,a,cCAzBvC,EAAOD,QAAUwC,QAAQ,W,cCAzBvC,EAAOD,QAAUwC,QAAQ,gB,cCAzBvC,EAAOD,QAAUwC,QAAQ,e,cCAzBvC,EAAOD,QAAUwC,QAAQ,iC,cCAzBvC,EAAOD,QAAUwC,QAAQ,kC,cCAzBvC,EAAOD,QAAUwC,QAAQ,6B,cCAzBvC,EAAOD,QAAUwC,QAAQ,6B,cCAzBvC,EAAOD,QAAUwC,QAAQ,6B,cCAzBvC,EAAOD,QAAUwC,QAAQ,2B,cCAzBvC,EAAOD,QAAUwC,QAAQ,kC,cCAzBvC,EAAOD,QAAUwC,QAAQ,S,cCAzBvC,EAAOD,QAAUwC,QAAQ,2B,cCAzBvC,EAAOD,QAAUwC,QAAQ,2B,cCAzBvC,EAAOD,QAAUwC,QAAQ,U,cCAzBvC,EAAOD,QAAUwC,QAAQ,sB,cCAzBvC,EAAOD,QAAUwC,QAAQ,oB,cCAzBvC,EAAOD,QAAUwC,QAAQ,6B,cCAzBvC,EAAOD,QAAUwC,QAAQ,iC,cCAzBvC,EAAOD,QAAUwC,QAAQ,kC,cCAzBvC,EAAOD,QAAUwC,QAAQ,gC,cCAzBvC,EAAOD,QAAUwC,QAAQ,6B,cCAzBvC,EAAOD,QAAUwC,QAAQ,iB,cCAzBvC,EAAOD,QAAUwC,QAAQ,8B,cCAzBvC,EAAOD,QAAUwC,QAAQ,gC,cCAzBvC,EAAOD,QAAUwC,QAAQ,kB,cCAzBvC,EAAOD,QAAUwC,QAAQ,8C,cCAzBvC,EAAOD,QAAUwC,QAAQ,gB,cCAzBvC,EAAOD,QAAUwC,QAAQ,0B,cCAzBvC,EAAOD,QAAUwC,QAAQ,4B,cCAzBvC,EAAOD,QAAUwC,QAAQ,2B,cCAzBvC,EAAOD,QAAUwC,QAAQ,gB,cCAzBvC,EAAOD,QAAUwC,QAAQ,gB,cCAzBvC,EAAOD,QAAUwC,QAAQ,4B,cCAzBvC,EAAOD,QAAUwC,QAAQ,kC,cCAzBvC,EAAOD,QAAUwC,QAAQ,sC,cCAzBvC,EAAOD,QAAUwC,QAAQ,4B,cCAzBvC,EAAOD,QAAUwC,QAAQ,6B,cCAzBvC,EAAOD,QAAUwC,QAAQ,kC,cCAzBvC,EAAOD,QAAUwC,QAAQ,6B,cCAzBvC,EAAOD,QAAUwC,QAAQ,oC,cCAzBvC,EAAOD,QAAUwC,QAAQ,oC,cCAzBvC,EAAOD,QAAUwC,QAAQ,wC,cCAzBvC,EAAOD,QAAUwC,QAAQ,mB,cCAzBvC,EAAOD,QAAUwC,QAAQ,mC,cCAzBvC,EAAOD,QAAUwC,QAAQ,gC,cCAzBvC,EAAOD,QAAUwC,QAAQ,iC,cCAzBvC,EAAOD,QAAUwC,QAAQ,4B,cCAzBvC,EAAOD,QAAUwC,QAAQ,gC,cCAzBvC,EAAOD,QAAUwC,QAAQ,+B,cCAzBvC,EAAOD,QAAUwC,QAAQ,kC,cCAzBvC,EAAOD,QAAUwC,QAAQ,gC,cCAzBvC,EAAOD,QAAUwC,QAAQ,uC,cCAzBvC,EAAOD,QAAUwC,QAAQ,+B,cCAzBvC,EAAOD,QAAUwC,QAAQ,iB,cCAzBvC,EAAOD,QAAUwC,QAAQ,4B,+CCAzBvC,EAAOD,QAAUwC,QAAQ,iB,iSCAZC,EAAgB,4B,kKCK7B,SAASC,EAAYC,GACnB,IAGE,OAAOC,MAAMD,GAAKE,MAAK,SAAAC,GAAG,OAAIA,EAAIC,UAClC,MAAOC,GAEP,OADAC,QAAQC,MAAMF,GACP,IAIJ,IAAMG,EACX,WAAYC,GAAS,WACnB,G,4FADmB,mCAWH,SAACC,GACjB,IAAMC,EAAS,GACf,IAAK,IAAMxC,KAAKuC,EACdC,EAAOC,KAAP,UAAeC,mBAAmB1C,GAAlC,YAAwC0C,mBAAmBH,EAAKvC,MAElE,OAAOwC,EAAOG,KAAK,QAhBA,sBAmBP,SAACC,GACb,IAAKA,EACH,MAAM,IAAIC,MAAM,6BAElB,IAAML,EAAS,CACbI,QACAE,KAAM,EAAKA,MAGPC,EAAc,EAAKC,gBAAgBR,GAEzC,OAAOZ,EADK,GAAH,OAAM,EAAKqB,QAAX,YAAsBF,OA7BZ,uBAiCN,SAACH,GACd,IAAKA,EACH,MAAM,IAAIC,MAAM,6BAGlB,IAAML,EAAS,CACbI,QACAE,KAAM,EAAKA,MAGPC,EAAc,EAAKC,gBAAgBR,GAGzC,OAAOZ,EAFK,GAAH,OAAM,EAAKsB,SAAX,YAAuBH,QA3C3BT,IAAYA,EAAQW,QACvB,MAAM,IAAIJ,MACR,iEAGJM,KAAKF,QAAUX,EAAQW,QACvBE,KAAKD,SAAWZ,EAAQY,SACxBC,KAAKL,KAAOM,gB,8nDC4CT,SAASC,EAAyBC,GACvC,OAAO,SAAAC,GAiBL,IAAMC,EAAoBjD,IAAI+C,EAAU,6BAA8B,IACtEC,EAAS,CAAEE,KCtDoB,sBDsDOD,sBAEtC,IA6EIE,EA7EEC,EAAepD,IAAI+C,EAAU,kCAAmC,IAClEM,EAAsB,GACtBC,GAAyB,EAC7B,IACED,EAAsBD,EAAaG,KAAI,SAAAC,GACrC,IAAMN,EAxBV,SAAoCA,GAClC,OAAQA,GACN,IAAK,OACH,MAAO,OACT,IAAK,OACH,MAAO,OACT,IAAK,eACH,MAAO,aACT,IAAK,QACH,MAAO,QACT,IAAK,UACH,MAAO,UACT,QACE,MAAO,QAWIO,CAA2BD,EAAIE,SACtCC,EAAc3D,IAAIwD,EAAK,4BAA6B,IACpDI,EAAO5D,IAAIwD,EAAK,YAAa,MAC7BK,EAAO,CACXC,MAAO9D,IAAIwD,EAAK,aAAc,IAC9BO,SAAU/D,IAAIwD,EAAK,gBAAiB,IACpCQ,SAAUhE,IAAIwD,EAAK,gBAAiB,IACpCS,QAASjE,IAAIwD,EAAK,eAAgB,KAE9BU,EAAQ,CACZC,SAAUnE,IAAIwD,EAAK,iBAAkB,IACrCY,kBAAmBpE,IAAIwD,EAAK,0BAA2B,KAGnDa,EAAU,GAChB,GAAa,YAATnB,EAAoB,CAEtB,IADA,IAAMoB,EAAatE,IAAIwD,EAAK,iBAAkB,IAC9C,MAA4B3D,OAAO0E,QAAQD,GAA3C,eAAwD,iBAA5CE,EAA4C,KAArCxC,EAAqC,KACtD,GAAkB,gBAAdA,EAAKyC,KAQF,IAAIzC,EAAKyC,MAAsB,gBAAdzC,EAAKyC,KAC3B,MAAM,IAAInC,MAAM,oCAEhB,OAAO+B,EAVP,IAEEA,EAAQG,GAASE,KAAKC,MAAM3C,EAAK4C,aACjC,MAAOC,GAEPR,EAAQG,GAASxC,EAAK4C,aAS5B,GAAI,iBAAkBP,EAAS,CAG7B,GAAIxE,OAAOiF,KAAKT,GAASU,OAAS,EAAG,CACnC,IAAMC,EAAkBC,IAAKZ,EAAS,CAAC,iBACvCrB,EAAS,CAAEE,KClHW,uBDkHiB8B,oBAEzC1B,GAAyB,EACzBN,EAAS,CAAEE,KCpHM,uBDsHjBF,EAAS,CAAEE,KCvHa,uBDuHemB,YAI3C,OAAQnB,GACN,IAAK,OACH,MAAO,CAAEA,OAAMU,QAEjB,IAAK,QACH,MAAO,CAAEV,OAAMgB,SAEjB,IAAK,aACH,MAAO,CAAEhB,OAAMS,eAEjB,IAAK,OACH,MAAO,CAAET,OAAMW,QAEjB,IAAK,UACH,MAAO,CAAEX,OAAMmB,WAEjB,QACE,MAAO,CAAEnB,OAAMU,YAGrB,MAAO/B,GAEPD,QAAQsD,IAAIrD,GAIVyB,EACFH,EAAYE,EAAoB8B,QAAO,SAAApC,GAMrC,OAL6B/C,IAC3B+C,EACA,wBACA,OAKJC,EAAS,CAAEE,KC7JW,iBD8JtBC,EAAYE,GAEd,IAAM+B,EAAaC,iBAAO,IAAIC,KAAQlE,GAChCY,EAAO,CACXuD,OAAQ,MACRC,SAAS,EACTC,UAAW1C,EAAS2C,WACpBhF,IAAKmC,eACL8C,eAAgB5C,EAAS6C,QACzBC,SAAU9C,EAAS+C,YAAYC,aAC/BX,aACAjC,aAGFH,EAjKG,SAAsBhB,GAC3B,OAAO,SAACgB,EAAUgD,GAAa,IACrBC,EAAaD,IAAWE,aAAxBD,UAINjD,EAHoBmD,IAAKnE,EAAKmB,UAAW,CAAC,OAAQ,eAGzC,CAAED,KC5Bc,mBD8BhB,CAAEA,KC7Bc,oBD+BH,IAApB+C,EAASlB,QACX/B,EAAS,CAAEE,KCxCY,gBDwCSkD,qBAAsB,CAACpE,KAqBvDgB,EAAS,CAAEE,KC7DY,gBD6DSkD,qBAnBHH,EAC1B1C,KAAI,SAAAC,GACH,OAAOA,EAAIgC,QAAUxD,EAAOwB,KAE7B6C,MAAK,SAACC,EAAGC,GACR,IAAMC,EAAQ7B,gBACZ2B,EAAElB,WACFhE,EACA,IAAIkE,KAAKgB,EAAElB,aAEPqB,EAAQ9B,gBACZ4B,EAAEnB,WACFhE,EACA,IAAIkE,KAAKiB,EAAEnB,aAGb,OADasB,mCAAyBF,EAAOC,SAqI1CE,CAAa3E,KAI1B,IAAM4E,EAAyB,SAAC7D,GAAD,cAC1BA,GAD0B,IAE7B+C,YAAa,EAAF,KACN/C,EAAS+C,aADH,IAETe,oBAAqB,CAAC,CACpBnD,QAAS,GACToD,SAAU,uBACVlD,KAAM,CACJA,KAAM,CAAC,OAGXmD,gBAAiB,QA8DfC,EAAmB,SAAC9D,EAAMmB,GAC9B,OAAO,SAACrB,EAAUgD,GAAa,IACrBiB,EAAWjB,IAAWE,aAAtBe,OAERjE,EAAS,CAAEE,KC5QiB,qBDiNF,SAACgE,EAAiB7C,GAC9C,IAGE,OAAO6C,EAAgB7C,GAAS7C,MAAK,SAAA2F,GAEnC,GAAqC,IAAjCA,EAAUC,cAAcC,KAE1BH,EAAgB7C,GAAS7C,MAAK,SAAA8F,GAC5B,IAAMC,EAAaD,EAAU5F,OAG7B,GAAsC,IAAlC6F,EAAWH,cAAcC,KAE3BH,EAAgB7C,GAAS7C,MAAK,SAAAgG,GAC5B,IAAMC,EAAaD,EAAU9F,OAG7B,OAAsC,IAAlC+F,EAAWL,cAAcC,KAEpBT,EAAuBa,GAIzBA,UAKJ,GAAsC,IAAlCF,EAAWH,cAAcC,KAElC,OAAOT,EAAuBW,GAIhC,OAAOA,UAKJ,GAAqC,IAAjCJ,EAAUC,cAAcC,KAEjC,OAAOT,EAAuBO,GAIhC,OAAOA,KAET,MAAOxF,GAEP,OADAC,QAAQC,MAAMF,GACP,IAWP+F,CAAsBT,EAAO/D,GAAOmB,GACjC7C,MAAK,SAAAuB,GACAA,GACFC,EAASF,EAAyBC,IAClCC,EAAS,CAAEE,KC1QM,kBD4QjBF,EAAS,CACPE,KC9QiB,gBD+QjBrB,MAAO,+DAGI,iBAATqB,GACFF,EAAS,CAAEE,KCzQe,+BD6Q/ByE,OAAM,SAAA9F,GACL,MAAM,IAAIS,MAAMT,MAEjB8F,OAAM,SAAA9F,GAELD,QAAQsD,IAAIrD,GACZmB,EAAS,CACPE,KC9RmB,gBD+RnBrB,MAAO,mEAQJ+F,EAAY,SAACC,GAAD,OAAWb,EAAiB,eAAgBa,IE1S9D,SAASC,EAAYb,EAAQc,GAClC,OAAO,SAAA/E,GACL,IACE,IAAKiE,EACH,MAAM,IAAI3E,MAAM,sCAGlB,GAA6B,eAAzB2E,EAAOe,cAQT,MAJAhF,EAAS,CACPE,KDTmB,gBCUnBrB,MAAO,wBAAF,OAA0BoF,KAE3B,IAAI3E,MAAJ,UAAa2E,EAAb,gDAPNjE,EFMD,SAAyB+E,GAC9B,OAAO,SAAA/E,GAGLA,EAAS,CAAEE,KC1BY,cD0BO+D,OAFf,IAAInF,EAAOiG,GAEYE,WADnB,gBETNC,CAAgBH,IAS3B,MAAOlG,GAEPD,QAAQsD,IAAIrD,KAIX,SAASsG,EAAYzE,GAC1B,OAAO,SAACV,EAAUgD,GAAa,IACrBiC,EAAejC,IAAWE,aAA1B+B,WACR,IACE,GAAiC,eAA7BA,EAAWD,cAGb,MAAM,IAAI1F,MAAJ,UACD2F,EADC,gDAFNjF,EF4QiC,SAACU,GAAD,OAAasD,EAAiB,cAAetD,GE5QrE0E,CAA0B1E,IAMrC,MAAO7B,GAEPD,QAAQsD,IAAIrD,GAEZmB,EAAS,CACPE,KDpCqB,gBCqCrBrB,MAAO,wBAAF,OAA0BoG,OAMhC,SAASI,EAAmBzE,GACjC,OAAO,SAACZ,EAAUgD,GAChB,IAAMsC,EAActC,IAAWE,aAAaD,SAASlB,OAC/CK,EAAaC,iBAAO,IAAIC,KAAQlE,GAOtC4B,EAAS,CAAEE,KD7DmB,qBC6DOH,SANpB,CACfwC,OAAQ,OACRE,UAAW,eAAF,OAAiB6C,GAC1BlD,aACAxB,UAGFZ,EAAS,CAAEE,KDxDgB,oBCyD3BF,EAASmF,EAAYvE,KAIlB,SAAS2E,EAAe3E,GAC7B,OAAO,SAAAZ,GACLA,EAASqF,EAAmBzE,K,uOC3CzB,SAAS4E,KACd,OAAO,SAACxF,EAAUgD,GAAa,IACrByC,EAAwBzC,IAAWE,aAAnCuC,oBACRzF,EAAS,CAAEE,KFnBY,gBEoBlBuF,IACHzF,EAAS4E,EAAU,YACnB5E,EAAS,CAAEE,KFfuB,+BEmCxC,SAASwF,KACP,OAAO,SAAC1F,EAAUgD,GAAa,IACrB2C,EAAmB3C,IAAWE,aAA9ByC,eACFC,EAAM,IAAItD,KACVuD,EAAalE,gBACjBgE,EACAvH,EACA,IAAIkE,KAAKqD,IAELG,EAAcC,8BAAoBH,EAAKC,GACvCG,EAAcC,8BAAoBL,EAAKC,GACzCK,EAAa,MACbJ,GAAe,EACjBI,EAAa,GAAH,OAAMJ,EAAN,YACDE,GAAe,IACxBE,EAAa,GAAH,OAAMF,EAAN,aAKZhG,EAAS,CAAEE,KFpEoB,sBEoEOgG,aAAYC,YAF9B9D,iBAAOuD,EAAKxH,MAsB7B,SAASgI,GAAWC,GACzB,OAAO,SAAArG,GAAY,IAEfc,EAUEuF,EAVFvF,MACAwF,EASED,EATFC,OACArC,EAQEoC,EARFpC,OACAc,EAOEsB,EAPFtB,cACAwB,EAMEF,EANFE,cACAC,EAKEH,EALFG,WACAC,EAIEJ,EAJFI,WACAC,EAGEL,EAHFK,UACAC,EAEEN,EAFFM,eACAC,EACEP,EADFO,YAEEC,EAAaP,EAqBjB,GApBKO,IACHA,ECjHS,k5IDmHX7G,EAAS,CAAEE,KFnHU,YEmHOY,UAC5Bd,EAAS,CAAEE,KFnHW,aEmHOoG,OAAQO,IACrC7G,EAAS8E,EAAYb,EAAQc,IAC7B/E,GApCK,SAACA,EAAUgD,GAAa,IACrB8D,EAAU9D,IAAWE,aAArB4D,MAEJA,GACFC,cAAcD,GAGhB,IAAME,EAAWC,aAAY,kBAAMjH,EAAS0F,QAAmB,KAE/D1F,EAAS,CAAEE,KFnFY,cEmFO8G,aAE9BhH,EAAS0F,SA2BLe,GAA6B,KAAfA,GAChBzG,EAAS,CAAEE,KF/FiB,qBE+FSuG,eAGnCE,GAAqC,KAAnBA,GACpB3G,EAAS,CAAEE,KFhGkB,sBEgGSyG,mBAGpCC,GACF5G,EAAS,CAAEE,KFlGe,mBEkGS0G,gBAGjCF,EAAW,KACLQ,EAAqCR,EAArCQ,cAAeC,EAAsBT,EAAtBS,kBACjBC,EAAWpK,IAAImK,EAAmB,MAAO,MACzCE,EAAYrK,IAAImK,EAAmB,MAAO,MAKhD,GAHID,GAAmC,KAAlBA,GACnBlH,EAAS,CAAEE,KF/GgB,sBE+GWgH,kBAEpCC,EACF,IACE,GAC+B,WAA7B,GAAOA,IACM,OAAbC,GACc,OAAdC,EAIA,MAAM,IAAI/H,MACR,uEAHFU,EAAS,CAAEE,KFvHe,yBEuHeiH,sBAM3C,MAAOtI,GAEPD,QAAQsD,IAAIrD,KAKI,IAAlB0H,GACFvG,EAAS,CAAEE,KF3IuB,6BE4IlCF,EAAS4E,EAAU,YACnB5E,EAASwF,OAETxF,EArHG,CAAEE,KFhCgB,gBEyJrBF,GADiB,IAAfwG,EArHC,CAAEtG,KFlCe,cEqCjB,CAAEA,KFpCa,c,k6DINxB,IAAMoH,GAAMC,IAAOC,IAAPD,CAAH,MAEM,SAAAtJ,GAAC,OAAKA,EAAEwJ,OAAS,OAAS,UAE5B,SAAAxJ,GAAC,OAAKA,EAAEyJ,eAAiB,OAAS,UACjC,SAAAzJ,GAAC,OAAKA,EAAEyJ,eAAiB,OAAS,UACjC,SAAAzJ,GAAC,OAAKA,EAAEyJ,eAAiB,UAAY,UAC/B,SAAAzJ,GAAC,OAAKA,EAAEyJ,eAAiB,OAAS,SAIjDC,GAAgBJ,IAAOK,IAAV,MAGR,SAAA3J,GAAC,OAAIA,EAAE4J,MAAMC,QAAQC,gBAAgB9J,EAAE4J,MAAMC,QAAQE,QAAQC,SAGlEC,GAAYX,IAAOY,IAAPZ,CAAH,MASTa,G,6WACK,MAQHxI,KAAKyG,MANPvF,EAFK,EAELA,MACAuH,EAHK,EAGLA,cACA7C,EAJK,EAILA,WACAmB,EALK,EAKLA,eACAkB,EANK,EAMLA,MACAvB,EAPK,EAOLA,OAGIgC,EAAmB3B,EACvB,oCACE,kBAACuB,GAAD,CAAWK,IAAKzH,EAAO0H,IAAKlC,IAC5B,kBAACqB,GAAD,CAAeE,MAAOA,GAAQlB,IAE9B,kBAAC,IAAD,MAEJ,OACE,kBAAC,IAAD,CAAM8B,IAAKJ,EAAeK,eAAa,GACrC,kBAACpB,GAAD,CACEqB,MAAM,UACNC,QAASpD,EACTiC,OAAQY,EAAgB,EAAI,EAC5BX,eAAgBf,EAAiB,EAAI,GAEpC2B,S,gCA1BmBO,iBAkDfC,yBACbC,mBAlBsB,SAAAC,GACtB,MAAO,CACLlI,MAAOkI,EAAMC,OAAOnI,MACpBuH,cAAeW,EAAMC,OAAOZ,cAC5B1B,eAAgBqC,EAAMC,OAAOtC,eAC7BL,OAAQ0C,EAAMC,OAAO3C,WAIE,SAAAtG,GACzB,MAAO,CACLwF,WAAY,WACVxF,EAASwF,UAMbuD,CAGEX,K,6jGCrEJ,IAAMF,GAAYX,IAAOY,IAAPZ,CAAH,MAUT2B,GAAY3B,IAAOK,IAAV,MAGG,SAAA3J,GAAC,OAAIA,EAAE4J,MAAMC,QAAQqB,OAAOC,QAiBxCC,GAAa9B,IAAO+B,KAAP/B,CAAH,MAQH,SAAAtJ,GAAC,OAAIA,EAAE4J,MAAMC,QAAQC,gBAAgB9J,EAAE4J,MAAMC,QAAQE,QAAQC,SAIpEsB,GAAehC,IAAOiC,KAAPjC,CAAH,MAKL,SAAAtJ,GAAC,OAAIA,EAAE4J,MAAMC,QAAQC,gBAAgB9J,EAAE4J,MAAMC,QAAQE,QAAQC,SAOpEwB,GAAkBlC,IAAOmC,KAAPnC,CAAH,MASG,SAAAtJ,GAAC,OAAIA,EAAE4J,MAAMC,QAAQC,gBAAgB9J,EAAE4J,MAAMC,QAAQE,QAAQC,SACxE,SAAAhK,GAAC,OAAIA,EAAE4J,MAAMC,QAAQC,gBAAgB9J,EAAE4J,MAAMC,QAAQE,QAAQC,SAOpE0B,G,6WACK,MAYH/J,KAAKyG,MAVPvF,EAFK,EAELA,MACA+G,EAHK,EAGLA,MACA+B,EAJK,EAILA,WACAC,EALK,EAKLA,aACAC,EANK,EAMLA,eACAtD,EAPK,EAOLA,WACAF,EARK,EAQLA,OACAyD,EATK,EASLA,kBACAxE,EAVK,EAULA,eACAtC,EAXK,EAWLA,SAGI+G,EAA6BC,oBAAShH,GAAU,SAAA1G,GAEpD,OADuB4G,gBAAK5G,EAAE4D,UAAW,CAAC,OAAQ,kBAIhD+J,EAAuB,KAE3B,GAAIF,EAA4B,KACtBrJ,EAAgBqJ,EAA2B7J,UAAUgC,QAAO,SAAA5F,GAAC,MAAe,eAAXA,EAAE2D,QAAuB,GAA1FS,YAMRuJ,EAAuB/G,gBAAKxC,GAAa,SAAAwJ,GAAC,MAAwB,SAApBA,EAAEnF,eAAgD,eAApBmF,EAAEnF,iBAGhF,OACE,kBAACkE,GAAD,CAAWrB,MAAOA,GAChB,kBAAC,GAAD,CAAWU,IAAKzH,EAAO0H,IAAKlC,IAC5B,kBAAC+C,GAAD,CAAYxB,MAAOA,EAAOuC,QAAQ,MAC/BtJ,GAEFoJ,GACC,kBAAC,KAAD,CAASpJ,MAAM,8BAA8BuJ,UAAU,UACrD,kBAACZ,GAAD,CACE5B,MAAOA,EACPe,QAAS,kBAAMrD,EAAe,gBAFhC,eAQJ,kBAAC,KAAD,CAASzE,MAAM,iBAAiBuJ,UAAU,UACxC,kBAACd,GAAD,CACE1B,MAAOA,EACPe,QAASmB,EACTO,aAAW,YAEX,kBAAC,KAAD,CAAMC,SAAS,YAGlB/D,EACC,kBAAC+C,GAAD,CACE1B,MAAOA,EACPe,QAASiB,EACTS,aAAW,YAEX,kBAAC,KAAD,CAAgBC,SAAS,WAIzB,kBAAChB,GAAD,CACE1B,MAAOA,EACPe,QAAS,SAACjK,GACRC,QAAQsD,IAAI,oBACZ4H,EAAenL,IAEjB2L,aAAW,cAEX,kBAAC,KAAD,CAAYC,SAAS,WAG3B,kBAAChB,GAAD,CAAc1B,MAAOA,EAAOe,QAASgB,EAAYU,aAAW,SAC1D,kBAAC,KAAD,CAAOC,SAAS,iB,gCA/EL1B,iBAuGNC,yBACbC,mBAlBsB,SAAAC,GACtB,MAAO,CACLlI,MAAOkI,EAAMC,OAAOnI,MACpB0F,WAAYwC,EAAMC,OAAOzC,WACzBF,OAAQ0C,EAAMC,OAAO3C,OACrBrD,SAAU+F,EAAM9F,aAAaD,aAIN,SAAAjD,GAAQ,MAAK,CACtC4J,WAAY,kBAAM5J,EH9IX,CAAEE,KFhCgB,iBK+KzB4J,eAAgB,kBAAM9J,EH5If,CAAEE,KFlCe,gBK+KxB2J,aAAc,kBAAM7J,EH1Ib,CAAEE,KFpCa,cK+KtB6J,kBAAmB,kBAAM/J,EHvJlB,CAAEE,KFlBwB,yBK0KjCqF,eAAgB,SAAA3E,GAAI,OAAIZ,EAASuF,EAAe3E,QAIhDmI,CAGEY,K,6mDC9LJ,IAAMa,GAAejD,IAAOkD,KAAPlD,CAAH,MAMZmD,G,6WACK,MAMH9K,KAAKyG,MAJPsE,EAFK,EAELA,kBACAC,EAHK,EAGLA,qBACAC,EAJK,EAILA,cACAC,EALK,EAKLA,UAEF,OACE,kBAACN,GAAD,CACEO,KAAMH,EACNI,QAASL,EACTM,kBAAgB,iBAChBC,UAAWJ,EACXK,OAAO,SAEP,kBAAC,KAAD,0BACA,kBAAC,KAAD,KACE,kBAAC,KAAD,KAAoBN,IAEtB,kBAAC,KAAD,KACE,kBAAC,KAAD,CAAQjC,QAAS+B,EAAmBhC,MAAM,WAA1C,gB,gCArBkBE,iBAqCtBuC,GAAqB,CACzBT,kBJXK,WACL,MAAO,CAAEzK,KFpBwB,yBMiCpB6I,sBAXS,SAAAC,GACtB,MAAO,CACL4B,qBAAsB5B,EAAMC,OAAO2B,qBACnCC,cAAe7B,EAAMC,OAAO4B,iBAU9BO,GAFarC,CAGb2B,I,szECvDF,IAAMxB,GAAY3B,IAAOK,IAAV,MAUTyD,GAAM9D,IAAOK,IAAV,KAEa0D,KAAM,MA4CbC,G,6WAVX,OACE,kBAAC,GAAD,KACE,kBAACF,GAAD,MACA,kBAACA,GAAD,MACA,kBAACA,GAAD,Y,gCANcxC,iB,srFCtCtB,IAAMK,GAAY3B,IAAOK,IAAV,MAKE,SAAA3J,GAAC,MAAkB,SAAbA,EAAEsE,OAAoB,WAAa,gBAOpDiJ,GAAajE,IAAOK,IAAV,MAKK,SAAA3J,GAAC,MAAkB,SAAbA,EAAEsE,OAAoB,WAAa,gBAGxDkJ,GAAkBlE,IAAOK,IAAV,KAEH8D,IAAK,MASjBC,GAAcpE,IAAOK,IAAV,MAIO,SAAA3J,GAAC,OAAIA,EAAE4J,MAAMC,QAAQE,QAAQoB,QAU/CwC,GAAYrE,IAAO+B,KAAP/B,CAAH,KAEFmE,IAAK,MAOZG,GAAkB,CACtBC,YAAY,EACZC,UAAW,CACTC,GAAI,CACFC,UAAW3C,KACXjD,MAAO,CACL+D,QAAS,OAGbnM,EAAG,CACDgO,UAAW3C,KACXjD,MAAO,CACL+D,QAAS,UAGb9G,EAAG,CACD2I,UAAWC,QAKXC,G,uaACI,CAAEC,mBAAmB,I,2DAET,WACIxM,KAAKyG,MAAnBgG,YAGNzM,KAAK0M,aAAeC,YAAW,WAC7B,EAAKC,UAAS,iBAAO,CAAEJ,mBAAmB,QACzC,Q,6CAKLK,aAAa7M,KAAK0M,gB,+BAGX,IAkCHI,EAlCG,EAYH9M,KAAKyG,MAVP3F,EAFK,EAELA,QACA6B,EAHK,EAGLA,OACA8J,EAJK,EAILA,UACAM,EALK,EAKLA,UACAxG,EANK,EAMLA,YACA0B,EAPK,EAOLA,MACA+E,EARK,EAQLA,cACA/N,EATK,EASLA,MACAgO,EAVK,EAULA,UACAnP,EAXK,EAWLA,IAGM0O,EAAsBxM,KAAKoJ,MAA3BoD,kBAEFU,EAAkBnL,gBACtBgL,EACAvO,EACA,IAAIkE,KAAK6D,IAEL4G,EAAUC,oBAAU,IAAI1K,KAAQwK,GAChCG,EAAcD,oBAAUF,EAAiBI,kBAAQ,IAAI5K,KAAQ,IAE/D6K,EAAqB,KAqBzB,OAlBEA,EADEJ,EACmB,SAAH,OAAY1K,iBAAOyK,EAAiB,YAC7CG,EACY,aAAH,OAAgB5K,iBAAOyK,EAAiB,YAErCzK,iBAAOyK,EAAiB,yBAM7CJ,EADEhM,GAA0B,KAAfA,EAAQ,GACAA,EAEA,CACnB,0HAMF,kBAAC,GAAD,CAAW6B,OAAQA,EAAQsK,UAAWA,EAAWnP,IAAKA,GACpD,kBAAC8N,GAAD,CAAYjJ,OAAQA,GACN,SAAXA,GAEG,kBAACoJ,GAAD,CAAayB,UAAW,EAAGvF,MAAOA,GAC/BnH,GAGK,SAAX6B,GAEG,kBAACkJ,GAAD,CAAiB2B,UAAW,GACzBf,IAAcxN,IAAUuN,GAAqB,kBAAC,GAAD,MAC7CC,IAAcxN,GAASuN,GACtB,kBAAC,KAAD,CAAUrN,QAAS8M,IAhBF,yFAoBlBQ,GAAaxN,GAASA,GACrBwN,GACA,kBAAC,KAAD,CAAUtN,QAAS8M,IAChBa,EAAmB,MAM/BE,EACC,kBAAChB,GAAD,CAAWxB,QAAQ,WAAW+C,GAC5B,W,gCA3FUE,aAuGPvE,yBAAYC,mBANH,SAAAC,GACtB,MAAO,CACL7C,YAAa6C,EAAM9F,aAAaiD,YAChCtH,MAAOmK,EAAMnK,SAGUkK,CAAyBoD,K,6+DC9KpD,IAAMmB,GAAgB/F,IAAOgG,KAAPhG,CAAH,MAabiG,GAAYjG,IAAOkG,KAAPlG,CAAH,MAED,SAAAtJ,GAAC,OAAKA,EAAEiD,OAAqB,KAAZjD,EAAEiD,MAAe,QAAU,SAMpDwM,G,6WACK,MACmD9N,KAAKyG,MAAMrH,KAA7D8B,EADD,EACCA,MAAOC,EADR,EACQA,SAAUC,EADlB,EACkBA,SAAUC,EAD5B,EAC4BA,QAAS4L,EADrC,EACqCA,UAC5C,OACE,kBAACS,GAAD,CAAeT,UAAWA,EAAWnP,IAAKkC,KAAKyG,MAAM3I,KAClDsD,EAAW,kBAACwM,GAAD,CAAWtM,MAAOyM,UAAU3M,GAAWF,MAAM,KAAQ,KACjE,kBAAC,KAAD,KACE,kBAAC,KAAD,CAAY8M,cAAY,EAACxD,QAAQ,MAC9BtJ,GAEH,kBAAC,KAAD,CACE/B,QAAS,CACP+M,YAAY,EACZC,UAAW,CACTC,GAAI,CACFC,UAAW3C,KACXjD,MAAO,CACL+D,QAAS,OAGbnM,EAAG,CACDgO,UAAW3C,KACXjD,MAAO,CACL+D,QAAS,UAGb9G,EAAG,CACD2I,UAAWC,SAKhBnL,IAGL,kBAAC,KAAD,KACGE,EAAQV,KAAI,SAACgD,EAAGsK,GACf,IAAMC,EAAU,QAAH,OAAWD,GAAX,OAAmBxL,iBAAO,IAAIC,KAAQlE,IACnD,OACE,kBAAC,KAAD,CACE2P,KAAMxK,EAAEyK,SACRC,OAAO,SACPC,KAAK,QACLvF,MAAM,UACNjL,IAAKoQ,GAEJvK,EAAE3C,gB,gCA9CQiI,iBA8DZE,sBANS,SAAAC,GACtB,MAAO,CACLmF,WAAYnF,EAAMoF,aAIPrF,CAAyB2E,I,ouCC7ExC,IAAMJ,GAAgB/F,IAAOgG,KAAPhG,CAAH,MAab8G,GAAiB9G,IAAOK,IAAV,MAMd0G,GAAoB/G,IAAOgH,KAAPhH,CAAH,MAOjBiH,GAAkBjH,IAAOkH,KAAPlH,CAAH,MAWfmH,GAAyBnH,IAAOoH,KAAPpH,CAAH,MAOtBqH,GAA0BrH,IAAOoH,KAAPpH,CAAH,MAoG7B,IAMewB,sBANS,SAAAC,GACtB,MAAO,CACL9B,cAAe8B,EAAMC,OAAO/B,iBAIjB6B,EAjGf,SAAqB1C,GAAO,IAClBrH,EAAwCqH,EAAxCrH,KAAMkI,EAAkCb,EAAlCa,cAAe2F,EAAmBxG,EAAnBwG,UAAWnP,EAAQ2I,EAAR3I,IAElCmR,EAAW,CAAEC,MAAO,GAAIC,OAAQ,IAChCC,EAAgB,+CAAH,OAAkD9H,EAAlD,QAQb+H,EAAMC,wBACVC,0BAAc,kBACZ,kBAAC,aAAD,CACEC,YAAa,EACbC,cAAerQ,EAAKsQ,iBAAiB,GACrCC,eAAgB,CACdC,aAAa,EACbC,gBAAgB,EAChBC,mBAAmB,EACnBC,mBAAmB,IAGpB3Q,EAAK4Q,UAAUrP,KAAI,SAACsP,EAAK1T,GAAN,OAClB,kBAAC,UAAD,CACEuB,IAAKvB,EACL2T,SAAU,CAAEC,IAAKF,EAAIE,IAAKC,IAAKH,EAAIG,KACnCC,KAAM,CACJ3R,ICxGC,ybDyGD4R,WAAYrB,GAEdjG,QAAS,kBA1BXtK,EAAM,yEAAH,OA0BgCuR,EAzB9BM,cAEXpU,OAAOgP,KAAKzM,EAAK,UAJO,IAClBA,QA6BF,kBAAC,UAAD,CACEwR,SAAU,CACRC,IAAK/Q,EAAKoR,eAAeL,IACzBC,IAAKhR,EAAKoR,eAAeJ,KAE3BC,KAAM,CACJ3R,IEpHG,ytBFqHH4R,WAAYrB,UAOtB,OACE,kBAAC,GAAD,CAAehC,UAAWA,EAAWnP,IAAKA,GACxC,kBAAC,KAAD,CAAYoD,MAAM,mBAAmBuP,qBAAsB,CAAEjG,QAAS,QACtE,kBAACkE,GAAD,KACE,kBAACW,EAAD,CACEqB,aAActB,EACduB,eAAgB,yBAAKC,MAAO,CAAEzB,OAAQ,GAAF,OArDzB,YAsDX0B,iBAAkB,yBAAKD,MAAO,CAAEzB,OAAQ,GAAF,OAtD3B,YAuDX2B,WAAY,yBAAKF,MAAO,CAAEzB,OAAQ,YAEpC,kBAACV,GAAD,KACE,kBAAC,KAAD,CAAOsC,QAAQ,SACb,kBAACnC,GAAD,KACGxP,EAAKsQ,iBAAiB/O,KAAI,SAACsP,EAAK1T,GAAN,OACzB,kBAAC,KAAD,CAAUuB,IAAKvB,GACb,kBAACuS,GAAD,CAAwBiC,QAAQ,SAC9B,kBAAC,KAAD,KACE,kBAAC,KAAD,CACE5C,KAAI,gFACF8B,EAAIM,SAENlC,OAAO,SAEN4B,EAAIe,OANP,IAQGf,EAAIgB,QAIX,kBAACjC,GAAD,CAAyB+B,QAAQ,SAC9Bd,EAAIiB,sB,s3EGvIzB,IAAMC,GAAqBxJ,IAAOK,IAAV,MAgBlBoJ,G,uaACI,CACNC,aAAa,EACbC,gBAAiB,K,gDAGV,aAQHtR,KAAKyG,MANP8K,EAFK,EAELA,eACAvK,EAHK,EAGLA,YACAwK,EAJK,EAILA,kBACAC,EALK,EAKLA,aACAzO,EANK,EAMLA,QACA0O,EAPK,EAOLA,eAkDF,OACE,oCACI1R,KAAKoJ,MAAMiI,YAmET,kBAAC,KAAD,+EAjEA,6BACE,kBAAC,KAAD,KACE,kBAAC,KAAD,CAAYrD,cAAY,EAACxD,QAAQ,MAC9B+G,EAAeI,WACZ,uBACA,4BAEN,kBAAC,KAAD,CAAatF,UAAU,YACrB,kBAAC,KAAD,KACGkF,EAAeK,aACZL,EAAeK,aAAajR,KAAI,SAAAkR,GAChC,OACE,kBAAC,KAAD,CACE/T,IAAK+T,EAAOrU,MACZsU,QACE,kBAAC,KAAD,CACEC,QAASF,EAAOE,QAChBC,UApEFlV,EAoE8B+U,EAAOrU,MApE7B,SAAAyH,GAChC,IAAMgN,EAAY,CAChBzU,MAAOV,EACPiV,QAAS9M,EAAMoJ,OAAO0D,SAExBP,EAAkBS,KAgEQzU,MAAOqU,EAAOrU,QAGlB0U,MAAOL,EAAOrU,QAxEZ,IAAAV,KA4EN,KACJ,kBAACqU,GAAD,0BACA,kBAAC,KAAD,CACEgB,YAAY,iBACZ3H,QAAQ,WACR4H,WAAS,EACT5U,MAAOwC,KAAKoJ,MAAMkI,gBAClBU,SAAU,SAAAjT,GAER,IAAMsT,EAAWtT,EAAEsP,OAAO7Q,MAC1B,EAAKoP,UAAS,SAAA0F,GAAS,gBAAUA,GAAV,IAAqBhB,gBAAiBe,QAE/DE,WAAY,CACVC,QAAS,CACPC,eAAgBzS,KAAKyG,MAAM+L,QAAQC,sBAO/C,kBAAC,KAAD,KACE,kBAAC,KAAD,CACEnE,KAAK,QACLvF,MAAM,UACNC,QApEO,WACnB,IAxBkB0J,EAUEtT,EAcdqC,EAAU,CACdkQ,WAAYJ,EAAeI,WAC3B3O,UACA4O,cA3BgBc,EA2BUnB,EAAeK,aA1BpCc,EACJnQ,QAAO,SAAAoQ,GACN,OAAOA,EAAKZ,QAAUY,EAAKnV,MAAQ,QAEpCmD,KAAI,SAAAgS,GACH,OAAOA,EAAKnV,UAsBdoV,QAAS,EAAKxJ,MAAMkI,gBACpBI,kBAnBkBtS,EAsBNqC,EArBd9C,MAAMqI,EAAa,CACjB6L,OAAQ,OACRC,KAAMhR,KAAKiR,UAAU3T,GACrB4T,QAAS,CACP,eAAgB,sBAkBpBvB,EAAa,qBACb,EAAK7E,UAAS,SAAC0F,GAAD,UAAC,MAAoBA,GAArB,IAAgCjB,aAAa,QA0D/C4B,WAEO1B,EAAeK,cAAgBL,EAAeK,aAAazP,OAAS,IACjE+Q,KAAM3B,EAAeK,cAAc,SAAArH,GAAC,OAAKA,EAAEwH,YAC5C/R,KAAKoJ,MAAMkI,kBARtB,kB,gCAlHYrI,iBAgKbkK,yBAzKA,iBAAO,CACpBtX,KAAM,GAEN4W,eAAgB,CACd9H,SAAU,WACVyI,UAAW,aAoKAD,CAAmBhK,mBAnBV,SAAAC,GACtB,MAAO,CACLmI,eAAgBnI,EAAMiK,cACtBrM,YAAaoC,EAAMC,OAAOrC,YAC1B0K,eAAgBtI,EAAM9F,aAAaoO,mBAIZ,SAAAtR,GACzB,MAAO,CACLoR,kBAAmB,SAAAhU,GACjB4C,ECnLC,SAA2B5C,GAChC,MAAO,CAAE8C,KdqBwB,sBcrBG9C,SDkLvBgU,CAAkBhU,KAE7BiU,aAAc,SAAAjU,GACZ4C,EClLC,SAAsB5C,GAC3B,OAAO,SAAA4C,GACLA,EAASmF,EAAY/H,KDgLViU,CAAajU,QAKM2L,CAGhCiI,K,mvDE/LF,IAAM1D,GAAgB/F,IAAOgG,KAAPhG,CAAH,MAab2L,G,wXACgB,MAC2BtT,KAAKyG,OAClD8M,EAFkB,EACVA,oBADU,EACUC,gB,+BAIrB,MAC6BxT,KAAKyG,MAAjCzD,EADD,EACCA,QAASiK,EADV,EACUA,UAAWnP,EADrB,EACqBA,IAC5B,OACE,kBAAC,GAAD,CAAemP,UAAWA,EAAWnP,IAAKA,GACxC,kBAAC,GAAD,CAAekF,QAASA,U,gCAVDiG,iBA8BhBE,sBANS,SAAAC,GACtB,MAAO,CACLmI,eAAgBnI,EAAMiK,kBAVC,SAAAjT,GACzB,MAAO,CACLmT,mBAAoB,SAAA/V,GAClB4C,EDrBC,SAA4B5C,GACjC,MAAO,CAAE8C,KdcyB,uBcdG9C,SCoBxB+V,CAAmB/V,QAWnB2L,CAGbmK,I,oOClDF,IAAMG,GAAQ,CACZC,MAAO,KACPC,QAAS,IACTC,OAAQ,IACRC,MAAO,KAIIC,GAAQ7W,OAAOiF,KAAKuR,IAAOM,QAAO,SAACC,EAAa9B,GAG3D,IAAM+B,EAASR,GAAMvB,GAAS,GAM9B,OALA8B,EAAY9B,GAAS,kBAAagC,cAAZ,KACCD,EACjBC,MAAG,WAAH,eAGCF,IACN,I,gyFCRH,IAAMG,GAAiBxM,IAAOK,IAAV,KAMhB8L,GAAMF,OANU,OAYdQ,GAAUzM,IAAOK,IAAV,KACG8D,IAAK,KASjBgI,GAAMF,OAVG,OAoDb,SAASS,GAAoBvT,EAASkM,GAA6C,IAA9BsH,EAA8B,wDACjF,OACE,kBAAC,GAAD,CACExT,QAASA,EAAQE,KACjB2B,OAAQ7B,EAAQ6B,OAChB7E,IAAKgD,EAAQhD,IACb2O,WAAW,EACXM,UAAWjM,EAAQ0B,WACnBwK,cAAeA,EACfC,UAAWqH,EAAuB,iBAAmB,K,IA0BrDC,G,wQAOJ,WAAY9N,GAAO,a,4FAAA,eACjB,cAAMA,IADW,eANJ+N,IAAMC,UAAU,OAMZ,iBAJX,CAAEC,gBAAiB,KAIR,oBAFR,IAEQ,gDAoBmB,SAACrR,GACrC,IAAI4K,EAAQ,EACR0G,GAAa,EAcjB,OAVAC,wBAAavR,GAAU,SAAC1G,EAAGkY,GACR,QAAblY,EAAEgG,OACCgS,IACH1G,EAAQ4G,GAGVF,GAAa,KAIV1G,KApCU,0BAyCH,WAAM,IACZ5K,EAAa,EAAKoD,MAAlBpD,SACFyR,EAAc,GAmCpB,OAjCAzR,EAAS0R,SAAQ,SAAAnU,GAIf,IAAMoU,EAAW,CACfxS,WAAY5B,EAAI4B,WAChBG,OAAQ/B,EAAI+B,OACZK,QAASpC,EAAImC,eACbjF,IAAK8C,EAAI9C,KAGX,GAAI8C,EAAIgC,QAAS,CACf,IAAMqS,EAAiBC,KAAMtU,EAAKoU,GAClCF,EAAYxV,KAAK2V,QACZ,GAAmB,QAAfrU,EAAI+B,OAIb/B,EAAIL,UAAUwU,SAAQ,SAACI,EAAK5Y,GAC1B,GACe,SAAb4Y,EAAI7U,MACS,SAAb6U,EAAI7U,MACS,YAAb6U,EAAI7U,KACJ,CACA,IAAM8U,EAAaF,KAAMC,EAAD,GAAC,MAAUH,GAAX,IAAqBlX,IAAK,GAAF,OAAKkX,EAASlX,IAAd,YAAqBvB,MACrEuY,EAAYxV,KAAK8V,YAGhB,GAAmB,SAAfxU,EAAI+B,OAAmB,CAChC,IAAM0S,EAAcH,KAAMtU,EAAKoU,GAC/BF,EAAYxV,KAAK+V,OAGdP,KA9EU,kCAmFK,WACtB,IAAMQ,EAAc,EAAKC,gBACnBC,EAAc,GAEhBC,EAAoBH,EAEpBA,EAAYnT,OAAS,IACvBsT,EAAoBC,kBAAOJ,GAAa,SAAA3Y,GAAC,OAAI,IAAI+F,KAAK/F,EAAE6F,gBAG1D,IAAMmT,EACJ,EAAKC,oCAAoCH,GAE3CA,EAAkBV,SAAQ,SAACnU,EAAKrE,GAC9B,IApKuBuE,EAoKjBwT,EAAuB/X,IAAMoZ,EAC/B3I,GAAgB,EAEhBzQ,IAAMkZ,EAAkBtT,OAAS,IACnC6K,GAAgB,GAGdpM,EAAIgC,QACN4S,EAAYlW,MA5KSwB,EA4KgBF,EA1KzC,kBAAC,GAAD,CACE9C,IAAI,UACJ6E,OAAO,MACPoK,UAAWjM,EAAQ0B,WACnBiK,UAAW3L,EAAQ8B,YAuKO,SAAfhC,EAAI+B,OACb6S,EAAYlW,KA1LpB,SAA0BwB,GACxB,OACE,kBAAC,GAAD,CACEA,QAASA,EAAQE,KACjB2B,OAAQ7B,EAAQ6B,OAChB7E,IAAKgD,EAAQhD,IACbiP,UAAWjM,EAAQ0B,WACnBiK,WAAW,IAmLQoJ,CAAiBjV,IACV,QAAfA,EAAI+B,QAAiC,SAAb/B,EAAIN,KACrCkV,EAAYlW,KAAK+U,GAAoBzT,EAAKoM,EAAesH,IACjC,QAAf1T,EAAI+B,QAAiC,SAAb/B,EAAIN,KACrCkV,EAAYlW,KA3IpB,SAA6BwB,GAAuC,IAA9BwT,EAA8B,wDAClE,OACE,kBAAC,GAAD,CACElV,KAAM0B,EAAQG,KACd8L,UAAWjM,EAAQ0B,WACnB1E,IAAKgD,EAAQhD,IACbmP,UAAWqH,EAAuB,iBAAmB,KAqIlCwB,CAAoBlV,EAAK0T,IAE3B,QAAf1T,EAAI+B,QACS,YAAb/B,EAAIN,MACJM,EAAIa,QAAQsU,WAEZP,EAAYlW,KAtIpB,SAA4BwB,GAAuC,IAA9BwT,EAA8B,wDACjE,OACE,kBAAC,GAAD,CACElV,KAAM0B,EAAQW,QAAQsU,WACtBhJ,UAAWjM,EAAQ0B,WACnB1E,IAAKgD,EAAQhD,IACbmP,UAAWqH,EAAuB,iBAAmB,KAgIlC0B,CAAmBpV,EAAK0T,IAE1B,QAAf1T,EAAI+B,QACS,YAAb/B,EAAIN,MACJM,EAAIa,QAAQwU,SAEZT,EAAYlW,KAnLpB,SAA+BwB,GAAuC,IAA9BwT,EAA8B,wDACpE,OACE,kBAAC,GAAD,CACEd,aAAc1S,EAAQW,QAAQwU,SAC9BjT,QAASlC,EAAQkC,QACjBL,OAAQ7B,EAAQ6B,OAChB7E,IAAKgD,EAAQhD,IACb2O,WAAW,EACXM,UAAWjM,EAAQ0B,WACnByK,UAAWqH,EAAuB,iBAAmB,KA0KlC4B,CAAsBtV,EAAK0T,IAE5CkB,EAAYlW,KACV+U,GAAoB,CAAErT,KAAM,CAAC,+BAKnC,EAAK4L,UAAS,SAAC0F,GAAD,UAAC,MAAoBA,GAArB,IAAgCoC,gBAAiBc,OAAgB,WAEzEW,SAASC,uBAAuB,kBAAkB,IAIpDzJ,YAAW,kBAAMwJ,SAASC,uBAAuB,kBAAkB,GAAGC,gBAAe,KAAQ,SAzIhF,wBA8IL,SAAAtX,GAERA,EAAEuX,SACJvX,EAAEwX,iBACFxX,EAAEyX,cAAcC,WACdC,WACEC,iBAAiB5X,EAAEyX,eAAeI,iBAAiB,eAEpD7X,EAAEuX,OAAS,GAAK,EAAI,GACrB,MArJJ,EAAKO,aAAerC,IAAMC,YAFT,E,0DAMjB,IAAMa,EAActV,KAAKuV,gBACpBuB,KAAQ9W,KAAKqD,SAAUiS,KAC1BtV,KAAKqD,SAAWiS,EAChBtV,KAAK+W,yBAEH/W,KAAK6W,aAAaG,SACpBhX,KAAK6W,aAAaG,QAAQC,iBAAiB,QAASjX,KAAKkX,e,+BA+IpD,IACCxC,EAAoB1U,KAAKoJ,MAAzBsL,gBAER,OACE,kBAACP,GAAD,CAAgBgD,IAAKnX,KAAK6W,cACxB,kBAACzC,GAAD,CAAS5G,UAAW,EAAG4J,QAAM,GAC1B1C,S,gCAxKczL,iBAuLVE,sBARS,SAAAC,GACtB,MAAO,CACL/F,SAAU+F,EAAM9F,aAAaD,SAC7BgU,iBAAkBjO,EAAMkO,UAAUC,QAClCtY,MAAOmK,EAAMnK,SAIFkK,CAAyBoL,I,oBC7RjC,SAASiD,GAAcha,GAM5B,MAAO,CAAE8C,KlBZoB,kBkBYGkO,UALd,CAChBhR,QACAia,WAAYja,EAAM2E,QAAU,EAC5BuV,YAAala,EAAM2E,OAAS,M,+rECJhC,IAAMwV,GAAahQ,IAAOK,IAAV,MAIH,SAAA3J,GAAC,OAAKA,EAAEkZ,QAAU,OAAS,UAUlCK,GAAYjQ,IAAOkQ,KAAPlQ,CAAH,MAGO,SAAAtJ,GAAC,OAAqB,OAAjBA,EAAEyZ,YAAuB,UAe9CC,GAAOpQ,IAAOiC,KAAPjC,CAAH,MAQJqQ,G,wQACJ,aAAc,a,4FAAA,UACZ,gBACKC,eAAiB,EAAKA,eAAela,KAApB,OAFV,E,oDAKCgB,GAEM,KAAfA,EAAEmZ,WACJlY,KAAKyG,MAAM0R,kBACXpZ,EAAEwX,oB,+BAIG,MAC8CvW,KAAKyG,MAAlD+Q,EADD,EACCA,cAAejJ,EADhB,EACgBA,WAAY6J,EAD5B,EAC4BA,cAC7BC,EAAc9J,EAAW/Q,MACzB8a,EAAY,GAAH,OAAM/J,EAAWkJ,WAAjB,QACPC,EAAgBnJ,EAAhBmJ,YACJa,EAAkB,KAQtB,OALEA,EADEb,EACgB,6BAAH,OAAgCY,GAE7B,KAIlB,kBAACX,GAAD,CAAYJ,QAASa,GACnB,kBAACR,GAAD,CACExF,WAAS,EACToG,QAAQ,IACRC,WAAS,EACTlG,WAAY,CAAEmG,kBAAkB,GAChCvG,YAAY,iBACZ2F,WAAYS,EACZI,oBAAqB,CACnB/H,MAAO,CAAE7H,MAAO,UAAW6P,OAAQ,IAErC5G,SAAUwF,EACVha,MAAO6a,EACPQ,WAAY7Y,KAAKiY,iBAGnB,kBAACF,GAAD,CACE/O,QAAShJ,KAAKyG,MAAM0R,gBACpBzN,aAAW,OACX3B,MAAM,UACNkK,SAAUyE,EACVoB,eAAa,GAEb,kBAAC,KAAD,a,gCAnDc7P,iBA4ETE,sBAlBS,SAAAC,GACtB,MAAO,CACLmF,WAAYnF,EAAMoF,UAClB4J,cAAehP,EAAM9F,aAAayV,iBAIX,SAAA3Y,GACzB,MAAO,CACLoX,cAAe,SAAAzY,GACbqB,EAASoX,GAAczY,EAAEsP,OAAO7Q,SAElC2a,gBAAiB,WACf/X,GDrGG,SAACA,EAAUgD,GAAa,IACrBoL,EAAcpL,IAAdoL,UACFwK,EAAexK,EAAUhR,MAAMyb,OAChCD,GAAiC,KAAjBA,GApBzB,SAAgCxK,GAC9B,QAAIA,EAAUrM,OAAS,KAsBE+W,CAAuB1K,EAAUhR,SAEtD4C,EAASqF,EAAmB+I,EAAUhR,QACtC4C,EAASoX,GAAc,aCiGdrO,CAGb6O,I,s8FCxHF,IAAM1O,GAAY3B,IAAOK,IAAV,MAOF,SAAA3J,GAAC,OAAKA,EAAEkZ,QAAU,oBAAsB,WACrCzL,IAAK,MACL,SAAAzN,GAAC,OAAKA,EAAEkZ,QAAU,+BAAiC,UAI7D7P,GAAMC,IAAOmC,KAAPnC,CAAH,MAMM,SAAAtJ,GAAC,MAAmB,SAAdA,EAAEkZ,QAAqB,QAAU,UAC9B,SAAAlZ,GAAC,MAA4B,SAAvBA,EAAE8a,iBAA8B,gBAAkB,sBACnE,SAAA9a,GAAC,MAA4B,SAAvBA,EAAE8a,iBAA8B,SAAW,eAmBxDC,G,gbACY,SAAAC,GACd,OAAIA,EAAWlX,QAAU,GAChB,EACEkX,EAAWlX,QAAU,IAAMkX,EAAWlX,OAAS,GACjD,EAEF,K,4CAGyB,SAAAmX,GAAkB,MAAK,CACvD,CAAC/V,gBAAK+V,GAAoB,SAAA/O,GAAC,MAA8B,kBAA1BA,EAAE2H,MAAM9M,kBACvC,CAAC7B,gBAAK+V,GAAoB,SAAA/O,GAAC,MAA8B,SAA1BA,EAAE2H,MAAM9M,iBAA2B7B,gBAAK+V,GAAoB,SAAA/O,GAAC,MAA8B,SAA1BA,EAAE2H,MAAM9M,kBACxG,CAAC7B,gBAAK+V,GAAoB,SAAA/O,GAAC,MAA8B,0BAA1BA,EAAE2H,MAAM9M,sB,uBAG5B,SAAA/D,GACX,IAAMkY,EAAuB,SAACC,EAAeC,GAE3C,IAAMC,EAAOnW,gBAAKkW,GAAmB,SAAAlP,GAAC,OAAIA,EAAEoP,gBAAkBH,KAGxDI,EAAmBrX,kBAAOkX,GAAmB,SAAAlP,GAAC,OAAKmP,GAAQnP,EAAE2H,QAAUwH,EAAKxH,SAElF,MAAQ,CACNwH,OACAE,qBA4GJ,OAxGyB7F,kBAAO1S,GAAS,SAACwY,EAASC,GAEjD,GAAIC,qBAAUF,EAAQD,kBAAkB,SAAArP,GAAC,OAAIA,EAAE2H,QAAU4H,EAAc5H,UAAU,EAAG,CAClF,IAAM8H,EAAOF,EACTG,EAAoB1X,kBAAOsX,EAAQD,kBAAkB,SAAArP,GAAC,OAAIA,EAAE2H,QAAU8H,EAAK9H,SAK/E,GAA2B,IAAvB8H,EAAKL,cACP,MAAQ,CACNO,WAAY,GAAF,UACLL,EAAQK,YADH,CAER,CAACF,KAEHJ,iBAAkBK,GAStB,GAA2B,IAAvBD,EAAKL,cAAqB,CAC5B,IAAIQ,EAAyBZ,EAAqB,EAAGU,GACrDA,EAAoBE,EAAuBP,iBAGtCO,EAAuBT,OAE1BO,GADAE,EAAyBZ,EAAqB,EAAGU,IACNL,kBAG7C,IAAMQ,EAAOD,EAAuBT,KAG9BW,EAAY9X,kBAAO,CAACyX,EAAMI,IAAO,SAAA7P,GAAC,QAAMA,KAE9C,MAAQ,CACN2P,WAAY,GAAF,UACLL,EAAQK,YADH,CAERG,IAEFT,iBAAkBK,GAStB,GAA2B,IAAvBD,EAAKL,cAAqB,CAC5B,IAAIQ,EAAyBZ,EAAqB,EAAGU,GACjDG,EAAOD,EAAuBT,KAIlC,GAHAO,EAAoBE,EAAuBP,iBAGvCQ,EAAM,CACR,IAAME,EAA0Bf,EAAqB,EAAGU,GAClDM,EAAOD,EAAwBZ,KACrCO,EAAoBK,EAAwBV,iBAK5C,IAAMS,EAAY9X,kBAAO,CAACyX,EAAMI,EAAMG,IAAO,SAAAhQ,GAAC,QAAMA,KAEpD,MAAQ,CACN2P,WAAY,GAAF,UACLL,EAAQK,YADH,CAERG,IAEFT,iBAAkBK,GAKjBE,EAAuBT,OAE1BU,GADAD,EAAyBZ,EAAqB,EAAGU,IACnBP,KAC9BO,EAAoBE,EAAuBP,kBAM7C,IAAMS,EAAY9X,kBAAO,CAACyX,EAAMI,IAAO,SAAA7P,GAAC,QAAMA,KAE9C,MAAQ,CACN2P,WAAY,GAAF,UACLL,EAAQK,YADH,CAERG,IAEFT,iBAAkBK,IAIxB,OAAOJ,IACN,CAAEK,WAAY,GAAIN,iBAAkBvY,IAE/B6Y,c,gDAKD,MAC6Ela,KAAKyG,MAAjF8Q,EADD,EACCA,QAASlU,EADV,EACUA,SAAUsC,EADpB,EACoBA,eAAgB6U,EADpC,EACoCA,eAAgBC,EADpD,EACoDA,qBAErDrQ,EAnJ6B,SAAC/G,GAAD,OAAcgH,oBAAShH,GAAU,SAAA1G,GAEtE,OADuB4G,gBAAK5G,EAAE4D,UAAW,CAAC,OAAQ,kBAkJbma,CAA+BrX,GAE5DiW,EAAqB,GAEvBqB,EAAkB,KAClBC,GAA2B,EAE/B,GAAIxQ,EAA4B,CAC9B,IAAMrJ,EAA6BqJ,EAtJiC7J,UAAUgC,QAAO,SAAA5F,GAAC,MAAe,eAAXA,EAAE2D,QAAuB,GAAGS,YA0JhH8Z,EAA2BtY,kBAAOxB,GAAa,SAAAwJ,GAAC,MAAwB,YAApBA,EAAEnF,eAAmD,SAApBmF,EAAEnF,eAAgD,eAApBmF,EAAEnF,iBAEnF,IAApCyV,EAAyB1Y,QACxBoB,gBAAKsX,GAA0B,SAAAtQ,GAAC,MAAwB,kBAApBA,EAAEnF,kBACtC7B,gBAAKsX,GAA0B,SAAAtQ,GAAC,MAAwB,SAApBA,EAAEnF,kBACtC7B,gBAAKsX,GAA0B,SAAAtQ,GAAC,MAAwB,SAApBA,EAAEnF,kBACtC7B,gBAAKsX,GAA0B,SAAAtQ,GAAC,MAAwB,0BAApBA,EAAEnF,mBACzCwV,GAA2B,GAK7BD,EAAkBpX,gBAAKxC,GAAa,SAAAwJ,GAAC,MAAwB,YAApBA,EAAEnF,iBAjBb,Q,8nBAAA,CAmBLyV,GAnBK,IAmB9B,2BAAmD,KAAxCxB,EAAwC,QAC3CM,EAAgB3Z,KAAK2Z,cAAcN,GAEzCC,EAAmBha,KAAK,CACtB4S,MAAOmH,EACPyB,GAAI1Q,EAA2BvH,UAC/B0U,UACAoC,mBA1B0B,+BA+BhC,IAAMO,EAAaU,EACf5a,KAAK+a,gCAAgCzB,GACrCtZ,KAAKgb,WAAW1B,GAId2B,EAA0BC,KAAKC,KAAKjB,EAAW/X,OAFzB,GAItBiZ,EAAkB,IAAIC,MAAMJ,GAC/BK,OACA3a,KAAI,kBAAMuZ,EAAWqB,OAAO,EANH,MAQtBC,EAAuBJ,EAAgBZ,EAAiB,GAC1DY,EAAgBZ,EAAiB,GACjCY,EAAgB,GAEpB,OACG9B,EAAmBnX,OAAS,GAAKwY,IAEhC,kBAAC,GAAD,CAAWpD,QAASA,GAElB,kBAAC,KAAD,CAAMjM,WAAS,GACZgO,EAAmBnX,OAAS,GAC3BqZ,EAAqB7a,KAAI,SAAC8a,EAAMlf,GAAP,OACvB,kBAAC,KAAD,CACEuB,IAAG,oBAAevB,GAClB+O,WAAS,EACTqH,MAAI,EACJ+I,QAAS,EACTC,GAAI,IAEHF,EAAK9a,KAAI,SAACib,EAAK3N,GAAN,OACR,kBAAC,KAAD,CACEnQ,IAAG,oBAAevB,EAAf,YAAoB0R,GACvB0E,MAAI,EACJgJ,GAAI,GAAKF,EAAKtZ,QAEd,kBAAC,GAAD,CACEmM,KAAK,QACLvF,MAAM,YACNjL,IAAG,UAAK8d,EAAId,GAAT,eAAkB7M,GACrBsJ,QAASqE,EAAIrE,QAAQsE,WACrB1C,iBAAiB,QACjBnQ,QAAS,kBAAMrD,EAAeiW,EAAI1J,MAAM4J,iBAEvCF,EAAI1J,MAAM4J,uBAOvB,kBAAC,KAAD,CAAMnJ,MAAI,EAACrH,WAAS,EAACqQ,GAAI,GAAII,QAAQ,gBAAgBL,QAAS,GAC3Df,GAAsC,IAAnBH,GAClB,kBAAC,KAAD,CAAM7H,MAAI,EAACgJ,GAAI,GACb,kBAAC,GAAD,CACErN,KAAK,QACLvF,MAAM,YACNwO,QAAQ,OACR4B,iBAAiB,OACjBnQ,QAAS,kBAAMrD,EAAegV,EAAgBmB,iBAE7CnB,EAAgBmB,gBAItBb,EAA0B,GAAKT,EAAiB,GAC/C,kBAAC,KAAD,CAAM7H,MAAI,EAACgJ,GAAI,GACb,kBAAC,GAAD,CACErN,KAAK,QACLvF,MAAM,YACNwO,QAAQ,OACR4B,iBAAiB,OACjBnQ,QAAS,kBAAMyR,EAAqBD,EAAiB,KALvD,qBAWHS,EAA0B,GAAKT,EAAiBS,GAC/C,kBAAC,KAAD,CAAMtI,MAAI,EAACgJ,GAAI,GACb,kBAAC,GAAD,CACErN,KAAK,QACLvF,MAAM,YACNwO,QAAQ,OACR4B,iBAAiB,OACjBnQ,QAAS,kBAAMyR,EAAqBD,EAAiB,KALvD,yB,gCAnQMvR,iBA0STE,sBApBS,SAAAC,GACtB,MAAO,CACLmO,QAASnO,EAAMkO,UAAUC,QACzBlU,SAAU+F,EAAM9F,aAAaD,SAC7BmX,eAAgBpR,EAAMkO,UAAUkD,mBAIT,SAAApa,GACzB,MAAO,CACLuF,eAAgB,SAAA3E,GACdZ,EAASuF,EAAe3E,KAE1ByZ,qBAAsB,SAAAuB,GAAO,OAAI5b,EAAS,CACxCE,KAAM,yBACNka,eAAgBwB,QAKP7S,CAGbiQ,I,4/EClVF,IAAM9P,GAAY3B,IAAOsU,KAAPtU,CAAH,MAYT,SAAAlB,GAAK,OAAIA,EAAMG,YACjBsN,cADW,SAMT,SAAAzN,GAAK,OAAKA,EAAM8Q,SAClBrD,cADW,QAMTJ,GAAMD,MAxBG,MAyBF,SAAApN,GAAK,OAAKA,EAAM8Q,QAAU,oBAAsB,OAC/C,SAAA9Q,GAAK,OAAKA,EAAM8Q,QAAU,oBAAsB,QAQxDI,GAAahQ,IAAOK,IAAV,KAME8D,IAAK,MAajBoQ,G,wQACJ,WAAYzV,GAAO,a,4FAAA,UACjB,cAAMA,IACD0V,aAAe3H,IAAMC,YAFT,E,8CAKV,MAC+BzU,KAAKyG,MAAnCgC,EADD,EACCA,cAAe7B,EADhB,EACgBA,WACvB,OACE,kBAAC,GAAD,CACE4G,UAAW,EACX5G,WAAYA,EAAa,EAAI,EAC7B2Q,QAAS9O,EAAgB,EAAI,GAE7B,kBAAC,GAAD,CAAY0O,IAAKnX,KAAKmc,aAAclP,UAAU,aAC5C,kBAAC,GAAD,MACA,kBAAC,GAAD,CAAe/B,UAAWlL,KAAKmc,aAAanF,UAC5C,kBAAC,GAAD,MACA,kBAAC,GAAD,MACA,kBAAC,GAAD,a,gCAnBkB/N,iBAiCbE,sBAPS,SAAAC,GACtB,MAAO,CACLX,cAAeW,EAAMC,OAAOZ,cAC5B7B,WAAYwC,EAAMC,OAAOzC,cAIduC,CAAyB+S,I,6rBChGxC,IAAME,GAAe,CACnB1V,OAAQ,KACRxF,MAAO,cACPuH,eAAe,EACf7B,YAAY,EACZoE,sBAAsB,EACtB1D,cAAe,GACfC,kBAAmB,GACnBR,eAAgB,GAChBkE,cACE,oHACFjE,YAAa,IAiDAqC,OA9Cf,WAA8C,IAA9BD,EAA8B,uDAAtBgT,GAAcC,EAAQ,uCAC5C,OAAQA,EAAO/b,MACb,ItBO+B,sBsBN7B,gBAAY8I,GAAZ,IAAmB4B,sBAAsB,IAE3C,ItBG+B,sBsBF7B,gBAAY5B,GAAZ,IAAmB4B,sBAAsB,IAE3C,ItBE8B,qBsBD5B,gBAAY5B,GAAZ,IAAmB6B,cAAeoR,EAAOxV,aAE3C,ItBA+B,sBsBC7B,gBAAYuC,GAAZ,IAAmB9B,cAAe+U,EAAO/U,gBAE3C,ItBFkC,yBsBGhC,gBAAY8B,GAAZ,IAAmB7B,kBAAmB8U,EAAO9U,oBAE/C,ItBJ+B,sBsBK7B,gBAAY6B,GAAZ,IAAmBrC,eAAgBsV,EAAOtV,iBAE5C,ItBnCsB,asBoCpB,gBAAYqC,GAAZ,IAAmB1C,OAAQ2V,EAAO3V,SAEpC,ItBvCqB,YsBwCnB,gBAAY0C,GAAZ,IAAmBlI,MAAOmb,EAAOnb,QAEnC,ItB3BuB,csB4BrB,gBAAYkI,GAAZ,IAAmBX,eAAe,IAEpC,ItB7BuB,csB8BrB,gBAAYW,GAAZ,IAAmBX,eAAe,IAEpC,ItB/BsB,asBgCpB,gBAAYW,GAAZ,IAAmBxC,YAAY,IAEjC,ItBjCoB,WsBkClB,gBAAYwC,GAAZ,IAAmBxC,YAAY,IAEjC,ItBvB4B,mBsBwB1B,gBAAYwC,GAAZ,IAAmBpC,YAAaqV,EAAOrV,cAEzC,QACE,OAAOoC,I,46CCrDb,IAAMgT,GAAe,CACnB/X,OAAQ,KACRgB,WAAY,KACZhC,SAAU,GACViZ,eAAgB,KAChBvD,cAAc,EACdhT,eAAgBtD,iBAAO,IAAIC,KAAQlE,GACnC+H,YAAa9D,iBAAO,IAAIC,KAAQlE,GAChC8H,WAAY,MACZY,MAAO,KACPrB,qBAAqB,GAwGRvC,OArGf,WAAoD,IAA9B8F,EAA8B,uDAAtBgT,GAAcC,EAAQ,uCAClD,OAAQA,EAAO/b,MACb,IvBlBuB,cuBmBrB,gBAAY8I,GAAZ,IAAmB/E,OAAQgY,EAAOhY,OAAQgB,WAAYgX,EAAOhX,aAE/D,IvBd+B,sBuBe7B,gBACK+D,GADL,IAEE9C,WAAY+V,EAAO/V,WACnBC,YAAa8V,EAAO9V,cAGxB,IvBtBuB,cuBuBrB,gBACK6C,GADL,IAEElC,MAAOmV,EAAOnV,QAGlB,IvB9B4B,mBuB+B1B,gBACKkC,GADL,IAEE/F,SAAU,GAAF,UACH+F,EAAM/F,UADH,CAEN,CACET,SAAS,EACTD,OAAQ,MACRH,WAAYC,iBAAO,IAAIC,KAAQlE,QAKvC,IvB9CyB,gBuB+CvB,gBACK4K,GADL,IAEErD,eAAgBtD,iBAAO,IAAIC,KAAQlE,GACnC8H,WAAY,MACZjD,SAAUgZ,EAAO7Y,uBAGrB,IvBpD8B,qBuBqD5B,gBACK4F,GADL,IAEErD,eAAgBtD,iBAAO,IAAIC,KAAQlE,GACnC8H,WAAY,MACZjD,SAAU,aAAI+F,EAAM/F,UAAV,UAAyBgZ,EAAOlc,UAAhC,IAA0CrC,IAAKmC,mBAAYwD,MAAK,SAACC,EAAGC,GAC5E,IAAMC,EAAQ7B,gBACZ2B,EAAElB,WACFhE,EACA,IAAIkE,KAAKgB,EAAElB,aAEPqB,EAAQ9B,gBACZ4B,EAAEnB,WACFhE,EACA,IAAIkE,KAAKiB,EAAEnB,aAGb,OADasB,mCAAyBD,EAAOD,QAKnD,IvB3DgC,uBuB4D9B,gBACKwF,GADL,IAEEkT,eAAgBD,EAAO5a,UAG3B,IvB/DwB,euBgEtB,gBACK2H,GADL,IAEE2P,cAAc,IAGlB,IvBtEyB,gBuBuEvB,gBACK3P,GADL,IAEE2P,cAAc,IAGlB,IvB1EoC,2BuB2ElC,gBACK3P,GADL,IAEEvD,qBAAqB,IAGzB,IvB/EkC,yBuBgFhC,gBACKuD,GADL,IAEEvD,qBAAqB,IAGzB,IvB1E+B,sBuB2E7B,gBACKuD,GADL,IAEEsI,eAAgB2K,EAAOhc,oBAG3B,QACE,OAAO+I,I,6rBCjHb,IAAMgT,GAAe,CACnB7E,SAAS,EACTlW,QAAS,IA4CIgI,OA1Cf,WAA8C,IAA9BD,EAA8B,uDAAtBgT,GAAcC,EAAQ,uCAC5C,OAAQA,EAAO/b,MACb,IxBE2B,kBwBDzB,gBACK8I,GADL,IAEEmO,SAAS,IAEb,IxBF2B,kBwBGzB,gBACKnO,GADL,IAEEmO,SAAS,IAGb,IxBb4B,mBwBmB5B,IxBtByB,gBwB4BzB,IxB1B8B,qBwB2B5B,gBACKnO,GADL,IAEEoR,eAAgB,IAGpB,IxBzBkC,yBwB0BhC,gBACKpR,GADL,IAEEoR,eAAgB6B,EAAO7B,iBAG3B,QACE,OAAOpR,IC1CPgT,GAAe,CACnB5e,MAAO,GACPia,WAAY,EACZC,aAAa,GAWAlJ,OATf,WAAiD,IAA9BpF,EAA8B,uDAAtBgT,GAAcC,EAAQ,uCAC/C,OAAQA,EAAO/b,MACb,IzBL2B,kByBMzB,OAAO+b,EAAO7N,UAChB,QACE,OAAOpF,I,6rBCVb,IAAMgT,GAAe,CACnBG,WAAW,EACX5K,WAAY,KACZC,aAAc,MA8BDyB,OA3Bf,WAAqD,IAA9BjK,EAA8B,uDAAtBgT,GAAcC,EAAQ,uCACnD,OAAQA,EAAO/b,MACb,I1BoB+B,sB0BnB7B,gBACK8I,GADL,IAEEwI,aAAcxI,EAAMwI,aAAajR,KAAI,SAAAgS,GACnC,OAAIA,EAAKnV,QAAU6e,EAAO7e,MAAMA,MAC9B,SAAYmV,GAAZ,IAAkBZ,QAASsK,EAAO7e,MAAMuU,UAEnCY,OAGb,I1BagC,uB0BZ9B,gBACKvJ,GADL,IAEEuI,WAAY0K,EAAO7e,MAAMgf,QACzB5K,aAAcyK,EAAO7e,MAAM2B,QAAQwB,KAAI,SAAAgS,GACrC,gBAAYA,GAAZ,IAAkBZ,SAAS,SAGjC,I1BIkC,yB0BHhC,gBAAY3I,GAAZ,IAAmBmT,WAAW,IAChC,QACE,OAAOnT,ICfEC,OAbf,WAA8C,IAA9BD,EAA8B,uDADzB,GACiBiT,EAAQ,uCAC5C,OAAQA,EAAO/b,MACb,I3BQyB,gB2BPvB,OAAO+b,EAAOpd,MAEhB,I3BMuB,c2BLrB,MAPe,GASjB,QACE,OAAOmK,ICIEqT,GARKC,0BAAgB,CAClCrT,UACA/F,gBACAgU,aACA9I,aACA6E,iBACApU,W,qjECCF0d,IAAQC,KAAK,CACXC,OAAQ,CACNC,SAAU,CAAC,qBAAsB,uBAIrC,IAAMC,GAAiBpV,IAAOK,IAAV,KAqBM8D,IAAK,KAGLA,IAAK,KAGLA,IAAK,MAMzBkR,GAAkB7gB,OAAO8gB,sCAAwCC,UAyDxDC,G,wQAtDb,WAAY1W,GAAO,a,4FAAA,UACjB,cAAMA,IACD2W,MAAQC,sBAAYZ,GAAaO,GAAgBM,0BAAgBC,OACtE,EAAKC,aAAe,KACpB,EAAKvV,MCtDM,WAIb,IAHAwV,EAGA,uDAHe,YACfC,EAEA,uDAFiB,OACjBC,EACA,uDADc,YAERC,EAAW,CACf1V,QAAS,CACPjJ,MAAO4e,MAGPC,kBAAmB,EAInBC,YAAa,IAEfC,WAAY,CACVC,iBAAiB,GAEnB9R,UAAW,CACT+R,OAAQ,CACNriB,KAAM,CACJqU,SAAU,WACViO,OAAQ,GACRC,MAAO,OAKf,GAAIC,IAAWZ,GACbG,EAAS1V,QAAQE,QAAU,CACzBoB,KAAMiU,OAEH,KAAII,EAAOJ,GAGhB,MAAM,IAAI/d,MAAJ,UACD+d,EADC,qHAFNG,EAAS1V,QAAQE,QAAUyV,EAAOJ,GAOpC,GAAIY,IAAWX,GACbE,EAAS1V,QAAQoW,UAAY,CAC3B9U,KAAMkU,OAEH,KAAIA,IAAkBG,EAAOH,GAGlC,MAAM,IAAIhe,MAAJ,UACDge,EADC,6HAFNE,EAAS1V,QAAQoW,UAAYT,EAAOH,GAQtC,GAAIW,IAAWV,GACbC,EAAS1V,QAAQqB,OAAS,CACxBC,KAAMmU,OAEH,KAAIE,EAAOF,GAGhB,MAAM,IAAIje,MAAJ,UACDie,EADC,qHAFNC,EAAS1V,QAAQqB,OAASsU,EAAOF,GAOnC,OAAOY,yBAAeX,GDZPY,CACX,EAAK/X,MAAMgX,aACX,EAAKhX,MAAMiX,eACX,EAAKjX,MAAMkX,aAPI,E,yDAWC,WAIlB3d,KAAKod,MAAMhd,SAASoG,GAAWxG,KAAKyG,MAAOzG,KAAKiI,QAIhDjI,KAAKye,YAAcze,KAAKod,MAAMsB,WAAU,kBAAM,EAAKC,aAAa,EAAKvB,Y,6CAIrEpd,KAAKye,gB,6BAIArV,GACL,OAAOA,EAAM9F,aAAagZ,iB,mCAIfc,GACX,IAAMwB,EAAgB5e,KAAKwd,aAC3Bxd,KAAKwd,aAAexd,KAAK6e,OAAOzB,EAAMha,YAClCwb,IAAkB5e,KAAKwd,cAAgBxd,KAAKyG,MAAMqY,WACpD9e,KAAKyG,MAAMqY,UAAU9e,KAAKwd,gB,+BAK5B,OACE,kBAAC,WAAD,CAAUJ,MAAOpd,KAAKod,OACpB,kBAAC,IAAD,CAAkBnV,MAAOjI,KAAKiI,OAC5B,kBAAC8U,GAAD,KACE,kBAAC,GAAD,MACA,kBAAC,GAAD,c,gCA/CY9T,iBEtDTkU","file":"chatframe.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"chatframe\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"chatframe\"] = factory();\n\telse\n\t\troot[\"chatframe\"] = factory();\n})(window, function() {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 58);\n","module.exports = require(\"react\");","module.exports = require(\"styled-components\");","module.exports = require(\"date-fns\");","module.exports = require(\"lodash\");","module.exports = require(\"react-redux\");","module.exports = require(\"lodash/get\");","module.exports = require(\"@material-ui/core/Typography\");","module.exports = require(\"@material-ui/core/colors/grey\");","module.exports = require(\"@material-ui/core/styles\");","module.exports = require(\"@material-ui/core/Button\");","module.exports = require(\"@material-ui/core/colors\");","module.exports = require(\"@material-ui/core/Grid\");","module.exports = require(\"@material-ui/core/CardContent\");","module.exports = require(\"uuid\");","module.exports = require(\"@material-ui/core/Link\");","module.exports = require(\"@material-ui/core/Card\");","module.exports = require(\"redux\");","module.exports = require(\"react-google-maps\");","module.exports = require(\"markdown-to-jsx\");","module.exports = require(\"@material-ui/core/Avatar\");","module.exports = require(\"@material-ui/core/IconButton\");","module.exports = require(\"@material-ui/core/CardActions\");","module.exports = require(\"@material-ui/core/TextField\");","module.exports = require(\"validator/lib/isHexColor\");","module.exports = require(\"lodash/merge\");","module.exports = require(\"@material-ui/core/Tooltip\");","module.exports = require(\"@material-ui/core/TableCell\");","module.exports = require(\"webfontloader\");","module.exports = require(\"@material-ui/core/styles/MuiThemeProvider\");","module.exports = require(\"redux-thunk\");","module.exports = require(\"@material-ui/core/Fab\");","module.exports = require(\"@material-ui/icons/Chat\");","module.exports = require(\"@material-ui/core/Zoom\");","module.exports = require(\"lodash/find\");","module.exports = require(\"lodash/omit\");","module.exports = require(\"@material-ui/core/Paper\");","module.exports = require(\"@material-ui/icons/Fullscreen\");","module.exports = require(\"@material-ui/icons/FullscreenExit\");","module.exports = require(\"@material-ui/icons/Info\");","module.exports = require(\"@material-ui/icons/Close\");","module.exports = require(\"@material-ui/core/DialogTitle\");","module.exports = require(\"@material-ui/core/Dialog\");","module.exports = require(\"@material-ui/core/DialogActions\");","module.exports = require(\"@material-ui/core/DialogContent\");","module.exports = require(\"@material-ui/core/DialogContentText\");","module.exports = require(\"lodash/isEqual\");","module.exports = require(\"@material-ui/core/colors/green\");","module.exports = require(\"@material-ui/core/CardMedia\");","module.exports = require(\"@material-ui/core/CardHeader\");","module.exports = require(\"@material-ui/core/Table\");","module.exports = require(\"@material-ui/core/TableBody\");","module.exports = require(\"@material-ui/core/TableRow\");","module.exports = require(\"@material-ui/core/FormControl\");","module.exports = require(\"@material-ui/core/FormGroup\");","module.exports = require(\"@material-ui/core/FormControlLabel\");","module.exports = require(\"@material-ui/core/Checkbox\");","module.exports = require(\"lodash/every\");","module.exports = require(\"@material-ui/icons/Send\");","module.exports = require(\"whatwg-fetch\");","export const sysTimeFormat = \"yyyy-MM-dd'T'HH:mm:ss.SSS\"\n","import { v4 as uuidv4 } from 'uuid'\n\n// Code 0 === Webhook execution successful\n// Code 4 === Webhook call failed. Error: DEADLINE_EXCEEDED.\n// Code 14 === Webhook call failed. Error: UNAVAILABLE.\nfunction fetchIntent(url) {\n  try {\n    // Make the first attempt to fetch intent\n    // Request #1\n    return fetch(url).then(req => req.json())\n  } catch (e) {\n    console.error(e)\n    return {}\n  }\n}\n\nexport class Client {\n  constructor(options) {\n    if (!options || !options.textUrl) {\n      throw new Error(\n        'Fulfillment URL is required to generate a conversation client'\n      )\n    }\n    this.textUrl = options.textUrl\n    this.eventUrl = options.eventUrl\n    this.uuid = uuidv4()\n  }\n\n  encodeQueryData = (data) => {\n    const params = []\n    for (const d in data) {\n      params.push(`${encodeURIComponent(d)}=${encodeURIComponent(data[d])}`)\n    }\n    return params.join('&')\n  }\n\n  textRequest = (query) => {\n    if (!query) {\n      throw new Error('Query should not be empty')\n    }\n    const params = {\n      query,\n      uuid: this.uuid,\n    }\n\n    const queryParams = this.encodeQueryData(params)\n    const url = `${this.textUrl}?${queryParams}`\n    return fetchIntent(url)\n  }\n\n  eventRequest = (query) => {\n    if (!query) {\n      throw new Error('Query should not be empty')\n    }\n\n    const params = {\n      query,\n      uuid: this.uuid,\n    }\n\n    const queryParams = this.encodeQueryData(params)\n    const url = `${this.eventUrl}?${queryParams}`\n\n    return fetchIntent(url)\n  }\n}\n","import { format, parse, differenceInMilliseconds } from 'date-fns'\nimport { v4 as uuidv4 } from 'uuid'\nimport get from 'lodash/get'\nimport find from 'lodash/find'\nimport omit from 'lodash/omit'\nimport {\n  SAVE_CLIENT,\n  SAVE_RESPONSE,\n  INITIATE_LOADING,\n  SHOW_BUTTON_BAR,\n  HIDE_BUTTON_BAR,\n  DISPLAY_ERROR,\n  CLEAR_ERROR,\n  RECEIVE_WEBHOOK_DATA,\n  DISABLE_INPUT,\n  ENABLE_INPUT,\n  SET_CONVERSATION_ENDED,\n  SET_OUTPUT_CONTEXTS\n} from './actionTypes'\n// Date Format\nimport { sysTimeFormat } from '../config/dateFormats'\n\nimport { Client } from '../conversationClient'\n\nexport function setupDialogflow(clientOptions) {\n  return dispatch => {\n    const client = new Client(clientOptions)\n    const clientName = 'dialogflow'\n    dispatch({ type: SAVE_CLIENT, client, clientName })\n  }\n}\n\nexport function saveResponse(data) {\n  return (dispatch, getState) => {\n    const { messages } = getState().conversation\n    const hasSuggestion = find(data.responses, ['type', 'suggestion'])\n\n    if (hasSuggestion) {\n      dispatch({ type: SHOW_BUTTON_BAR })\n    } else {\n      dispatch({ type: HIDE_BUTTON_BAR })\n    }\n    if (messages.length === 0) {\n      dispatch({ type: SAVE_RESPONSE, newConversationArray: [data] })\n    } else {\n      const newConversationArray = messages\n        .map(msg => {\n          return msg.loading ? data : msg\n        })\n        .sort((a, b) => {\n          const dateA = parse(\n            a.systemTime,\n            sysTimeFormat,\n            new Date(a.systemTime)\n          )\n          const dateB = parse(\n            b.systemTime,\n            sysTimeFormat,\n            new Date(b.systemTime)\n          )\n          const diff = differenceInMilliseconds(dateA, dateB)\n          return diff\n        })\n\n      dispatch({ type: SAVE_RESPONSE, newConversationArray })\n    }\n  }\n}\n\nexport function getMessageFromDialogflow(response) {\n  return dispatch => {\n    function mapMessageTypeToDescriptor(type) {\n      switch (type) {\n        case 'text':\n          return 'text'\n        case 'card':\n          return 'card'\n        case 'quickReplies':\n          return 'suggestion'\n        case 'image':\n          return 'image'\n        case 'payload':\n          return 'payload'\n        default:\n          return 'text'\n      }\n    }\n    const rawOutputContexts = get(response, 'queryResult.outputContexts', [])\n    dispatch({ type: SET_OUTPUT_CONTEXTS, rawOutputContexts })\n\n    const rawResponses = get(response, 'queryResult.fulfillmentMessages', [])\n    let unfilteredResponses = []\n    let containsDisablePayload = false\n    try {\n      unfilteredResponses = rawResponses.map(msg => {\n        const type = mapMessageTypeToDescriptor(msg.message)\n        const suggestions = get(msg, 'quickReplies.quickReplies', [])\n        const text = get(msg, 'text.text', null)\n        const card = {\n          title: get(msg, 'card.title', ''),\n          subtitle: get(msg, 'card.subtitle', ''),\n          imageUrl: get(msg, 'card.imageUri', ''),\n          buttons: get(msg, 'card.buttons', []),\n        }\n        const image = {\n          imageUri: get(msg, 'image.imageUri', ''),\n          accessibilityText: get(msg, 'image.accessibilityText', ''),\n        }\n\n        const payload = {}\n        if (type === 'payload') {\n          const rawPayload = get(msg, 'payload.fields', {})\n          for (const [field, data] of Object.entries(rawPayload)) {\n            if (data.kind === 'stringValue') {\n              try {\n                // Attempt to parse data.stringValue as JSON in case it is\n                payload[field] = JSON.parse(data.stringValue)\n              } catch (err) {\n                // It's not JSON, just add the string\n                payload[field] = data.stringValue\n              }\n            } else if (data.kind && data.kind !== 'stringValue') {\n              throw new Error('Use stringValue to send payloads')\n            } else {\n              return payload\n            }\n          }\n          // Check for disable input property\n          if ('disableInput' in payload) {\n            // If there is more than just a dispable input propert in the payload\n            // remove disableInput and handle the rest of the payload data\n            if (Object.keys(payload).length > 1) {\n              const modifiedPayload = omit(payload, ['disableInput'])\n              dispatch({ type: RECEIVE_WEBHOOK_DATA, modifiedPayload })\n            }\n            containsDisablePayload = true\n            dispatch({ type: DISABLE_INPUT })\n          } else {\n            dispatch({ type: RECEIVE_WEBHOOK_DATA, payload })\n          }\n        }\n\n        switch (type) {\n          case 'text':\n            return { type, text }\n\n          case 'image':\n            return { type, image }\n\n          case 'suggestion':\n            return { type, suggestions }\n\n          case 'card':\n            return { type, card }\n\n          case 'payload':\n            return { type, payload }\n\n          default:\n            return { type, text }\n        }\n      })\n    } catch (error) {\n      // TODO: log error to analytics\n      console.log(error)\n    }\n\n    let responses\n    if (containsDisablePayload) {\n      responses = unfilteredResponses.filter(response => {\n        const containsDisableInput = get(\n          response,\n          'payload.disableInput',\n          false\n        )\n        return !containsDisableInput\n      })\n    } else {\n      dispatch({ type: ENABLE_INPUT })\n      responses = unfilteredResponses\n    }\n    const systemTime = format(new Date(), sysTimeFormat)\n    const data = {\n      entity: 'bot',\n      loading: false,\n      messageId: response.responseId,\n      key: uuidv4(),\n      messageSession: response.session,\n      language: response.queryResult.languageCode,\n      systemTime,\n      responses,\n    }\n\n    dispatch(saveResponse(data))\n  }\n}\n\nconst constructEmptyResponse = (response) => ({\n  ...response,\n  queryResult: {\n    ...response.queryResult,\n    fulfillmentMessages: [{\n      message: '',\n      platform: 'PLATFORM_UNSPECIFIED',\n      text: {\n        text: ['']\n      }\n    }],\n    fulfillmentText: ''\n  }\n})\n\n// Code 0 === Webhook execution successful\n// Code 4 === Webhook call failed. Error: DEADLINE_EXCEEDED.\n// Code 14 === Webhook call failed. Error: UNAVAILABLE.\nconst sendDialogflowRequest = (requestFunction, payload) => {\n  try {\n    // Make the first attempt to fetch intent\n    // Request #1\n    return requestFunction(payload).then(response1 => {\n      // If response timed out, try again\n      if (response1.webhookStatus.code === 4) {\n        // Request #2\n        requestFunction(payload).then(response2 => {\n          const _response2 = response2.json()\n\n          // If the second response timed out, try one last time\n          if (_response2.webhookStatus.code === 4) {\n            // Request #3\n            requestFunction(payload).then(response3 => {\n              const _response3 = response3.json()\n\n              // The request has failed three times in a row. Something is wrong.\n              if (_response3.webhookStatus.code !== 0) {\n                // return a response that indicates there is an issue.\n                return constructEmptyResponse(_response3)\n              }\n\n              // Request 3 was successful. Return response.\n              return _response3\n            })\n\n            // If the second request had an error other than timeout,\n            // then we will not retry. Return error message.\n          } else if (_response2.webhookStatus.code !== 0) {\n            // return a response that indicates there is an issue.\n            return constructEmptyResponse(_response2)\n          }\n\n          // Request 2 was successful. Return response.\n          return _response2\n        })\n\n        // If the first request had an error other than timeout,\n        // then we will not retry. Return error message.\n      } else if (response1.webhookStatus.code !== 0) {\n        // return a response that indicates there is an issue.\n        return constructEmptyResponse(response1)\n      }\n\n      // Request 1 was successful. Return response.\n      return response1\n    })\n  } catch (e) {\n    console.error(e)\n    return {}\n  }\n}\n\n// Type must equal 'textRequest' or 'eventRequest'\nconst sendToDialogflow = (type, payload) => {\n  return (dispatch, getState) => {\n    const { client } = getState().conversation\n\n    dispatch({ type: INITIATE_LOADING })\n\n    sendDialogflowRequest(client[type], payload)\n      .then(response => {\n        if (response) {\n          dispatch(getMessageFromDialogflow(response))\n          dispatch({ type: CLEAR_ERROR })\n        } else {\n          dispatch({\n            type: DISPLAY_ERROR,\n            error: 'No response received from chat provider. Please try again.',\n          })\n\n          if (type === 'eventRequest') {\n            dispatch({ type: SET_CONVERSATION_ENDED })\n          }\n        }\n      })\n      .catch(error => {\n        throw new Error(error)\n      })\n      .catch(error => {\n        // TODO: log error to analytics\n        console.log(error)\n        dispatch({\n          type: DISPLAY_ERROR,\n          error: 'Unable to connect to the chat provider. Please try again.',\n        })\n      })\n  }\n}\n\nexport const sendMessageWithDialogflow = (message) => sendToDialogflow('textRequest', message)\n\nexport const sendEvent = (event) => sendToDialogflow('eventRequest', event)\n","export const SET_TITLE = 'SET_TITLE'\nexport const SET_AVATAR = 'SET_AVATAR'\nexport const SAVE_CLIENT = 'SAVE_CLIENT'\nexport const SAVE_RESPONSE = 'SAVE_RESPONSE'\nexport const SAVE_USER_INPUT = 'SAVE_USER_INPUT'\nexport const SAVE_USER_RESPONSE = 'SAVE_USER_RESPONSE'\nexport const INITIATE_LOADING = 'INITIATE_LOADING'\nexport const UPDATE_TIME = 'UPDATE_TIME'\nexport const TIMER_START = 'TIMER_START'\nexport const UPDATE_CURRENT_TIME = 'UPDATE_CURRENT_TIME'\nexport const SHOW_BUTTON_BAR = 'SHOW_BUTTON_BAR'\nexport const HIDE_BUTTON_BAR = 'HIDE_BUTTON_BAR'\nexport const CHANGE_SUGGESTION_PAGE = 'CHANGE_SUGGESTION_PAGE'\nexport const DISPLAY_ERROR = 'DISPLAY_ERROR'\nexport const CLEAR_ERROR = 'CLEAR_ERROR'\nexport const SHOW_WINDOW = 'SHOW_WINDOW'\nexport const HIDE_WINDOW = 'HIDE_WINDOW'\nexport const FULLSCREEN = 'FULLSCREEN'\nexport const WINDOWED = 'WINDOWED'\nexport const RECEIVE_WEBHOOK_DATA = 'RECEIVE_WEBHOOK_DATA'\nexport const DISABLE_INPUT = 'DISABLE_INPUT'\nexport const ENABLE_INPUT = 'ENABLE_INPUT'\nexport const SET_CONVERSATION_STARTED = 'SET_CONVERSATION_STARTED'\nexport const SET_CONVERSATION_ENDED = 'SET_CONVERSATION_ENDED'\nexport const SHOW_PRIVACY_POLICY = 'SHOW_PRIVACY_POLICY'\nexport const HIDE_PRIVACY_POLICY = 'HIDE_PRIVACY_POLICY'\nexport const SET_PRIVACY_POLICY = 'SET_PRIVACY_POLICY'\nexport const SET_GOOGLE_MAPS_KEY = 'SET_GOOGLE_MAPS_KEY'\nexport const SET_CENTER_COORDINATES = 'SET_CENTER_COORDINATES'\nexport const SET_ACTIVATION_TEXT = 'SET_ACTIVATION_TEXT'\nexport const SAVE_FEEDBACK_INPUT = 'SAVE_FEEDBACK_INPUT'\nexport const SET_FEEDBACK_URL = 'SET_FEEDBACK_URL'\nexport const SET_FEEDBACK_SUBMITTED = 'SET_FEEDBACK_SUBMITTED'\nexport const SET_FEEDBACK_OPTIONS = 'SET_FEEDBACK_OPTIONS'\nexport const SET_OUTPUT_CONTEXTS = 'SET_OUTPUT_CONTEXTS'\n","import { format } from 'date-fns'\nimport {\n  SAVE_USER_RESPONSE,\n  DISPLAY_ERROR,\n  HIDE_BUTTON_BAR,\n} from './actionTypes'\nimport { setupDialogflow, sendMessageWithDialogflow } from './dialogflow'\n// Date Format\nimport { sysTimeFormat } from '../config/dateFormats'\n\nexport function setupClient(client, clientOptions) {\n  return dispatch => {\n    try {\n      if (!client) {\n        throw new Error('No conversation provider selected.')\n      }\n      // Setup Dialogflow\n      if (client.toLowerCase() === 'dialogflow') {\n        dispatch(setupDialogflow(clientOptions))\n      } else {\n        // Unrecognized client\n        dispatch({\n          type: DISPLAY_ERROR,\n          error: `Unable to connect to ${client}`,\n        })\n        throw new Error(`${client} is not a recognized conversation provider.`)\n      }\n    } catch (error) {\n      // TODO: log error to analytics\n      console.log(error)\n    }\n  }\n}\nexport function sendMessage(message) {\n  return (dispatch, getState) => {\n    const { clientName } = getState().conversation\n    try {\n      if (clientName.toLowerCase() === 'dialogflow') {\n        dispatch(sendMessageWithDialogflow(message))\n      } else {\n        throw new Error(\n          `${clientName} is not a recognized conversation provider.`\n        )\n      }\n    } catch (error) {\n      // TODO: log error to analytics\n      console.log(error)\n      // Unrecognized client\n      dispatch({\n        type: DISPLAY_ERROR,\n        error: `Unable to connect to ${clientName}`,\n      })\n    }\n  }\n}\n\nexport function createUserResponse(text) {\n  return (dispatch, getState) => {\n    const numMessages = getState().conversation.messages.length\n    const systemTime = format(new Date(), sysTimeFormat)\n    const response = {\n      entity: 'user',\n      messageId: `usermessage-${numMessages}`,\n      systemTime,\n      text,\n    }\n    dispatch({ type: SAVE_USER_RESPONSE, response })\n    dispatch({ type: HIDE_BUTTON_BAR })\n    dispatch(sendMessage(text))\n  }\n}\n\nexport function sendQuickReply(text) {\n  return dispatch => {\n    dispatch(createUserResponse(text))\n  }\n}\n","import get from 'lodash/get'\nimport {\n  parse,\n  format,\n  differenceInMinutes,\n  differenceInSeconds,\n} from 'date-fns'\nimport {\n  SET_TITLE,\n  SET_AVATAR,\n  TIMER_START,\n  UPDATE_CURRENT_TIME,\n  SHOW_WINDOW,\n  HIDE_WINDOW,\n  FULLSCREEN,\n  WINDOWED,\n  SET_CONVERSATION_STARTED,\n  SHOW_PRIVACY_POLICY,\n  HIDE_PRIVACY_POLICY,\n  SET_PRIVACY_POLICY,\n  SET_GOOGLE_MAPS_KEY,\n  SET_CENTER_COORDINATES,\n  SET_ACTIVATION_TEXT,\n  SET_FEEDBACK_URL,\n} from './actionTypes'\n\nimport { sysTimeFormat } from '../config/dateFormats'\nimport { setupClient } from './conversation'\nimport { sendEvent } from './dialogflow'\nimport genbotAvatar from '../genbot_avatar.svg'\n\nexport function showWindow() {\n  return (dispatch, getState) => {\n    const { conversationStarted } = getState().conversation\n    dispatch({ type: SHOW_WINDOW })\n    if (!conversationStarted) {\n      dispatch(sendEvent('Welcome'))\n      dispatch({ type: SET_CONVERSATION_STARTED })\n    }\n  }\n}\nexport function showPrivacyPolicy() {\n  return { type: SHOW_PRIVACY_POLICY }\n}\nexport function hidePrivacyPolicy() {\n  return { type: HIDE_PRIVACY_POLICY }\n}\nexport function hideWindow() {\n  return { type: HIDE_WINDOW }\n}\nexport function showFullscreen() {\n  return { type: FULLSCREEN }\n}\nexport function showWindowed() {\n  return { type: WINDOWED }\n}\n\nfunction updateIdleTime() {\n  return (dispatch, getState) => {\n    const { lastUpdateTime } = getState().conversation\n    const now = new Date()\n    const lastUpdate = parse(\n      lastUpdateTime,\n      sysTimeFormat,\n      new Date(lastUpdateTime)\n    )\n    const diffMinutes = differenceInMinutes(now, lastUpdate)\n    const diffSeconds = differenceInSeconds(now, lastUpdate)\n    let headerTime = 'Now'\n    if (diffMinutes >= 1) {\n      headerTime = `${diffMinutes} min ago`\n    } else if (diffSeconds >= 9) {\n      headerTime = `${diffSeconds} sec ago`\n    }\n\n    const currentTime = format(now, sysTimeFormat)\n\n    dispatch({ type: UPDATE_CURRENT_TIME, headerTime, currentTime })\n  }\n}\n\nexport function startTimer() {\n  return (dispatch, getState) => {\n    const { timer } = getState().conversation\n    // If there's an existing timer, clear it\n    if (timer) {\n      clearInterval(timer)\n    }\n    // Create a new timer to tick every 10 seconds\n    const newTimer = setInterval(() => dispatch(updateIdleTime()), 1000 * 10)\n    // Save the new timer\n    dispatch({ type: TIMER_START, newTimer })\n    // Dispatch the first tick\n    dispatch(updateIdleTime())\n  }\n}\n\nexport function initialize(props) {\n  return dispatch => {\n    const {\n      title,\n      avatar,\n      client,\n      clientOptions,\n      initialActive,\n      fullscreen,\n      policyText,\n      mapConfig,\n      activationText,\n      feedbackUrl,\n    } = props\n    let userAvatar = avatar\n    if (!userAvatar) {\n      userAvatar = genbotAvatar\n    }\n    dispatch({ type: SET_TITLE, title })\n    dispatch({ type: SET_AVATAR, avatar: userAvatar })\n    dispatch(setupClient(client, clientOptions))\n    dispatch(startTimer())\n\n    if (policyText && policyText !== '') {\n      dispatch({ type: SET_PRIVACY_POLICY, policyText })\n    }\n\n    if (activationText && activationText !== '') {\n      dispatch({ type: SET_ACTIVATION_TEXT, activationText })\n    }\n\n    if (feedbackUrl) {\n      dispatch({ type: SET_FEEDBACK_URL, feedbackUrl })\n    }\n\n    if (mapConfig) {\n      const { googleMapsKey, centerCoordinates } = mapConfig\n      const latitude = get(centerCoordinates, 'lat', null)\n      const longitude = get(centerCoordinates, 'lng', null)\n\n      if (googleMapsKey && googleMapsKey !== '') {\n        dispatch({ type: SET_GOOGLE_MAPS_KEY, googleMapsKey })\n      }\n      if (centerCoordinates) {\n        try {\n          if (\n            typeof centerCoordinates === 'object' &&\n            latitude !== null &&\n            longitude !== null\n          ) {\n            dispatch({ type: SET_CENTER_COORDINATES, centerCoordinates })\n          } else {\n            throw new Error(\n              'Please provide valid latitude and longitude coordinates, see README'\n            )\n          }\n        } catch (error) {\n          // TODO: log error to analytics\n          console.log(error)\n        }\n      }\n    }\n\n    if (initialActive === true) {\n      dispatch({ type: SET_CONVERSATION_STARTED })\n      dispatch(sendEvent('Welcome'))\n      dispatch(showWindow())\n    } else {\n      dispatch(hideWindow())\n    }\n\n    if (fullscreen === true) {\n      dispatch(showFullscreen())\n    } else {\n      dispatch(showWindowed())\n    }\n  }\n}\n","export default \"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4KPCEtLSBHZW5lcmF0b3I6IEFkb2JlIElsbHVzdHJhdG9yIDIzLjAuNCwgU1ZHIEV4cG9ydCBQbHVnLUluIC4gU1ZHIFZlcnNpb246IDYuMDAgQnVpbGQgMCkgIC0tPgo8c3ZnIHZlcnNpb249IjEuMSIgaWQ9IkxheWVyXzEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHg9IjBweCIgeT0iMHB4IgoJIHZpZXdCb3g9IjAgMCAyNTkyIDE3MjgiIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDI1OTIgMTcyODsiIHhtbDpzcGFjZT0icHJlc2VydmUiPgo8c3R5bGUgdHlwZT0idGV4dC9jc3MiPgoJLnN0MHtmaWxsOiNGQkRCMzI7c3Ryb2tlOiNGQURBMzI7fQoJLnN0MXtmaWxsOiNENDczOTQ7fQoJLnN0MntzdHJva2U6I0ZBREEzMjt9Cjwvc3R5bGU+CjxnPgoJPHBhdGggY2xhc3M9InN0MCIgZD0iTTE4MTQuMjMsMTMzNmMzMC4yNC00Mi45LDU1LjQ5LTg4LjgsNzUuNDItMTM2LjgyYzM1LjY5LTg1Ljk5LDU0LjM1LTE3OC43NSw1NC4yLTI3My4wOQoJCWMtMC4yOC0zOTMuNTktMzE5LjI0LTcxMi42LTcxMi44My03MTIuOTRjLTE1OS4wNiwwLTMwNS45NCw1Mi4wOS00MjQuNTMsMTQwLjE1QzY2OS40Myw0ODAuNDEsNTgzLjY1LDY2Mi4wNSw1ODMuNjUsODYzLjcyCgkJYzAsMzg0LjM5LDMxMS42MSw2OTUuOTksNjk1Ljk5LDY5NS45OWMxMTAuOTcsMC4wOSwyMjAuMzQtMjYuMzksMzE4Ljk4LTc3LjIyYzQuMjgtMi4yMSw4Ljc5LTMuOTQsMTMuNDYtNS4xN2wyMi4xNS01LjgyCgkJYzE3LjgxLTQuNjgsMzYuNzYtMS42Nyw1Mi4yNCw4LjNsMTEuODgsNy42NWMyMi43NiwxMC4zNCw0Ni45MSwxNy4yOSw3MS42OSwyMC42MmMyMC4yNSwzLjA5LDQwLjU4LDUuNTIsNjAuOTgsNy4zCgkJYzEwLjA4LDAuODgsMjAuMTcsMS42LDMwLjI4LDIuMTdjMjYuMjIsMS4yNyw2MC43MSwwLjE3LDg2LjYxLTIuODVjLTMyLjQtMjIuNy04Ny42Ny03My43My0xMDkuNjEtMTEyLjYybC0xOC4wMi0zNy4zNgoJCUMxODE2LjEsMTM1NS42NSwxODE0LjA2LDEzNDUuODQsMTgxNC4yMywxMzM2eiIvPgoJPHBhdGggZD0iTTExMTUuNDYsNTk1LjQ5YzIuMzMtMjIuNjgtNC42NS00MS4zNi0yNC41Ny01My41NmMtNDIuNDUtMjMuMTUtOTcuMjEsMC42Ny05MS43Nyw1My41NmMwLDI2LjU5LDAsNTMuMTgsMCw3OS43OAoJCWMtNS40NCw1Mi44OSw0OS4zMSw3Ni43MSw5MS43Nyw1My41NmMxOS45Mi0xMi4yLDI2LjkxLTMwLjg4LDI0LjU3LTUzLjU2QzExMTUuNDYsNjQ4LjY3LDExMTUuNDYsNjIyLjA4LDExMTUuNDYsNTk1LjQ5eiIvPgoJPHBhdGggZD0iTTE1NjEuMjUsNTk1LjQ5YzIuMzMtMjIuNjgtNC42NS00MS4zNi0yNC41Ny01My41NmMtNDIuNDUtMjMuMTUtOTcuMjEsMC42Ny05MS43Nyw1My41NmMwLDI2LjU5LDAsNTMuMTgsMCw3OS43OAoJCWMtNS40NCw1Mi44OSw0OS4zMSw3Ni43MSw5MS43Nyw1My41NmMxOS45Mi0xMi4yLDI2LjkxLTMwLjg4LDI0LjU3LTUzLjU2QzE1NjEuMjUsNjQ4LjY3LDE1NjEuMjUsNjIyLjA4LDE1NjEuMjUsNTk1LjQ5eiIvPgoJPHBhdGggY2xhc3M9InN0MSIgZD0iTTEyMDguOTksOTYzLjE2YzIwLjkzLDEwLjI2LDQ0LjQ2LDE2LjAzLDY5LjM0LDE2LjAzYzI0Ljg4LDAsNDguNDItNS43Niw2OS4zNC0xNi4wMwoJCWMtNy45NS0zMC44OC0zNS45OC01My42OS02OS4zNC01My42OVMxMjE2Ljk0LDkzMi4yOCwxMjA4Ljk5LDk2My4xNnoiLz4KCTxwYXRoIGQ9Ik0xMjA4Ljk5LDk2My4xNmM3Ljk1LTMwLjg4LDM1Ljk4LTUzLjY5LDY5LjM0LTUzLjY5czYxLjM5LDIyLjgxLDY5LjM0LDUzLjY5YzUyLjMxLTI1LjY2LDg4LjMyLTc5LjQ0LDg4LjMzLTE0MS42MwoJCWgtMzE1LjM0QzExMjAuNjcsODgzLjcyLDExNTYuNjgsOTM3LjUsMTIwOC45OSw5NjMuMTZ6Ii8+Cgk8cGF0aCBjbGFzcz0ic3QyIiBkPSJNMTgwNi4zOCw0MDYuNjNjMTA2LjY3LDEyMi4yOSwxNzEuMzIsMjgyLjE5LDE3MS40NCw0NTcuMTljMC4yNCwxNTQuNDUtNTEuMTQsMzA0LjU1LTE0NS45OSw0MjYuNDUKCQljLTYuNyw5LjM5LTExLjMzLDIwLjA5LTEzLjU4LDMxLjRjLTMuNDksMTQuNC0yLDI5LjU2LDQuMjEsNDMuMDJsMTguMDIsMzcuMzZjMjEuOTQsMzguODksNzcuMjEsODkuOTIsMTA5LjYxLDExMi42MgoJCWMtMjUuOSwzLjAyLTYwLjM5LDQuMTItODYuNjEsMi44NWMtMzAuNTUtMS43LTYxLjAxLTQuODYtOTEuMjYtOS40N2MtMjQuNzgtMy4zMy00OC45My0xMC4yOC03MS42OS0yMC42MmwtMTEuODgtNy42NQoJCWMtMTUuNDgtOS45Ni0zNC40NC0xMi45Ny01Mi4yNC04LjNsLTIyLjE1LDUuODJjLTQuNjYsMS4yMi05LjE3LDIuOTYtMTMuNDYsNS4xN2MtOTguNjQsNTAuODMtMjA4LjAyLDc3LjMxLTMxOC45OCw3Ny4yMgoJCWMtMzg0LjM5LDAtNjk1Ljk5LTMxMS42MS02OTUuOTktNjk1Ljk5czMxMS42MS02OTUuOTksNjk1Ljk5LTY5NS45OWM3MC4zNywwLjA2LDEzOC4zLDEwLjU1LDIwMi4zMywzMC4wMgoJCWM1NS4xMyw2LjQxLDUzLjI5LTUzLjcsMjQuNDYtNjEuMzljLTcxLjY0LTIyLjMxLTE0Ny44MS0zNC4zMy0yMjYuNzktMzQuMzNjLTQyMC42NywwLTc2MS42OSwzNDEuMDItNzYxLjY5LDc2MS42OQoJCXMzNDEuMDIsNzYxLjY5LDc2MS42OSw3NjEuNjljMTI1Ljg0LDAsMjQ0LjU0LTMwLjUxLDM0OS4xMy04NC41NWM4LjQzLTIuNjIsMTUuMy00LjYzLDIyLjE1LTUuODJjNC45NywzLjY1LDEwLjIxLDcsMTUuNjcsMTAuMDgKCQljNzEuNDQsNDAuMjYsMzIyLjk0LDYxLjc2LDM4OS42My0wLjQyYzE5LjY4LTEyLjc3LDI1LjAxLTMwLjkzLTE3LjczLTU1LjY3Yy01Ljc4LTMuMzQtMTIuMzktNi43MS0xOS44Ni0xMC4wNwoJCWMtMjcuODYtMTIuNTMtMjkuMDgtMTUuMjEtNTMuMDItMzQuNDljLTI0Ljc1LTE5Ljk0LTQ3LjE2LTQwLjU3LTcyLjI5LTc4LjMzYy00LTguNi04LjQ0LTE4LjItMTMuNDEtMjkuMDIKCQljMC40OS0yLjE0LDEuMDItNC4zMSwxLjU4LTYuNTJjMTAwLjE4LTEyOC45NSwxNTkuODQtMjkwLjk2LDE1OS44NC00NjYuOWMwLTE5Ni44Ni03NC42OC0zNzYuMjgtMTk3LjI2LTUxMS40NwoJCUMxODA5LjA1LDMyMC4yNCwxNzYwLjExLDM2MS45LDE4MDYuMzgsNDA2LjYzeiIvPgoJPHBhdGggY2xhc3M9InN0MiIgZD0iTTE3MTEuNTMsMjM0LjcxYy0xOS4yNC0xMy4xNy0zOS4xMS0yNS40Ny01OS41Ni0zNi44NmMtMzMuOS0xOC44OC01Ni44MSw0My45LTMzLjcsNTYuNwoJCWMxNy42NSw5Ljc4LDM0Ljg0LDIwLjMsNTEuNTEsMzEuNTJDMTcwMy4yOSwzMDguNjMsMTc0Ny43NywyNTkuNTIsMTcxMS41MywyMzQuNzF6Ii8+CjwvZz4KPC9zdmc+Cg==\"","import React, { PureComponent } from 'react'\nimport styled from 'styled-components'\nimport Fab from '@material-ui/core/Fab'\nimport Chat from '@material-ui/icons/Chat'\nimport Zoom from '@material-ui/core/Zoom'\nimport { withTheme } from '@material-ui/core/styles'\nimport Avatar from '@material-ui/core/Avatar'\n\n// Redux\nimport { connect } from 'react-redux'\nimport { showWindow } from './actions/initialization'\n\nconst Btn = styled(Fab)`\n  && {\n    display: ${p => (p.active ? 'flex' : 'none')};\n    pointer-events: auto;\n    width: ${p => (p.activationtext ? 'auto' : '56px')};\n    height: ${p => (p.activationtext ? 'auto' : '56px')};\n    padding: ${p => (p.activationtext ? '4px 6px' : 'auto')};\n    border-radius: ${p => (p.activationtext ? '20px' : '50%')};\n  }\n`\n\nconst TextContainer = styled.div`\n  text-transform: none;\n  padding-right: 10px;\n  color: ${p => p.theme.palette.getContrastText(p.theme.palette.primary.dark)};\n`\n\nconst BotAvatar = styled(Avatar)`\n  && {\n    width: 32px;\n    height: 32px;\n    margin-right: 10px;\n    border-radius: 50% 50% 0px 50%;\n  }\n`\n\nclass ActivatorButton extends PureComponent {\n  render() {\n    const {\n      title,\n      windowVisible,\n      showWindow,\n      activationText,\n      theme,\n      avatar,\n    } = this.props\n\n    const contentToDisplay = activationText ? (\n      <>\n        <BotAvatar alt={title} src={avatar} />\n        <TextContainer theme={theme}>{activationText}</TextContainer>\n      </>\n    ) : <Chat />\n\n    return (\n      <Zoom in={!windowVisible} unmountOnExit>\n        <Btn\n          color='primary'\n          onClick={showWindow}\n          active={windowVisible ? 0 : 1}\n          activationtext={activationText ? 1 : 0}\n        >\n          {contentToDisplay}\n        </Btn>\n      </Zoom>\n    )\n  }\n}\n\nconst mapStateToProps = state => {\n  return {\n    title: state.config.title,\n    windowVisible: state.config.windowVisible,\n    activationText: state.config.activationText,\n    avatar: state.config.avatar,\n  }\n}\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    showWindow: () => {\n      dispatch(showWindow())\n    },\n  }\n}\n\nexport default withTheme()(\n  connect(\n    mapStateToProps,\n    mapDispatchToProps\n  )(ActivatorButton)\n)\n","import React, { PureComponent } from 'react'\nimport { connect } from 'react-redux'\nimport { withTheme } from '@material-ui/core/styles'\nimport Typography from '@material-ui/core/Typography'\nimport Fullscreen from '@material-ui/icons/Fullscreen'\nimport FullscreenExit from '@material-ui/icons/FullscreenExit'\nimport Info from '@material-ui/icons/Info'\nimport Avatar from '@material-ui/core/Avatar'\nimport IconButton from '@material-ui/core/IconButton'\nimport Close from '@material-ui/icons/Close'\nimport styled from 'styled-components'\nimport Tooltip from '@material-ui/core/Tooltip'\nimport Button from '@material-ui/core/Button'\nimport { findLast, find } from 'lodash'\nimport { sendQuickReply } from './actions/conversation'\n\nimport {\n  hideWindow,\n  showFullscreen,\n  showWindowed,\n  showPrivacyPolicy,\n} from './actions/initialization'\n\nconst BotAvatar = styled(Avatar)`\n  && {\n    flex: 0 0 32px;\n    width: 32px;\n    height: 32px;\n    margin-right: 16px;\n    border-radius: 50% 50% 0px 50%;\n  }\n`\n\nconst Container = styled.div`\n  && {\n    position: relative;\n    background: ${p => p.theme.palette.header.main};\n    padding: 6px;\n    height: 32px;\n    display: flex;\n    flex-flow: row nowrap;\n    align-items: center;\n    border-bottom-left-radius: 0px;\n    border-bottom-right-radius: 0px;\n    border-top-right-radius: 4px;\n    border-top-left-radius: 4px;\n    z-index: 1;\n    grid-area: header;\n    box-sizing: content-box; /*For WordPress*/\n    line-height: normal; /*For WordPress*/\n  }\n`\n\nconst HeaderText = styled(Typography)`\n  && {\n    font-family: 'Product Sans';\n    font-weight: 400;\n    height: 32px;\n    font-size: 18px;\n    line-height: 32px;\n    flex: 1;\n    color: ${p => p.theme.palette.getContrastText(p.theme.palette.primary.dark)};\n  }\n`\n\nconst HeaderButton = styled(IconButton)`\n  && {\n    padding: 6px;\n    flex: 0;\n    cursor: pointer;\n    color: ${p => p.theme.palette.getContrastText(p.theme.palette.primary.dark)};\n    &:hover {\n      background: rgba(255, 255, 255, 0.15);\n    }\n  }\n`\n\nconst StartOverButton = styled(Button)`\n  && {\n    font-size: 12px;\n    font-weight: lighter;\n    flex: 0;\n    cursor: pointer;\n    min-width: 85px;\n    padding: 1px;\n    border-radius: 10px;\n    border: 1px solid ${p => p.theme.palette.getContrastText(p.theme.palette.primary.dark)};\n    color: ${p => p.theme.palette.getContrastText(p.theme.palette.primary.dark)};\n    &:hover {\n      background: rgba(255, 255, 255, 0.15);\n    }\n  }\n`\n\nclass Header extends PureComponent {\n  render() {\n    const {\n      title,\n      theme,\n      hideWindow,\n      showWindowed,\n      showFullscreen,\n      fullscreen,\n      avatar,\n      showPrivacyPolicy,\n      sendQuickReply,\n      messages\n    } = this.props\n\n    const lastMessageWithSuggestions = findLast(messages, m => {\n      const hasSuggestions = find(m.responses, ['type', 'suggestion'])\n      return hasSuggestions\n    })\n\n    let startOverButtonLabel = null\n\n    if (lastMessageWithSuggestions) {\n      const { suggestions } = lastMessageWithSuggestions.responses.filter(m => m.type === 'suggestion')[0]\n\n      // We search for it and use it instead of hard coding because we want\n      // to persist the casing that we get back from server\n      // The 'start over' and 'home' buttons are essentially the same,\n      // but which we receive is dependent on the back end version, so we check for both.\n      startOverButtonLabel = find(suggestions, x => x.toLowerCase() === 'home' || x.toLowerCase() === 'start over')\n    }\n\n    return (\n      <Container theme={theme}>\n        <BotAvatar alt={title} src={avatar} />\n        <HeaderText theme={theme} variant='h6'>\n          {title}\n        </HeaderText>\n        {startOverButtonLabel && (\n          <Tooltip title='Return to subject selection' placement='bottom'>\n            <StartOverButton\n              theme={theme}\n              onClick={() => sendQuickReply('START OVER')}\n            >\n              Start Over\n            </StartOverButton>\n          </Tooltip>\n        )}\n        <Tooltip title='Privacy Policy' placement='bottom'>\n          <HeaderButton\n            theme={theme}\n            onClick={showPrivacyPolicy}\n            aria-label='Windowed'\n          >\n            <Info fontSize='small' />\n          </HeaderButton>\n        </Tooltip>\n        {fullscreen ? (\n          <HeaderButton\n            theme={theme}\n            onClick={showWindowed}\n            aria-label='Windowed'\n          >\n            <FullscreenExit fontSize='small' />\n          </HeaderButton>\n        ) :\n          (\n            <HeaderButton\n              theme={theme}\n              onClick={(e) => {\n                console.log('maximize clicked')\n                showFullscreen(e)\n              }}\n              aria-label='Fullscreen'\n            >\n              <Fullscreen fontSize='small' />\n            </HeaderButton>\n          )}\n        <HeaderButton theme={theme} onClick={hideWindow} aria-label='Close'>\n          <Close fontSize='small' />\n        </HeaderButton>\n      </Container>\n    )\n  }\n}\n\nconst mapStateToProps = state => {\n  return {\n    title: state.config.title,\n    fullscreen: state.config.fullscreen,\n    avatar: state.config.avatar,\n    messages: state.conversation.messages\n  }\n}\n\nconst mapDispatchToProps = dispatch => ({\n  hideWindow: () => dispatch(hideWindow()),\n  showFullscreen: () => dispatch(showFullscreen()),\n  showWindowed: () => dispatch(showWindowed()),\n  showPrivacyPolicy: () => dispatch(showPrivacyPolicy()),\n  sendQuickReply: text => dispatch(sendQuickReply(text))\n})\n\nexport default withTheme()(\n  connect(\n    mapStateToProps,\n    mapDispatchToProps\n  )(Header)\n)\n","import React, { PureComponent } from 'react'\nimport { connect } from 'react-redux'\nimport DialogTitle from '@material-ui/core/DialogTitle'\nimport Dialog from '@material-ui/core/Dialog'\nimport DialogActions from '@material-ui/core/DialogActions'\nimport DialogContent from '@material-ui/core/DialogContent'\nimport DialogContentText from '@material-ui/core/DialogContentText'\nimport Button from '@material-ui/core/Button'\nimport styled from 'styled-components'\nimport { hidePrivacyPolicy } from './actions/initialization'\n\nconst StyledDialog = styled(Dialog)`\n  && {\n    position: absolute;\n  }\n`\n\nclass PrivacyPolicy extends PureComponent {\n  render() {\n    const {\n      hidePrivacyPolicy,\n      privacyPolicyVisible,\n      privacyPolicy,\n      parentRef,\n    } = this.props\n    return (\n      <StyledDialog\n        open={privacyPolicyVisible}\n        onClose={hidePrivacyPolicy}\n        aria-labelledby=\"privacy-policy\"\n        container={parentRef}\n        scroll=\"paper\"\n      >\n        <DialogTitle>Privacy Statement</DialogTitle>\n        <DialogContent>\n          <DialogContentText>{privacyPolicy}</DialogContentText>\n        </DialogContent>\n        <DialogActions>\n          <Button onClick={hidePrivacyPolicy} color=\"primary\">\n            Close\n          </Button>\n        </DialogActions>\n      </StyledDialog>\n    )\n  }\n}\n\nconst mapStateToProps = state => {\n  return {\n    privacyPolicyVisible: state.config.privacyPolicyVisible,\n    privacyPolicy: state.config.privacyPolicy,\n  }\n}\n\nconst mapDispatchToProps = {\n  hidePrivacyPolicy,\n}\n\nexport default connect(\n  mapStateToProps,\n  mapDispatchToProps\n)(PrivacyPolicy)\n","import React, { PureComponent } from 'react'\nimport styled from 'styled-components'\n\n// Colors\nimport green from '@material-ui/core/colors/green'\n\nconst Container = styled.div`\n  text-align: center;\n  width: 42px;\n  height: 100%;\n  display: flex;\n  flex-flow: row nowrap;\n  justify-content: space-around;\n  align-items: center;\n`\n\nconst Dot = styled.div`\n  animation: dot-keyframes 1s infinite ease-in-out;\n  background-color: ${green[900]};\n  border-radius: 10px;\n  display: inline-block;\n  height: 8px;\n  width: 8px;\n\n  &:nth-child(2) {\n    animation-delay: 0.25s;\n  }\n\n  &:nth-child(3) {\n    animation-delay: 0.5s;\n  }\n\n  @keyframes dot-keyframes {\n    0% {\n      opacity: 0.4;\n      transform: scale(1, 1);\n    }\n\n    50% {\n      opacity: 1;\n      transform: scale(1.3, 1.3);\n    }\n\n    100% {\n      opacity: 0.4;\n      transform: scale(1, 1);\n    }\n  }\n`\n\nclass Loading extends PureComponent {\n  render() {\n    return (\n      <Container>\n        <Dot />\n        <Dot />\n        <Dot />\n      </Container>\n    )\n  }\n}\n\nexport default Loading\n","import React, { Component } from 'react'\nimport { connect } from 'react-redux'\nimport styled from 'styled-components'\nimport { parse, format, isSameDay, subDays } from 'date-fns'\nimport grey from '@material-ui/core/colors/grey'\nimport Typography from '@material-ui/core/Typography'\nimport Markdown from 'markdown-to-jsx'\nimport Link from '@material-ui/core/Link'\nimport { withTheme } from '@material-ui/core/styles'\nimport { sysTimeFormat } from './config/dateFormats'\nimport Loading from './Loading'\n\nconst Container = styled.div`\n  display: flex;\n  flex-flow: column nowrap;\n  margin: 10px;\n  height: min-content;\n  align-items: ${p => (p.entity === 'user' ? 'flex-end' : 'flex-start')};\n  scroll-margin: 15px;\n  p, div {\n    font-size: 14px;\n  }\n`\n\nconst ChatBubble = styled.div`\n  width: 100%;\n  display: flex;\n  flex-flow: row nowrap;\n  padding: 0;\n  justify-content: ${p => (p.entity === 'user' ? 'flex-end' : 'flex-start')};\n`\n\nconst ExternalMessage = styled.div`\n  && {\n    background: ${grey[400]};\n    border-top-right-radius: 10px;\n    border-top-left-radius: 1px;\n    border-bottom-right-radius: 10px;\n    border-bottom-left-radius: 10px;\n    padding: 9px;\n  }\n`\n\nconst UserMessage = styled.div`\n  && {\n    max-width: 360px;\n    overflow: hidden;\n    background-color: ${p => p.theme.palette.primary.main};\n    color: #ffffff;\n    border-top-left-radius: 10px;\n    border-top-right-radius: 1px;\n    border-bottom-right-radius: 10px;\n    border-bottom-left-radius: 10px;\n    padding: 9px;\n  }\n`\n\nconst Timestamp = styled(Typography)`\n  && {\n    color: ${grey[500]};\n    margin-top: 6px;\n    padding-left: 5px;\n    padding-right: 2px;\n  }\n`\n\nconst markdownOptions = {\n  forceBlock: true,\n  overrides: {\n    h6: {\n      component: Typography,\n      props: {\n        variant: 'h6',\n      },\n    },\n    p: {\n      component: Typography,\n      props: {\n        variant: 'body1',\n      },\n    },\n    a: {\n      component: Link,\n    },\n  },\n}\n\nclass Message extends Component {\n  state = { isResponseDelayed: false }\n\n  componentDidMount() {\n    const { isLoading } = this.props\n\n    if (isLoading) {\n      this.loadingTimer = setTimeout(() => {\n        this.setState(() => ({ isResponseDelayed: true }))\n      }, 8000)\n    }\n  }\n\n  componentWillUnmount() {\n    clearTimeout(this.loadingTimer)\n  }\n\n  render() {\n    const {\n      message,\n      entity,\n      isLoading,\n      timestamp,\n      currentTime,\n      theme,\n      showTimestamp,\n      error,\n      className,\n      key\n    } = this.props\n\n    const { isResponseDelayed } = this.state\n\n    const parsedTimestamp = parse(\n      timestamp,\n      sysTimeFormat,\n      new Date(currentTime)\n    )\n    const isToday = isSameDay(new Date(), parsedTimestamp)\n    const isYesterday = isSameDay(parsedTimestamp, subDays(new Date(), 1))\n\n    let formattedTimestamp = null\n\n    if (isToday) {\n      formattedTimestamp = `Today ${format(parsedTimestamp, 'h:mm aa')}`\n    } else if (isYesterday) {\n      formattedTimestamp = `Yesterday ${format(parsedTimestamp, 'h:mm aa')}`\n    } else {\n      formattedTimestamp = format(parsedTimestamp, 'MMMM dd, yyyy h:mm aa')\n    }\n\n    let filteredBotMessage\n\n    if (message && message[0] !== '') {\n      filteredBotMessage = message\n    } else {\n      filteredBotMessage = [\n        'Im sorry, I am having trouble understanding that question right now. Please try again later or ask me something else.',\n      ]\n    }\n    const delayedResponseMessage = 'Thank you for your patience, Im working hard to get you the best answer. Hold tight!'\n\n    return (\n      <Container entity={entity} className={className} key={key}>\n        <ChatBubble entity={entity}>\n          {entity === 'user' &&\n            (\n              <UserMessage elevation={1} theme={theme}>\n                {message}\n              </UserMessage>\n            )}\n          {entity !== 'user' &&\n            (\n              <ExternalMessage elevation={1}>\n                {isLoading && !error && !isResponseDelayed && <Loading />}\n                {isLoading && !error && isResponseDelayed && (\n                  <Markdown options={markdownOptions}>\n                    {delayedResponseMessage}\n                  </Markdown>\n                )}\n                {isLoading && error && error}\n                {!isLoading && (\n                  <Markdown options={markdownOptions}>\n                    {filteredBotMessage[0]}\n                  </Markdown>\n                )}\n              </ExternalMessage>\n            )}\n        </ChatBubble>\n        {showTimestamp ? (\n          <Timestamp variant='caption'>{formattedTimestamp}</Timestamp>\n        ) : null}\n      </Container>\n    )\n  }\n}\n\nconst mapStateToProps = state => {\n  return {\n    currentTime: state.conversation.currentTime,\n    error: state.error,\n  }\n}\nexport default withTheme()(connect(mapStateToProps)(Message))\n","import React, { PureComponent } from 'react'\nimport { connect } from 'react-redux'\nimport Card from '@material-ui/core/Card'\nimport CardActions from '@material-ui/core/CardActions'\nimport CardContent from '@material-ui/core/CardContent'\nimport CardMedia from '@material-ui/core/CardMedia'\nimport Markdown from 'markdown-to-jsx'\nimport Link from '@material-ui/core/Link'\nimport Button from '@material-ui/core/Button'\nimport Typography from '@material-ui/core/Typography'\nimport styled from 'styled-components'\nimport { format } from 'date-fns'\n\n// Date Format\nimport { sysTimeFormat } from './config/dateFormats'\n\nconst CardContainer = styled(Card)`\n  && {\n    border-top-left-radius: 10px;\n    border-top-right-radius: 10px;\n    border-bottom-right-radius: 10px;\n    border-bottom-left-radius: 10px;\n    background: #fff;\n    margin: 15px 16px 15px 16px;\n    white-space: pre-line;\n    scroll-margin: 15px;\n  }\n`\n\nconst CardImage = styled(CardMedia)`\n  && {\n    height: ${p => (p.image && p.image !== '' ? '200px' : '0px')};\n    background-size: cover;\n    background-position: center center;\n  }\n`\n\nclass CardResponse extends PureComponent {\n  render() {\n    const { title, subtitle, imageUrl, buttons, className } = this.props.data\n    return (\n      <CardContainer className={className} key={this.props.key}>\n        {imageUrl ? <CardImage image={encodeURI(imageUrl)} title='' /> : null}\n        <CardContent>\n          <Typography gutterBottom variant=\"h6\">\n            {title}\n          </Typography>\n          <Markdown\n            options={{\n              forceBlock: true,\n              overrides: {\n                h6: {\n                  component: Typography,\n                  props: {\n                    variant: 'h6',\n                  },\n                },\n                p: {\n                  component: Typography,\n                  props: {\n                    variant: 'body1',\n                  },\n                },\n                a: {\n                  component: Link,\n                },\n              },\n            }}\n          >\n            {subtitle}\n          </Markdown>\n        </CardContent>\n        <CardActions>\n          {buttons.map((b, index) => {\n            const cardKey = `card-${index}${format(new Date(), sysTimeFormat)}`\n            return (\n              <Button\n                href={b.postback}\n                target=\"_blank\"\n                size=\"small\"\n                color=\"primary\"\n                key={cardKey}\n              >\n                {b.text}\n              </Button>\n            )\n          })}\n        </CardActions>\n      </CardContainer>\n    )\n  }\n}\n\nconst mapStateToProps = state => {\n  return {\n    inputValue: state.userInput,\n  }\n}\n\nexport default connect(mapStateToProps)(CardResponse)\n","import React from 'react'\nimport { connect } from 'react-redux'\nimport Card from '@material-ui/core/Card'\nimport CardHeader from '@material-ui/core/CardHeader'\nimport CardContent from '@material-ui/core/CardContent'\nimport Table from '@material-ui/core/Table'\nimport TableBody from '@material-ui/core/TableBody'\nimport TableCell from '@material-ui/core/TableCell'\nimport TableRow from '@material-ui/core/TableRow'\nimport Typography from '@material-ui/core/Typography'\nimport Link from '@material-ui/core/Link'\n\nimport styled from 'styled-components'\nimport {\n  withScriptjs,\n  withGoogleMap,\n  GoogleMap,\n  Marker,\n} from 'react-google-maps'\nimport pin from './pin.svg'\nimport personPin from './person-pin.svg'\n\nconst CardContainer = styled(Card)`\n  && {\n    border-top-left-radius: 10px;\n    border-top-right-radius: 10px;\n    border-bottom-right-radius: 10px;\n    border-bottom-left-radius: 10px;\n    background: #fff;\n    margin: 15px 16px 15px 16px;\n    white-space: pre-line;\n    scroll-margin: 15px;\n  }\n`\n\nconst TableContainer = styled.div`\n  height: 150px;\n  font-size: 14px;\n  margin-top: 10px;\n`\n\nconst StyledCardContent = styled(CardContent)`\n  &&& {\n    padding-top: 0;\n    padding-bottom: 0;\n  }\n`\n\nconst StyledTableBody = styled(TableBody)`\n  td {\n    padding: 4px 0px 4px 0px;\n  }\n  tr:last-of-type {\n    td {\n      border-bottom: none;\n    }\n  }\n`\n\nconst StyledAddressTableCell = styled(TableCell)`\n  && {\n    width: 70%;\n    padding: 4px 0px 4px 0px;\n  }\n`\n\nconst StyledDistanceTableCell = styled(TableCell)`\n  &&& {\n    width: 20%;\n    padding-right: 0;\n    text-align: right;\n  }\n`\n\n// Maps documentation: https://tomchentw.github.io/react-google-maps\nfunction MapResponse(props) {\n  const { data, googleMapsKey, className, key } = props\n  const cardHeight = '230px'\n  const iconSize = { width: 30, height: 30 }\n  const googleMapsUrl = `https://maps.googleapis.com/maps/api/js?key=${googleMapsKey}&v=3`\n  const handleMarkerClick = location => {\n    const url = `https://www.google.com/maps/search/?api=1&query=Google&query_place_id=${\n      location.placeId\n      }`\n    window.open(url, '_blank')\n  }\n\n  const Map = withScriptjs(\n    withGoogleMap(() => (\n      <GoogleMap\n        defaultZoom={8}\n        defaultCenter={data.nearestLocations[0]}\n        defaultOptions={{\n          zoomControl: true,\n          mapTypeControl: false,\n          streetViewControl: false,\n          fullscreenControl: false,\n        }}\n      >\n        {data.locations.map((row, i) => (\n          <Marker\n            key={i}\n            position={{ lat: row.lat, lng: row.lng }}\n            icon={{\n              url: pin,\n              scaledSize: iconSize,\n            }}\n            onClick={() => handleMarkerClick(row)}\n          />\n        ))}\n        <Marker\n          position={{\n            lat: data.currentGeocode.lat,\n            lng: data.currentGeocode.lng,\n          }}\n          icon={{\n            url: personPin,\n            scaledSize: iconSize,\n          }}\n        />\n      </GoogleMap>\n    ))\n  )\n\n  return (\n    <CardContainer className={className} key={key}>\n      <CardHeader title='Office Locations' titleTypographyProps={{ variant: 'h6' }} />\n      <StyledCardContent>\n        <Map\n          googleMapURL={googleMapsUrl}\n          loadingElement={<div style={{ height: `${cardHeight}` }} />}\n          containerElement={<div style={{ height: `${cardHeight}` }} />}\n          mapElement={<div style={{ height: '100%' }} />}\n        />\n        <TableContainer>\n          <Table padding='dense'>\n            <StyledTableBody>\n              {data.nearestLocations.map((row, i) => (\n                <TableRow key={i}>\n                  <StyledAddressTableCell padding='dense'>\n                    <Typography>\n                      <Link\n                        href={`https://www.google.com/maps/search/?api=1&query=Google&query_place_id=${\n                          row.placeId\n                          }`}\n                        target='blank'\n                      >\n                        {row.street}\n                        ,\n                        {row.city}\n                      </Link>\n                    </Typography>\n                  </StyledAddressTableCell>\n                  <StyledDistanceTableCell padding='dense'>\n                    {row.distance}\n                  </StyledDistanceTableCell>\n                </TableRow>\n              ))}\n            </StyledTableBody>\n          </Table>\n        </TableContainer>\n      </StyledCardContent>\n    </CardContainer>\n  )\n}\n\nconst mapStateToProps = state => {\n  return {\n    googleMapsKey: state.config.googleMapsKey,\n  }\n}\n\nexport default connect(mapStateToProps)(MapResponse)\n","export default \"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0Ij48cGF0aCBmaWxsPSIjRUUzODQwIiBkPSJNMTIgMkM4LjEzIDIgNSA1LjEzIDUgOWMwIDUuMjUgNyAxMyA3IDEzczctNy43NSA3LTEzYzAtMy44Ny0zLjEzLTctNy03em0wIDkuNWMtMS4zOCAwLTIuNS0xLjEyLTIuNS0yLjVzMS4xMi0yLjUgMi41LTIuNSAyLjUgMS4xMiAyLjUgMi41LTEuMTIgMi41LTIuNSAyLjV6Ii8+PHBhdGggZD0iTTAgMGgyNHYyNEgweiIgZmlsbD0ibm9uZSIvPjwvc3ZnPg==\"","export default \"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCI+PGRlZnM+PHBhdGggaWQ9ImEiIGQ9Ik0wIDBoMjR2MjRIMFYweiIvPjwvZGVmcz48Y2xpcFBhdGggaWQ9ImIiPjx1c2UgeGxpbms6aHJlZj0iI2EiIG92ZXJmbG93PSJ2aXNpYmxlIi8+PC9jbGlwUGF0aD48cGF0aCBjbGlwLXBhdGg9InVybCgjYikiIGZpbGw9IiMyOTc5RkYiIGQ9Ik0xMiAyQzguMTQgMiA1IDUuMTQgNSA5YzAgNS4yNSA3IDEzIDcgMTNzNy03Ljc1IDctMTNjMC0zLjg2LTMuMTQtNy03LTd6bTAgMmMxLjEgMCAyIC45IDIgMiAwIDEuMTEtLjkgMi0yIDJzLTItLjg5LTItMmMwLTEuMS45LTIgMi0yem0wIDEwYy0xLjY3IDAtMy4xNC0uODUtNC0yLjE1LjAyLTEuMzIgMi42Ny0yLjA1IDQtMi4wNXMzLjk4LjczIDQgMi4wNWMtLjg2IDEuMy0yLjMzIDIuMTUtNCAyLjE1eiIvPjwvc3ZnPg==\"","import React, { PureComponent } from 'react'\nimport { connect } from 'react-redux'\nimport CardActions from '@material-ui/core/CardActions'\nimport CardContent from '@material-ui/core/CardContent'\nimport Button from '@material-ui/core/Button'\nimport Typography from '@material-ui/core/Typography'\nimport FormControl from '@material-ui/core/FormControl'\nimport FormGroup from '@material-ui/core/FormGroup'\nimport FormControlLabel from '@material-ui/core/FormControlLabel'\nimport Checkbox from '@material-ui/core/Checkbox'\nimport TextField from '@material-ui/core/TextField'\nimport { withStyles } from '@material-ui/core/styles'\nimport every from 'lodash/every'\nimport styled from 'styled-components'\nimport {\n  saveFeedbackInput,\n  sendFeedback,\n} from './actions/feedbackInput'\n\nconst FeedbackInputLabel = styled.div`\n  font-size: 14px;\n  font-weight: bold;\n  padding-bottom: 15px;\n  padding-top: 13px;\n`\n\nconst styles = () => ({\n  root: {\n  },\n  inputMultiline: {\n    fontSize: '0.875rem',\n    overflowY: 'hidden'\n  }\n})\n\nclass FeedbackInput extends PureComponent {\n  state = {\n    isSubmitted: false,\n    feedbackComment: ''\n  }\n\n  render() {\n    const {\n      feedbackInputs,\n      feedbackUrl,\n      saveFeedbackInput,\n      sendFeedback,\n      session,\n      outputContexts\n    } = this.props\n\n    const handleInputChange = name => event => {\n      const inputItem = {\n        value: name,\n        checked: event.target.checked,\n      }\n      saveFeedbackInput(inputItem)\n    }\n\n    // We need to filter values that are not checked, and return\n    // a list of checked values in the final submission\n    const processList = list => {\n      return list\n        .filter(item => {\n          return item.checked ? item.value : null\n        })\n        .map(item => {\n          return item.value\n        })\n    }\n\n    const sendAnalytics = data => {\n      fetch(feedbackUrl, {\n        method: 'POST',\n        body: JSON.stringify(data),\n        headers: {\n          'Content-Type': 'application/json',\n        },\n      })\n    }\n\n    // On form submit, build the payload data structure,\n    // send the payload to analytics, send message to dialogflow,\n    // and set submitted flag to true in redux state.\n    const handleSubmit = () => {\n      const payload = {\n        wasHelpful: feedbackInputs.wasHelpful,\n        session,\n        feedbackList: processList(feedbackInputs.feedbackList),\n        comment: this.state.feedbackComment,\n        outputContexts\n      }\n\n      sendAnalytics(payload)\n      sendFeedback('Feedback complete')\n      this.setState((prevState) => ({ ...prevState, isSubmitted: true }))\n    }\n\n    return (\n      <>\n        {!this.state.isSubmitted ?\n          (\n            <div>\n              <CardContent>\n                <Typography gutterBottom variant='h6'>\n                  {feedbackInputs.wasHelpful\n                    ? 'Why was Gen helpful?'\n                    : 'Why was Gen not helpful?'}\n                </Typography>\n                <FormControl component='fieldset'>\n                  <FormGroup>\n                    {feedbackInputs.feedbackList\n                      ? feedbackInputs.feedbackList.map(choice => {\n                        return (\n                          <FormControlLabel\n                            key={choice.value}\n                            control={(\n                              <Checkbox\n                                checked={choice.checked}\n                                onChange={handleInputChange(choice.value)}\n                                value={choice.value}\n                              />\n                            )}\n                            label={choice.value}\n                          />\n                        )\n                      })\n                      : null}\n                    <FeedbackInputLabel>Add your comments</FeedbackInputLabel>\n                    <TextField\n                      placeholder=\"Type something\"\n                      variant=\"outlined\"\n                      multiline\n                      value={this.state.feedbackComment}\n                      onChange={e => {\n                        // Need to copy the value here because of React's synthetic events\n                        const newValue = e.target.value\n                        this.setState(prevState => ({ ...prevState, feedbackComment: newValue }))\n                      }}\n                      InputProps={{\n                        classes: {\n                          inputMultiline: this.props.classes.inputMultiline\n                        },\n                      }}\n                    />\n                  </FormGroup>\n                </FormControl>\n              </CardContent>\n              <CardActions>\n                <Button\n                  size='small'\n                  color='primary'\n                  onClick={handleSubmit}\n                  disabled={\n                    !(\n                      (!!feedbackInputs.feedbackList && feedbackInputs.feedbackList.length > 0\n                        && !every(feedbackInputs.feedbackList, x => !x.checked))\n                      || !!this.state.feedbackComment)\n                  }\n                >\n                  Submit\n                </Button>\n              </CardActions>\n            </div>\n          )\n          :\n          (\n            <CardContent>\n              Thank you. Your feedback is important to us and will help improve Gen.\n            </CardContent>\n          )}\n      </>\n    )\n  }\n}\n\nconst mapStateToProps = state => {\n  return {\n    feedbackInputs: state.feedbackInput,\n    feedbackUrl: state.config.feedbackUrl,\n    outputContexts: state.conversation.outputContexts\n  }\n}\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    saveFeedbackInput: value => {\n      dispatch(saveFeedbackInput(value))\n    },\n    sendFeedback: value => {\n      dispatch(sendFeedback(value))\n    },\n  }\n}\n\nexport default withStyles(styles)(connect(\n  mapStateToProps,\n  mapDispatchToProps\n)(FeedbackInput))\n","import {\n  SAVE_FEEDBACK_INPUT,\n  SET_FEEDBACK_SUBMITTED,\n  SET_FEEDBACK_OPTIONS,\n} from './actionTypes'\n\nimport { sendMessage } from './conversation'\n\nexport function saveFeedbackInput(value) {\n  return { type: SAVE_FEEDBACK_INPUT, value }\n}\n\nexport function sendFeedback(value) {\n  return dispatch => {\n    dispatch(sendMessage(value))\n  }\n}\n\nexport function setFeedbackOptions(value) {\n  return { type: SET_FEEDBACK_OPTIONS, value }\n}\n\nexport function setFeedbackSubmitted(value) {\n  return { type: SET_FEEDBACK_SUBMITTED, value }\n}\n","import React, { PureComponent } from 'react'\nimport { connect } from 'react-redux'\nimport Card from '@material-ui/core/Card'\nimport styled from 'styled-components'\nimport FeedbackInput from './FeedbackInput'\nimport { setFeedbackOptions } from './actions/feedbackInput'\n\nconst CardContainer = styled(Card)`\n  && {\n    border-top-left-radius: 10px;\n    border-top-right-radius: 10px;\n    border-bottom-right-radius: 10px;\n    border-bottom-left-radius: 10px;\n    background: #fff;\n    margin: 15px 16px 15px 16px;\n    white-space: pre-line;\n    scroll-margin: 15px;\n  }\n`\n\nclass FeedbackResponse extends PureComponent {\n  componentDidMount() {\n    const { setFeedbackOptions, feedbackData } = this.props\n    setFeedbackOptions(feedbackData)\n  }\n\n  render() {\n    const { session, className, key } = this.props\n    return (\n      <CardContainer className={className} key={key}>\n        <FeedbackInput session={session} />\n      </CardContainer>\n    )\n  }\n}\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    setFeedbackOptions: value => {\n      dispatch(setFeedbackOptions(value))\n    },\n  }\n}\n\nconst mapStateToProps = state => {\n  return {\n    feedbackInputs: state.feedbackInput,\n  }\n}\n\nexport default connect(\n  mapStateToProps,\n  mapDispatchToProps\n)(FeedbackResponse)\n","/* eslint-disable no-param-reassign */\nimport { css } from 'styled-components'\n\nconst sizes = {\n  giant: 1170,\n  desktop: 992,\n  tablet: 768,\n  phone: 620,\n}\n\n// iterate through the sizes and create a media template\nexport const media = Object.keys(sizes).reduce((accumulator, label) => {\n  // use em in breakpoints to work properly cross-browser and support users\n  // changing their browsers font-size: https://zellwk.com/blog/media-query-units/\n  const emSize = sizes[label] / 16\n  accumulator[label] = (...args) => css`\n    @media (max-width: ${emSize}em) {\n      ${css(...args)};\n    }\n  `\n  return accumulator\n}, {})\n","import React, { PureComponent } from 'react'\nimport { connect } from 'react-redux'\nimport styled from 'styled-components'\nimport isEqual from 'lodash/isEqual'\nimport merge from 'lodash/merge'\nimport grey from '@material-ui/core/colors/grey'\nimport { forEachRight, sortBy } from 'lodash'\nimport Message from './Message'\nimport CardResponse from './CardResponse'\nimport MapResponse from './MapResponse'\nimport FeedbackResponse from './FeedbackResponse'\nimport { media } from './styles/media'\n\nconst ContentWrapper = styled.div`\n  display: flex;\n  flex-direction: column;\n  /* Vertically flips the container element to achieve flex-direction:column-reverse effect */\n  transform: scale(1, -1);\n  overflow: auto;\n  ${media.tablet`\n    flex-direction: column-reverse;\n    overflow: auto;\n    transform: none;\n  `};\n`\nconst Content = styled.div`\n  background: ${grey[100]};\n  z-index: 4;\n  grid-area: chatwindow;\n  margin-bottom: 1px;\n  margin-top: 8px;\n\n  /* Vertically flips the content element so that the messages won't be upside down */\n  transform: scale(1, -1);\n\n  ${media.tablet`\n   transform: none;\n  `};\n`\n\nfunction buildUserMessage(message) {\n  return (\n    <Message\n      message={message.text}\n      entity={message.entity}\n      key={message.key}\n      timestamp={message.systemTime}\n      isLoading={false}\n    />\n  )\n}\n\nfunction buildLoadingMessage(message) {\n  return (\n    <Message\n      key='loading'\n      entity='bot'\n      timestamp={message.systemTime}\n      isLoading={message.loading}\n    />\n  )\n}\n\nfunction buildFeedbackResponse(message, shouldScrollIntoView = false) {\n  return (\n    <FeedbackResponse\n      feedbackData={message.payload.feedback}\n      session={message.session}\n      entity={message.entity}\n      key={message.key}\n      isLoading={false}\n      timestamp={message.systemTime}\n      className={shouldScrollIntoView ? 'scrollIntoView' : ''}\n    />\n  )\n}\n\nfunction buildBotTextMessage(message, showTimestamp, shouldScrollIntoView = false) {\n  return (\n    <Message\n      message={message.text}\n      entity={message.entity}\n      key={message.key}\n      isLoading={false}\n      timestamp={message.systemTime}\n      showTimestamp={showTimestamp}\n      className={shouldScrollIntoView ? 'scrollIntoView' : ''}\n    />\n  )\n}\n\nfunction buildBotCardMessage(message, shouldScrollIntoView = false) {\n  return (\n    <CardResponse\n      data={message.card}\n      timestamp={message.systemTime}\n      key={message.key}\n      className={shouldScrollIntoView ? 'scrollIntoView' : ''}\n    />\n  )\n}\n\nfunction buildBotMapMessage(message, shouldScrollIntoView = false) {\n  return (\n    <MapResponse\n      data={message.payload.mapPayload}\n      timestamp={message.systemTime}\n      key={message.key}\n      className={shouldScrollIntoView ? 'scrollIntoView' : ''}\n    />\n  )\n}\nclass ChatWindow extends PureComponent {\n  componentRef = React.createRef(null)\n\n  state = { messageElements: [] }\n\n  messages = []\n\n  constructor(props) {\n    super(props)\n    this.componentRef = React.createRef()\n  }\n\n  componentDidUpdate() {\n    const newMessages = this.parseMessages()\n    if (!isEqual(this.messages, newMessages)) {\n      this.messages = newMessages\n      this.createMessageElements()\n    }\n    if (this.componentRef.current) {\n      this.componentRef.current.addEventListener('wheel', this.handleWheel)\n    }\n  }\n\n  // Sometimes Gen's response is so long it exceeds the height of the\n  // chat window and the window automatically scrolls to the bottom. This\n  // function identifies the index of the first content bubble in Gen's latest\n  // reply so we can use that index to auto scroll to the start of the response.\n  findIndexFirstElementInLastResponse = (messages) => {\n    let index = 0\n    let indexFound = false\n\n    // We use forEachRight because we can't just reverse the collection.\n    // Need the index to decrease each iteration.\n    forEachRight(messages, (m, mIndex) => {\n      if (m.entity === 'bot') {\n        if (!indexFound) {\n          index = mIndex\n        }\n      } else {\n        indexFound = true\n      }\n    })\n\n    return index\n  }\n\n  // Parse the raw message structure from the Redux props and convert\n  // it into the appropriate format for each Message\n  parseMessages = () => {\n    const { messages } = this.props\n    const messageData = []\n\n    messages.forEach(msg => {\n      // We want to make sure that each message has all of the metadata\n      // The structure of the response is not consistent, so we are building\n      // a consistent object describing each message.\n      const metadata = {\n        systemTime: msg.systemTime,\n        entity: msg.entity,\n        session: msg.messageSession,\n        key: msg.key,\n      }\n\n      if (msg.loading) {\n        const loadingMessage = merge(msg, metadata)\n        messageData.push(loadingMessage)\n      } else if (msg.entity === 'bot') {\n        // Bot messages contain an array of 'responses' -- we don't want to\n        // display all of them here (e.g. suggestions), so we only push\n        // the ones we display to the final array\n        msg.responses.forEach((res, i) => {\n          if (\n            res.type === 'text' ||\n            res.type === 'card' ||\n            res.type === 'payload'\n          ) {\n            const botMessage = merge(res, { ...metadata, key: `${metadata.key}_${i}` })\n            messageData.push(botMessage)\n          }\n        })\n      } else if (msg.entity === 'user') {\n        const userMessage = merge(msg, metadata)\n        messageData.push(userMessage)\n      }\n    })\n    return messageData\n  }\n\n  // For each message, create the appropriate React component and save\n  // it for later use.\n  createMessageElements = () => {\n    const newMessages = this.parseMessages()\n    const msgElements = []\n\n    let sortedNewMessages = newMessages\n\n    if (newMessages.length > 1) {\n      sortedNewMessages = sortBy(newMessages, m => new Date(m.systemTime))\n    }\n\n    const indexFirstElementInLastResponse =\n      this.findIndexFirstElementInLastResponse(sortedNewMessages)\n\n    sortedNewMessages.forEach((msg, i) => {\n      const shouldScrollIntoView = i === indexFirstElementInLastResponse\n      let showTimestamp = false\n      // set timestamp display flag to true if it's the last message\n      if (i === sortedNewMessages.length - 1) {\n        showTimestamp = true\n      }\n\n      if (msg.loading) {\n        msgElements.push(buildLoadingMessage(msg))\n      } else if (msg.entity === 'user') {\n        msgElements.push(buildUserMessage(msg))\n      } else if (msg.entity === 'bot' && msg.type === 'text') {\n        msgElements.push(buildBotTextMessage(msg, showTimestamp, shouldScrollIntoView))\n      } else if (msg.entity === 'bot' && msg.type === 'card') {\n        msgElements.push(buildBotCardMessage(msg, shouldScrollIntoView))\n      } else if (\n        msg.entity === 'bot' &&\n        msg.type === 'payload' &&\n        msg.payload.mapPayload\n      ) {\n        msgElements.push(buildBotMapMessage(msg, shouldScrollIntoView))\n      } else if (\n        msg.entity === 'bot' &&\n        msg.type === 'payload' &&\n        msg.payload.feedback\n      ) {\n        msgElements.push(buildFeedbackResponse(msg, shouldScrollIntoView))\n      } else {\n        msgElements.push(\n          buildBotTextMessage({ text: ['Something went wrong.'] })\n        )\n      }\n    })\n\n    this.setState((prevState) => ({ ...prevState, messageElements: msgElements }), () => {\n      // Only after state has been updated, scroll specified element into view.\n      if (document.getElementsByClassName('scrollIntoView')[0]) {\n        // Setting a timeout to 0 is a little trick meant to force the DOM call\n        // to happen after the DOM has rendered.\n        // This logic fails if the element doesn't exist by the time this line is reached.\n        setTimeout(() => document.getElementsByClassName('scrollIntoView')[0].scrollIntoView(false), 0)\n      }\n    })\n  }\n\n  handleWheel = e => {\n    // reverse scroll to handle the transform property\n    if (e.deltaY) {\n      e.preventDefault()\n      e.currentTarget.scrollTop -=\n        parseFloat(\n          getComputedStyle(e.currentTarget).getPropertyValue('font-size')\n        ) *\n        (e.deltaY < 0 ? -1 : 1) *\n        2\n    }\n  }\n\n  render() {\n    const { messageElements } = this.state\n\n    return (\n      <ContentWrapper ref={this.componentRef}>\n        <Content elevation={1} square>\n          {messageElements}\n        </Content>\n      </ContentWrapper>\n    )\n  }\n}\n\nconst mapStateToProps = state => {\n  return {\n    messages: state.conversation.messages,\n    buttonBarVisible: state.buttonBar.visible,\n    error: state.error,\n  }\n}\n\nexport default connect(mapStateToProps)(ChatWindow)\n","import { SAVE_USER_INPUT } from './actionTypes'\nimport { createUserResponse } from './conversation'\n\nfunction validateCharacterLimit(userInput) {\n  if (userInput.length > 256) {\n    return false\n  }\n  return true\n}\n\nexport function saveUserInput(value) {\n  const userInput = {\n    value,\n    charLength: value.length || 0,\n    maxExceeded: value.length > 255,\n  }\n  return { type: SAVE_USER_INPUT, userInput }\n}\n\nexport function submitUserInput() {\n  return (dispatch, getState) => {\n    const { userInput } = getState()\n    const trimmedValue = userInput.value.trim()\n    if (!trimmedValue || trimmedValue === '') {\n      return\n    }\n    const validUserInput = validateCharacterLimit(userInput.value)\n    if (validUserInput) {\n      dispatch(createUserResponse(userInput.value))\n      dispatch(saveUserInput(''))\n    }\n  }\n}\n","import React, { PureComponent } from 'react'\nimport { connect } from 'react-redux'\nimport Send from '@material-ui/icons/Send'\nimport styled from 'styled-components'\nimport IconButton from '@material-ui/core/IconButton'\nimport TextField from '@material-ui/core/TextField'\n\n// Redux\nimport { saveUserInput, submitUserInput } from './actions/userInput'\n\nconst OuterFrame = styled.div`\n  grid-area: userinput;\n  background: #fefefe;\n  display: flex;\n  display: ${p => (p.visible ? 'none' : 'flex')};\n  flex-flow: row nowrap;\n  justify-content: center;\n  align-items: center;\n  border-top: 1px solid rgba(0, 0, 0, 0.2);\n  z-index: 4;\n  border-bottom-left-radius: 4px;\n  border-bottom-right-radius: 4px;\n`\n\nconst TextInput = styled(TextField)`\n  && {\n    padding: 5px 15px;\n    padding-bottom: ${p => p.helperText !== null && '16px'};\n    /*All properties below are specified to combat WordPress*/\n    \n    textarea {\n      border: none;\n      width: 100%;\n      outline: none;\n      color: #000;\n      height: 100%;\n      padding: 0;\n      font-size: 14px;\n    }\n  }\n`\n\nconst Icon = styled(IconButton)`\n  && {\n    padding-right: 15px;\n    &:hover {\n      background: transparent;\n    }\n  }\n`\nclass UserInput extends PureComponent {\n  constructor() {\n    super()\n    this.handleKeyPress = this.handleKeyPress.bind(this)\n  }\n\n  handleKeyPress(e) {\n    // Enter was pressed\n    if (e.charCode === 13) {\n      this.props.submitUserInput()\n      e.preventDefault()\n    }\n  }\n\n  render() {\n    const { saveUserInput, inputValue, shouldDisable } = this.props\n    const inputValues = inputValue.value\n    const charLimit = `${inputValue.charLength}/255`\n    const { maxExceeded } = inputValue\n    let helperTextValue = null\n\n    if (maxExceeded) {\n      helperTextValue = `Exceeded character limit: ${charLimit}`\n    } else {\n      helperTextValue = null\n    }\n\n    return (\n      <OuterFrame visible={shouldDisable}>\n        <TextInput\n          multiline\n          rowsMax='4'\n          fullWidth\n          InputProps={{ disableUnderline: true }}\n          placeholder='Send a message'\n          helperText={helperTextValue}\n          FormHelperTextProps={{\n            style: { color: '#cd5c5c', margin: 0 },\n          }}\n          onChange={saveUserInput}\n          value={inputValues}\n          onKeyPress={this.handleKeyPress}\n        />\n\n        <Icon\n          onClick={this.props.submitUserInput}\n          aria-label='Send'\n          color='primary'\n          disabled={maxExceeded}\n          disableRipple\n        >\n          <Send />\n        </Icon>\n      </OuterFrame>\n    )\n  }\n}\n\nconst mapStateToProps = state => {\n  return {\n    inputValue: state.userInput,\n    shouldDisable: state.conversation.disableInput,\n  }\n}\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    saveUserInput: e => {\n      dispatch(saveUserInput(e.target.value))\n    },\n    submitUserInput: () => {\n      dispatch(submitUserInput())\n    },\n  }\n}\n\nexport default connect(\n  mapStateToProps,\n  mapDispatchToProps\n)(UserInput)\n","import React, { PureComponent } from 'react'\nimport { connect } from 'react-redux'\nimport styled from 'styled-components'\nimport Grid from '@material-ui/core/Grid'\nimport Button from '@material-ui/core/Button'\nimport { findLast, find, filter, reduce, findIndex } from 'lodash'\nimport grey from '@material-ui/core/colors/grey'\nimport { sendQuickReply } from './actions/conversation'\n\nconst Container = styled.div`\n  grid-area: buttonbar;\n  display: flex;\n  flex-flow: row wrap;\n  justify-content: flex-start;\n  align-items: flex-start;\n  align-content: flex-start;\n  padding: ${p => (p.visible ? '4px 8px 12px 16px' : '0 16px')};\n  background: ${grey[300]};\n  border-top: ${p => (p.visible ? '1px solid rgba(0, 0, 0, 0.2)' : 'none')};\n  overflow-y: auto;\n`\n\nconst Btn = styled(Button)`\n  && {\n    margin-right: 8px;\n    margin-top: 8px;\n    padding-left: 5px;\n    padding-right: 5px;\n    display: ${p => (p.visible === 'true' ? 'block' : 'none')};\n    background-color: ${p => (p.navigationbutton === 'true' ? 'rgb(36,39,44)' : 'rgb(240,240,240)')};\n    color: ${p => (p.navigationbutton === 'true' ? ' white' : 'secondary')};\n    border-radius: 10px;\n    font-size: 14px;\n    width: 100%\n    \n  }\n\n  :hover {\n    background-color: rgb(181,181,181) !important;\n  }\n`\n\nconst findLastMessageWithSuggestions = (messages) => findLast(messages, m => {\n  const hasSuggestions = find(m.responses, ['type', 'suggestion'])\n  return hasSuggestions\n})\n\nconst getSuggestions = (messageWithSuggestions) => messageWithSuggestions.responses.filter(m => m.type === 'suggestion')[0].suggestions\n\nclass ButtonBar extends PureComponent {\n  minColumnSpan = suggestion => {\n    if (suggestion.length >= 18) {\n      return 3\n    } else if (suggestion.length >= 13 && suggestion.length < 18) {\n      return 2\n    }\n    return 1\n  }\n\n  arrangeSubjectMatterSuggestions = suggestionElements => ([\n    [find(suggestionElements, x => x.label.toLowerCase() === 'child support')],\n    [find(suggestionElements, x => x.label.toLowerCase() === 'snap'), find(suggestionElements, x => x.label.toLowerCase() === 'tanf')],\n    [find(suggestionElements, x => x.label.toLowerCase() === 'workforce development')]\n  ])\n\n  playTetris = buttons => {\n    const findNextInCollection = (reqColumnSpan, currentCollection) => {\n      // Find the next button to display in button bar\n      const next = find(currentCollection, x => x.minColumnSpan === reqColumnSpan)\n\n      // Exclude the button found from the collection of buttons left to render\n      const remainingButtons = filter(currentCollection, x => !next || x.label !== next.label)\n\n      return ({\n        next,\n        remainingButtons\n      })\n    }\n\n    const buttonRowsResult = reduce(buttons, (results, currentButton) => {\n      // If the current button has not been added, start a new row\n      if (findIndex(results.remainingButtons, x => x.label === currentButton.label) >= 0) {\n        const btn1 = currentButton\n        let _remainingButtons = filter(results.remainingButtons, x => x.label !== btn1.label)\n\n        // If btn1 is large, then it's the only button in row.\n        // Add the button to the row, and remove the button from list\n        // of buttons left to add\n        if (btn1.minColumnSpan === 3) {\n          return ({\n            buttonRows: [\n              ...results.buttonRows,\n              [btn1]\n            ],\n            remainingButtons: _remainingButtons\n          })\n        }\n\n        // If btn1 is medium, then it needs a second button,\n        // preferably medium, but can be small. If none exist that\n        // match this criteria, then add button by itself. It will span full width\n        // Add the buttons to the row, and remove the buttons from list\n        // of buttons left to add\n        if (btn1.minColumnSpan === 2) {\n          let nextInCollectionResult = findNextInCollection(2, _remainingButtons)\n          _remainingButtons = nextInCollectionResult.remainingButtons\n\n          // If no medium button is found, search for small\n          if (!nextInCollectionResult.next) {\n            nextInCollectionResult = findNextInCollection(1, _remainingButtons)\n            _remainingButtons = nextInCollectionResult.remainingButtons\n          }\n\n          const btn2 = nextInCollectionResult.next\n\n          // Filter out second button if compatible one not found\n          const buttonRow = filter([btn1, btn2], x => !!x)\n\n          return ({\n            buttonRows: [\n              ...results.buttonRows,\n              buttonRow\n            ],\n            remainingButtons: _remainingButtons\n          })\n        }\n\n        // If btn1 is small, then try to fit 3 small. If can't\n        // find 1 or 2 more small, then try to add a medium. If none exist that\n        // match this criteria, then add button by itself and span full width\n        // Add the buttons to the row, and remove the buttons from list\n        // of buttons left to add\n        if (btn1.minColumnSpan === 1) {\n          let nextInCollectionResult = findNextInCollection(1, _remainingButtons)\n          let btn2 = nextInCollectionResult.next\n          _remainingButtons = nextInCollectionResult.remainingButtons\n\n          // If a small button is found, try to find a third\n          if (btn2) {\n            const nextInCollectionResult2 = findNextInCollection(1, _remainingButtons)\n            const btn3 = nextInCollectionResult2.next\n            _remainingButtons = nextInCollectionResult2.remainingButtons\n\n            // Even if a third button is not found, return the current two as row\n\n            // Filter out second and/or third button if compatible not found\n            const buttonRow = filter([btn1, btn2, btn3], x => !!x)\n\n            return ({\n              buttonRows: [\n                ...results.buttonRows,\n                buttonRow\n              ],\n              remainingButtons: _remainingButtons\n            })\n          }\n\n          // If no small button is found, search for medium\n          if (!nextInCollectionResult.next) {\n            nextInCollectionResult = findNextInCollection(2, _remainingButtons)\n            btn2 = nextInCollectionResult.next\n            _remainingButtons = nextInCollectionResult.remainingButtons\n          }\n\n          // Even if a second button is not found, return the current one as row\n\n          // Filter out second button if compatible one not found\n          const buttonRow = filter([btn1, btn2], x => !!x)\n\n          return ({\n            buttonRows: [\n              ...results.buttonRows,\n              buttonRow\n            ],\n            remainingButtons: _remainingButtons\n          })\n        }\n      }\n      return results\n    }, { buttonRows: [], remainingButtons: buttons })\n\n    const { buttonRows } = buttonRowsResult\n\n    return buttonRows\n  }\n\n  render() {\n    const { visible, messages, sendQuickReply, paginationPage, changeSuggestionPage } = this.props\n\n    const lastMessageWithSuggestions = findLastMessageWithSuggestions(messages)\n\n    const suggestionElements = []\n\n    let backButtonLabel = null\n    let isSelectingSubjectMatter = false\n\n    if (lastMessageWithSuggestions) {\n      const suggestions = getSuggestions(lastMessageWithSuggestions)\n\n      // Start over and home button are the same, but based on server\n      // code version, we might receive 'home' or 'start over' as suggestion\n      const excludedBackAndStartOver = filter(suggestions, x => x.toLowerCase() !== 'go back' && x.toLowerCase() !== 'home' && x.toLowerCase() !== 'start over')\n\n      if (excludedBackAndStartOver.length === 4\n        && find(excludedBackAndStartOver, x => x.toLowerCase() === 'child support')\n        && find(excludedBackAndStartOver, x => x.toLowerCase() === 'tanf')\n        && find(excludedBackAndStartOver, x => x.toLowerCase() === 'snap')\n        && find(excludedBackAndStartOver, x => x.toLowerCase() === 'workforce development')) {\n        isSelectingSubjectMatter = true\n      }\n\n      // We search for it and use it because we want\n      // to persist the casing that we get back from server\n      backButtonLabel = find(suggestions, x => x.toLowerCase() === 'go back')\n\n      for (const suggestion of excludedBackAndStartOver) {\n        const minColumnSpan = this.minColumnSpan(suggestion)\n\n        suggestionElements.push({\n          label: suggestion,\n          id: lastMessageWithSuggestions.messageId,\n          visible,\n          minColumnSpan\n        })\n      }\n    }\n\n    const buttonRows = isSelectingSubjectMatter\n      ? this.arrangeSubjectMatterSuggestions(suggestionElements)\n      : this.playTetris(suggestionElements)\n\n    const numberOfRowsPerPage = 4\n\n    const numberOfNavigationPages = Math.ceil(buttonRows.length / numberOfRowsPerPage)\n\n    const paginationPages = new Array(numberOfNavigationPages)\n      .fill()\n      .map(() => buttonRows.splice(0, numberOfRowsPerPage))\n\n    const activeSuggestionPage = paginationPages[paginationPage - 1]\n      ? paginationPages[paginationPage - 1]\n      : paginationPages[0]\n\n    return (\n      (suggestionElements.length > 0 || backButtonLabel) &&\n      (\n        <Container visible={visible}>\n          {/* Start of suggestion rows */}\n          <Grid container>\n            {suggestionElements.length > 0 &&\n              activeSuggestionPage.map((btns, i) => (\n                <Grid\n                  key={`buttonRow_${i}`}\n                  container\n                  item\n                  spacing={8}\n                  xs={12}\n                >\n                  {btns.map((btn, index) => (\n                    <Grid\n                      key={`buttonRow_${i}_${index}`}\n                      item\n                      xs={12 / btns.length}\n                    >\n                      <Btn\n                        size=\"small\"\n                        color=\"secondary\"\n                        key={`${btn.id}-btn${index}`}\n                        visible={btn.visible.toString()}\n                        navigationbutton=\"false\"\n                        onClick={() => sendQuickReply(btn.label.toUpperCase())}\n                      >\n                        {btn.label.toUpperCase()}\n                      </Btn>\n                    </Grid>\n                  ))}\n                </Grid>\n              ))}\n            {/* Start of navigation row */}\n            <Grid item container xs={12} justify=\"space-between\" spacing={8}>\n              {backButtonLabel && paginationPage === 1 && (\n                <Grid item xs={4}>\n                  <Btn\n                    size=\"small\"\n                    color=\"secondary\"\n                    visible=\"true\"\n                    navigationbutton=\"true\"\n                    onClick={() => sendQuickReply(backButtonLabel.toUpperCase())}\n                  >\n                    {backButtonLabel.toUpperCase()}\n                  </Btn>\n                </Grid>\n              )}\n              {numberOfNavigationPages > 1 && paginationPage > 1 && (\n                <Grid item xs={5}>\n                  <Btn\n                    size=\"small\"\n                    color=\"secondary\"\n                    visible=\"true\"\n                    navigationbutton=\"true\"\n                    onClick={() => changeSuggestionPage(paginationPage - 1)}\n                  >\n                    Previous Options\n                  </Btn>\n                </Grid>\n              )}\n              {numberOfNavigationPages > 1 && paginationPage < numberOfNavigationPages && (\n                <Grid item xs={5}>\n                  <Btn\n                    size=\"small\"\n                    color=\"secondary\"\n                    visible=\"true\"\n                    navigationbutton=\"true\"\n                    onClick={() => changeSuggestionPage(paginationPage + 1)}\n                  >\n                    More Options\n                  </Btn>\n                </Grid>\n              )}\n            </Grid>\n          </Grid>\n        </Container>\n      )\n    )\n  }\n}\n\nconst mapStateToProps = state => {\n  return {\n    visible: state.buttonBar.visible,\n    messages: state.conversation.messages,\n    paginationPage: state.buttonBar.paginationPage\n  }\n}\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    sendQuickReply: text => {\n      dispatch(sendQuickReply(text))\n    },\n    changeSuggestionPage: newPage => dispatch({\n      type: 'CHANGE_SUGGESTION_PAGE',\n      paginationPage: newPage\n    })\n  }\n}\n\nexport default connect(\n  mapStateToProps,\n  mapDispatchToProps,\n)(ButtonBar)\n","import React, { PureComponent } from 'react'\nimport Paper from '@material-ui/core/Paper'\nimport styled, { css } from 'styled-components'\nimport { connect } from 'react-redux'\nimport grey from '@material-ui/core/colors/grey'\nimport Header from './Header'\nimport PrivacyPolicy from './PrivacyPolicy'\nimport ChatWindow from './ChatWindow'\nimport UserInput from './UserInput'\nimport ButtonBar from './ButtonBar'\nimport { media } from './styles/media'\n\nconst Container = styled(Paper)`\n  && {\n    width: 400px;\n    height: 70vh;\n    max-height: 600px;\n    overflow: hidden;\n    position: absolute;\n    bottom: 48px;\n    right: 48px;\n    transition: width 120ms ease-in-out, height 150ms ease-in-out;\n    pointer-events: none;\n\n    ${props => props.fullscreen &&\n    css`\n        width: calc(100% - 96px);\n        height: calc(100% - 96px);\n      `};\n    \n    ${props => !props.visible &&\n    css`\n      width: 0;\n      height: 0;\n    `};\n\n    ${media.phone`\n    width: ${props => (props.visible ? 'calc(100% - 20px)' : '0')};\n    height: ${props => (props.visible ? 'calc(100% - 96px)' : '0')};\n    right: 10px;\n    max-width: none;\n    max-height: none;\n  `};\n  }\n`\n\nconst OuterFrame = styled.div`\n  && {\n    width: 100%;\n    height: 100%;\n    transform-origin: bottom right;\n    pointer-events: auto;\n    background: ${grey[100]};\n    display: grid;\n    grid-template-columns: 1fr;\n    grid-template-rows: 44px 1fr auto min-content;\n    grid-template-areas:\n      'header'\n      'chatwindow'\n      'buttonbar'\n      'userinput';\n    box-sizing: content-box;\n  }\n`\n\nclass ChatContainer extends PureComponent {\n  constructor(props) {\n    super(props)\n    this.containerRef = React.createRef()\n  }\n\n  render() {\n    const { windowVisible, fullscreen } = this.props\n    return (\n      <Container\n        elevation={4}\n        fullscreen={fullscreen ? 1 : 0}\n        visible={windowVisible ? 1 : 0}\n      >\n        <OuterFrame ref={this.containerRef} className='mui-fixed'>\n          <Header />\n          <PrivacyPolicy parentRef={this.containerRef.current} />\n          <ChatWindow />\n          <ButtonBar />\n          <UserInput />\n        </OuterFrame>\n      </Container>\n    )\n  }\n}\n\nconst mapStateToProps = state => {\n  return {\n    windowVisible: state.config.windowVisible,\n    fullscreen: state.config.fullscreen,\n  }\n}\n\nexport default connect(mapStateToProps)(ChatContainer)\n","import * as t from '../actions/actionTypes'\n\nconst initialState = {\n  avatar: null,\n  title: 'Chat Window',\n  windowVisible: false,\n  fullscreen: false,\n  privacyPolicyVisible: false,\n  googleMapsKey: '',\n  centerCoordinates: '',\n  activationText: '',\n  privacyPolicy:\n    'Please do not enter any personally identifiable information such as SSN, Date of Birth, Case Number or last name.',\n  feedbackUrl: '',\n}\n\nfunction config(state = initialState, action) {\n  switch (action.type) {\n    case t.HIDE_PRIVACY_POLICY:\n      return { ...state, privacyPolicyVisible: false }\n\n    case t.SHOW_PRIVACY_POLICY:\n      return { ...state, privacyPolicyVisible: true }\n\n    case t.SET_PRIVACY_POLICY:\n      return { ...state, privacyPolicy: action.policyText }\n\n    case t.SET_GOOGLE_MAPS_KEY:\n      return { ...state, googleMapsKey: action.googleMapsKey }\n\n    case t.SET_CENTER_COORDINATES:\n      return { ...state, centerCoordinates: action.centerCoordinates }\n\n    case t.SET_ACTIVATION_TEXT:\n      return { ...state, activationText: action.activationText }\n\n    case t.SET_AVATAR:\n      return { ...state, avatar: action.avatar }\n\n    case t.SET_TITLE:\n      return { ...state, title: action.title }\n\n    case t.SHOW_WINDOW:\n      return { ...state, windowVisible: true }\n\n    case t.HIDE_WINDOW:\n      return { ...state, windowVisible: false }\n\n    case t.FULLSCREEN:\n      return { ...state, fullscreen: true }\n\n    case t.WINDOWED:\n      return { ...state, fullscreen: false }\n\n    case t.SET_FEEDBACK_URL:\n      return { ...state, feedbackUrl: action.feedbackUrl }\n\n    default:\n      return state\n  }\n}\n\nexport default config\n","import { parse, format, differenceInMilliseconds } from 'date-fns'\nimport { v4 as uuidv4 } from 'uuid'\nimport * as t from '../actions/actionTypes'\nimport { sysTimeFormat } from '../config/dateFormats'\n\nconst initialState = {\n  client: null,\n  clientName: null,\n  messages: [],\n  webhookPayload: null,\n  disableInput: false,\n  lastUpdateTime: format(new Date(), sysTimeFormat),\n  currentTime: format(new Date(), sysTimeFormat),\n  headerTime: 'Now',\n  timer: null,\n  conversationStarted: false,\n}\n\nfunction conversation(state = initialState, action) {\n  switch (action.type) {\n    case t.SAVE_CLIENT:\n      return { ...state, client: action.client, clientName: action.clientName }\n\n    case t.UPDATE_CURRENT_TIME:\n      return {\n        ...state,\n        headerTime: action.headerTime,\n        currentTime: action.currentTime,\n      }\n\n    case t.TIMER_START:\n      return {\n        ...state,\n        timer: action.timer,\n      }\n\n    case t.INITIATE_LOADING:\n      return {\n        ...state,\n        messages: [\n          ...state.messages,\n          {\n            loading: true,\n            entity: 'bot',\n            systemTime: format(new Date(), sysTimeFormat),\n          },\n        ],\n      }\n\n    case t.SAVE_RESPONSE:\n      return {\n        ...state,\n        lastUpdateTime: format(new Date(), sysTimeFormat),\n        headerTime: 'Now',\n        messages: action.newConversationArray,\n      }\n\n    case t.SAVE_USER_RESPONSE:\n      return {\n        ...state,\n        lastUpdateTime: format(new Date(), sysTimeFormat),\n        headerTime: 'Now',\n        messages: [...state.messages, { ...action.response, key: uuidv4() }].sort((a, b) => {\n          const dateA = parse(\n            a.systemTime,\n            sysTimeFormat,\n            new Date(a.systemTime)\n          )\n          const dateB = parse(\n            b.systemTime,\n            sysTimeFormat,\n            new Date(b.systemTime)\n          )\n          const diff = differenceInMilliseconds(dateB, dateA)\n          return diff\n        }),\n      }\n\n    case t.RECEIVE_WEBHOOK_DATA:\n      return {\n        ...state,\n        webhookPayload: action.payload,\n      }\n\n    case t.ENABLE_INPUT:\n      return {\n        ...state,\n        disableInput: false,\n      }\n\n    case t.DISABLE_INPUT:\n      return {\n        ...state,\n        disableInput: true,\n      }\n\n    case t.SET_CONVERSATION_STARTED:\n      return {\n        ...state,\n        conversationStarted: true,\n      }\n\n    case t.SET_CONVERSATION_ENDED:\n      return {\n        ...state,\n        conversationStarted: false,\n      }\n\n    case t.SET_OUTPUT_CONTEXTS:\n      return {\n        ...state,\n        outputContexts: action.rawOutputContexts\n      }\n\n    default:\n      return state\n  }\n}\n\nexport default conversation\n","import * as t from '../actions/actionTypes'\n\nconst initialState = {\n  visible: false,\n  buttons: [],\n}\nfunction config(state = initialState, action) {\n  switch (action.type) {\n    case t.SHOW_BUTTON_BAR:\n      return {\n        ...state,\n        visible: true,\n      }\n    case t.HIDE_BUTTON_BAR:\n      return {\n        ...state,\n        visible: false,\n      }\n\n    case t.INITIATE_LOADING:\n      return {\n        ...state,\n        paginationPage: 1\n      }\n\n    case t.SAVE_RESPONSE:\n      return {\n        ...state,\n        paginationPage: 1\n      }\n\n    case t.SAVE_USER_RESPONSE:\n      return {\n        ...state,\n        paginationPage: 1\n      }\n\n    case t.CHANGE_SUGGESTION_PAGE:\n      return {\n        ...state,\n        paginationPage: action.paginationPage\n      }\n\n    default:\n      return state\n  }\n}\n\nexport default config\n","import * as t from '../actions/actionTypes'\n\nconst initialState = {\n  value: '',\n  charLength: 0,\n  maxExceeded: false,\n}\nfunction userInput(state = initialState, action) {\n  switch (action.type) {\n    case t.SAVE_USER_INPUT:\n      return action.userInput\n    default:\n      return state\n  }\n}\n\nexport default userInput\n","import * as t from '../actions/actionTypes'\n\nconst initialState = {\n  submitted: false,\n  wasHelpful: null,\n  feedbackList: null,\n}\n\nfunction feedbackInput(state = initialState, action) {\n  switch (action.type) {\n    case t.SAVE_FEEDBACK_INPUT:\n      return {\n        ...state,\n        feedbackList: state.feedbackList.map(item => {\n          if (item.value === action.value.value) {\n            return { ...item, checked: action.value.checked }\n          }\n          return item\n        }),\n      }\n    case t.SET_FEEDBACK_OPTIONS:\n      return {\n        ...state,\n        wasHelpful: action.value.helpful,\n        feedbackList: action.value.options.map(item => {\n          return { ...item, checked: false }\n        }),\n      }\n    case t.SET_FEEDBACK_SUBMITTED:\n      return { ...state, submitted: true }\n    default:\n      return state\n  }\n}\n\nexport default feedbackInput\n","import * as t from '../actions/actionTypes'\n\nconst initialState = ''\nfunction config(state = initialState, action) {\n  switch (action.type) {\n    case t.DISPLAY_ERROR:\n      return action.error\n\n    case t.CLEAR_ERROR:\n      return initialState\n\n    default:\n      return state\n  }\n}\n\nexport default config\n","import { combineReducers } from 'redux'\nimport config from './configReducer'\nimport conversation from './conversationReducer'\nimport buttonBar from './buttonBarReducer'\nimport userInput from './userInputReducer'\nimport feedbackInput from './feedbackInputReducer'\nimport error from './errorReducer'\n\nconst rootReducer = combineReducers({\n  config,\n  conversation,\n  buttonBar,\n  userInput,\n  feedbackInput,\n  error,\n})\nexport default rootReducer\n","import { Provider } from 'react-redux'\nimport { createStore, applyMiddleware, compose } from 'redux'\nimport React, { PureComponent } from 'react'\nimport styled from 'styled-components'\nimport WebFont from 'webfontloader'\nimport MuiThemeProvider from '@material-ui/core/styles/MuiThemeProvider'\nimport thunkMiddleware from 'redux-thunk'\nimport 'whatwg-fetch'\nimport grey from '@material-ui/core/colors/grey'\nimport createTheme from './createTheme'\nimport ActivatorButton from './ActivatorButton'\nimport ChatContainer from './ChatContainer'\nimport rootReducer from './reducers/rootReducer'\nimport { initialize } from './actions/initialization'\n\nWebFont.load({\n  google: {\n    families: ['Roboto:300,400,500', 'Product Sans:400'],\n  },\n})\n\nconst OuterContainer = styled.div`\n  width: 100%;\n  height: 100%;\n  pointer-events: none;\n  position: fixed;\n  top: 0;\n  left: 0;\n  z-index: 999999;\n  display: flex;\n  flex-flow: column nowrap;\n  justify-content: center;\n  align-items: center;\n  align-content: center;\n  box-sizing: border-box;\n  font-family: 'Roboto', sans-serif;\n  line-height: normal; /*For WordPress*/\n  & > * {\n    box-sizing: border-box;\n    font-family: 'Roboto', sans-serif;\n\n    & ::-webkit-scrollbar-thumb {\n      background-color: ${grey[600]};\n      -webkit-border-radius: 8px;\n      border-radius: 8px;\n      border: 2px solid ${grey[100]};\n    }\n    & ::-webkit-scrollbar {\n      background-color: ${grey[100]};\n      width: 8px;\n    }\n  }\n`\n\nconst composeEnhancer = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose;\n\nclass ChatFrame extends PureComponent {\n  constructor(props) {\n    super(props)\n    this.store = createStore(rootReducer, composeEnhancer(applyMiddleware(thunkMiddleware)))\n    this.currentValue = null\n    this.theme = createTheme(\n      this.props.primaryColor,\n      this.props.secondaryColor,\n      this.props.headerColor\n    )\n  }\n\n  componentDidMount() {\n    // We load the initial options into the Redux store inside of the\n    // componentDidMount() lifecycle hook. This lets us use Redux to manage\n    // state instead of passing props down manually.\n    this.store.dispatch(initialize(this.props, this.theme))\n\n    // In order to expose when a webhook payload of custom data is received,\n    // we manually create a subscription to the data piece we want to expose\n    this.unsubscribe = this.store.subscribe(() => this.handleChange(this.store))\n  }\n\n  componentWillUnmount() {\n    this.unsubscribe()\n  }\n\n  // Select the current conversation payload from our Redux store\n  select(state) {\n    return state.conversation.webhookPayload\n  }\n\n  // When props are updated (e.g. Theme changes), update entire component\n  handleChange(store) {\n    const previousValue = this.currentValue\n    this.currentValue = this.select(store.getState())\n    if (previousValue !== this.currentValue && this.props.onPayload) {\n      this.props.onPayload(this.currentValue)\n    }\n  }\n\n  render() {\n    return (\n      <Provider store={this.store}>\n        <MuiThemeProvider theme={this.theme}>\n          <OuterContainer>\n            <ChatContainer />\n            <ActivatorButton />\n          </OuterContainer>\n        </MuiThemeProvider>\n      </Provider>\n    )\n  }\n}\n\nexport default ChatFrame\n","import { createMuiTheme } from '@material-ui/core/styles'\nimport * as colors from '@material-ui/core/colors'\nimport isHexColor from 'validator/lib/isHexColor'\n\n// Create a color theme to be used by the rest of the chat window. If the user\n// defines a color that isn't available, fall back to default colors and\n// warn user\nexport default function createTheme(\n  primaryColor = 'lightBlue',\n  secondaryColor = 'pink',\n  headerColor = 'lightBlue'\n) {\n  const newTheme = {\n    palette: {\n      error: colors.red,\n      // Used by `getContrastText()` to maximize the contrast between the background and\n      // the text.\n      contrastThreshold: 3,\n      // Used to shift a color's luminance by approximately\n      // two indexes within its tonal palette.\n      // E.g., shift from Red 500 to Red 300 or Red 700.\n      tonalOffset: 0.2,\n    },\n    typography: {\n      useNextVariants: true,\n    },\n    overrides: {\n      MuiFab: {\n        root: {\n          position: 'absolute',\n          bottom: 48,\n          right: 48,\n        },\n      },\n    },\n  }\n  if (isHexColor(primaryColor)) {\n    newTheme.palette.primary = {\n      main: primaryColor,\n    }\n  } else if (colors[primaryColor]) {\n    newTheme.palette.primary = colors[primaryColor]\n  } else {\n    throw new Error(\n      `${primaryColor} is not a valid color. Use a color name from https://material.io/guidelines/style/color.html#color-color-palette`\n    )\n  }\n\n  if (isHexColor(secondaryColor)) {\n    newTheme.palette.secondary = {\n      main: secondaryColor,\n    }\n  } else if (secondaryColor && colors[secondaryColor]) {\n    newTheme.palette.secondary = colors[secondaryColor]\n  } else {\n    throw new Error(\n      `${secondaryColor} is not a valid color. \n      Use a color name from https://material.io/guidelines/style/color.html#color-color-palette`\n    )\n  }\n\n  if (isHexColor(headerColor)) {\n    newTheme.palette.header = {\n      main: headerColor,\n    }\n  } else if (colors[headerColor]) {\n    newTheme.palette.header = colors[headerColor]\n  } else {\n    throw new Error(\n      `${headerColor} is not a valid color. Use a color name from https://material.io/guidelines/style/color.html#color-color-palette`\n    )\n  }\n\n  return createMuiTheme(newTheme)\n}\n","import ChatFrame from './ChatFrame';\n\nexport default ChatFrame;\n"],"sourceRoot":""}