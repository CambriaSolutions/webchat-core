{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap bd824dd2f339f60f0c29","webpack:///external \"react\"","webpack:///./src/components/chatframe/createTheme.js","webpack:///./src/components/chatframe/conversationClient.js","webpack:///./src/components/chatframe/actions/dialogflow.js","webpack:///./src/components/chatframe/actions/conversation.js","webpack:///./src/components/chatframe/actions/initialization.js","webpack:///./src/components/chatframe/actions/feedbackInput.js","webpack:///./src/components/chatframe/ChatWindow.js","webpack:///./src/components/chatframe/actions/userInput.js","webpack:///./src/components/chatframe/actions/actionTypes.js","webpack:///./src/components/chatframe/config/dateFormats.js","webpack:///./src/components/chatframe/ActivatorButton.js","webpack:///./src/components/chatframe/Header.js","webpack:///./src/components/chatframe/PrivacyPolicy.js","webpack:///./src/components/chatframe/Loading.js","webpack:///./src/components/chatframe/Message.js","webpack:///./src/components/chatframe/CardResponse.js","webpack:///./src/components/chatframe/MapResponse.js","webpack:///./src/components/chatframe/FeedbackInput.js","webpack:///./src/components/chatframe/FeedbackResponse.js","webpack:///./src/components/chatframe/styles/media.js","webpack:///./src/components/chatframe/UserInput.js","webpack:///./src/components/chatframe/ButtonBar.js","webpack:///./src/components/chatframe/ChatContainer.js","webpack:///./src/components/chatframe/reducers/configReducer.js","webpack:///./src/components/chatframe/reducers/conversationReducer.js","webpack:///./src/components/chatframe/reducers/buttonBarReducer.js","webpack:///./src/components/chatframe/reducers/userInputReducer.js","webpack:///./src/components/chatframe/reducers/feedbackInputReducer.js","webpack:///./src/components/chatframe/reducers/errorReducer.js","webpack:///./src/components/chatframe/reducers/rootReducer.js","webpack:///./src/components/chatframe/ChatFrame.js","webpack:///./src/components/chatframe/index.js","webpack:///external \"webfontloader\"","webpack:///external \"@material-ui/core/Paper\"","webpack:///./src/components/chatframe/person-pin.svg","webpack:///external \"@material-ui/core/FormControl\""],"names":["primaryColor","secondaryColor","headerColor","newTheme","palette","error","contrastThreshold","tonalOffset","typography","useNextVariants","overrides","MuiFab","root","position","bottom","right","main","createMuiTheme","console","req1","response1","req2","response2","req3","response3","e","dispatch","client","getState","hasSuggestion","find","data","messages","newConversationArray","msg","dateA","parse","a","dateB","b","diff","differenceInMilliseconds","rawOutputContexts","get","rawResponses","unfilteredResponses","type","mapMessageTypeToDescriptor","suggestions","text","card","title","subtitle","imageUrl","buttons","image","imageUri","accessibilityText","rawPayload","Object","field","payload","JSON","modifiedPayload","containsDisablePayload","responses","response","containsDisableInput","systemTime","format","entity","messageId","key","messageSession","language","clientName","numMessages","sendEvent","now","lastUpdate","diffMinutes","differenceInMinutes","diffSeconds","differenceInSeconds","headerTime","currentTime","clearInterval","newTimer","setInterval","userAvatar","genbotAvatar","policyText","activationText","latitude","longitude","googleMapsKey","message","loading","shouldScrollIntoView","userInput","charLength","value","maxExceeded","trimmedValue","validUserInput","validateCharacterLimit","createUserResponse","saveUserInput","SET_TITLE","SET_AVATAR","SAVE_CLIENT","SAVE_RESPONSE","SAVE_USER_INPUT","SAVE_USER_RESPONSE","INITIATE_LOADING","TIMER_START","UPDATE_CURRENT_TIME","SHOW_BUTTON_BAR","HIDE_BUTTON_BAR","DISPLAY_ERROR","CLEAR_ERROR","SHOW_WINDOW","HIDE_WINDOW","FULLSCREEN","WINDOWED","RECEIVE_WEBHOOK_DATA","DISABLE_INPUT","ENABLE_INPUT","SET_CONVERSATION_STARTED","SET_CONVERSATION_ENDED","SHOW_PRIVACY_POLICY","HIDE_PRIVACY_POLICY","SET_PRIVACY_POLICY","SET_GOOGLE_MAPS_KEY","SET_CENTER_COORDINATES","SET_ACTIVATION_TEXT","SAVE_FEEDBACK_INPUT","SET_FEEDBACK_URL","SET_FEEDBACK_SUBMITTED","SET_FEEDBACK_OPTIONS","SET_OUTPUT_CONTEXTS","sysTimeFormat","constructEmptyResponse","queryResult","fulfillmentMessages","platform","fulfillmentText","constructor","options","encodeQueryData","params","encodeURIComponent","uuid","queryParams","url","textUrl","eventUrl","Btn","styled","Fab","p","TextContainer","div","BotAvatar","Avatar","render","contentToDisplay","windowVisible","withTheme","connect","state","avatar","showWindow","Container","HeaderText","Typography","HeaderButton","IconButton","StartOverButton","Button","lastMessageWithSuggestions","m","hasSuggestions","startOverButtonLabel","x","sendQuickReply","fullscreen","StyledDialog","Dialog","privacyPolicyVisible","privacyPolicy","hidePrivacyPolicy","Dot","green","ChatBubble","ExternalMessage","grey","UserMessage","Timestamp","markdownOptions","h6","component","props","variant","Link","componentDidMount","componentWillUnmount","clearTimeout","parsedTimestamp","isToday","isSameDay","isYesterday","subDays","formattedTimestamp","filteredBotMessage","isLoading","showTimestamp","CardContainer","Card","CardImage","CardMedia","cardKey","inputValue","TableContainer","StyledCardContent","CardContent","StyledTableBody","TableBody","StyledAddressTableCell","TableCell","StyledDistanceTableCell","cardHeight","iconSize","width","height","googleMapsUrl","handleMarkerClick","location","placeId","window","Map","fullscreenControl","lat","row","lng","pin","scaledSize","personPin","city","distance","FeedbackInputLabel","feedbackComment","handleInputChange","name","event","inputItem","checked","saveFeedbackInput","processList","list","item","sendAnalytics","fetch","method","body","headers","feedbackInputs","choice","newValue","prevState","classes","inputMultiline","wasHelpful","feedbackList","comment","outputContexts","sendFeedback","every","withStyles","fontSize","overflowY","feedbackUrl","setFeedbackOptions","feedbackInput","sizes","giant","desktop","tablet","phone","media","emSize","accumulator","css","ContentWrapper","Content","index","forEachRight","indexFound","metadata","session","loadingMessage","messageData","res","botMessage","merge","userMessage","newMessages","sortedNewMessages","sortBy","indexFirstElementInLastResponse","i","msgElements","buildBotTextMessage","document","setTimeout","parseFloat","getComputedStyle","React","componentDidUpdate","isEqual","buttonBarVisible","OuterFrame","TextInput","TextField","Icon","handleKeyPress","inputValues","charLimit","helperTextValue","style","color","margin","shouldDisable","disableInput","submitUserInput","suggestion","suggestionElements","findNextInCollection","next","remainingButtons","filter","buttonRowsResult","findIndex","results","currentButton","_remainingButtons","btn1","buttonRows","nextInCollectionResult","btn2","buttonRow","nextInCollectionResult2","btn3","paginationPage","backButtonLabel","excludedBackAndStartOver","isSelectingSubjectMatter","minColumnSpan","id","numberOfRowsPerPage","numberOfNavigationPages","Math","paginationPages","btns","length","btn","label","visible","Paper","initialState","centerCoordinates","webhookPayload","lastUpdateTime","timer","conversationStarted","rootReducer","action","WebFont","google","families","OuterContainer","composeEnhancer","createStore","applyMiddleware","thunkMiddleware","createTheme","initialize","select","handleChange","previousValue","store","ChatFrame"],"mappings":"AAAA,eACA,iDADA,CAEA,kBAFA,CAGA,qCAHA,CAIA,wBAJA,CAKA,wBALA,CAMA,qBANA,CAQA,eACC,CATD,EASC,kCATD,CASC,WACD,M,aCNA,cAGA,QACA,oBAGA,YACA,GADA,CAEA,IAFA,CAGA,UAHA,EAaA,MANA,mCAMA,CAHA,MAGA,UACA,CAxBA,SA4DA,MAhCA,MAgCA,CA7BA,KA6BA,CA1BA,oBACA,QADA,EAEA,2BACA,eADA,CAEA,aAFA,CAGA,KAHA,EAMA,CAkBA,CAfA,gBACA,sBACA,WAA2B,mBAA4B,CADvD,CAEA,WAAiC,QAAe,CAFhD,CAIA,MADA,aACA,EACA,CASA,CANA,kBAAsD,gDAA+D,CAMrH,CAHA,QAGA,U,eC7DA,0B,cAAA,sC,cAAA,gC,cAAA,6B,cAAA,kD,cAAA,6C,cAAA,iD,cAAA,6C,cAAA,4B,cAAA,2B,cAAA,2C,cAAA,2C,cAAA,kD,cAAA,0B,cAAA,6C,cAAA,+B,cAAA,iD,cAAA,oC,cAAA,kD,cAAA,gD,gECOe,WACbA,EADa,YAEbC,EAFa,OAGbC,EAHa,YAIb,CACA,KAAMC,GAAW,CACfC,QAAS,CACPC,MADO,OAIPC,kBAJO,EAQPC,YAAa,GARN,CADM,CAWfC,WAAY,CACVC,kBADU,CAXG,CAcfC,UAAW,CACTC,OAAQ,CACNC,KAAM,CACJC,SADI,WAEJC,OAFI,GAGJC,MAAO,EAHH,CADA,CADC,CAdI,CAAjB,CAwBA,WACEZ,kBAA2B,CACzBa,MADyB,CAD7B,KAIO,UACLb,uBADK,KAGL,MAAM,WACH,IADH,kHAAM,CAAN,CAKF,WACEA,oBAA6B,CAC3Ba,MAD2B,CAD/B,KAIO,IAAIf,GAAJ,MACLE,yBADK,KAGL,MAAM,WACH,IAAiB;gGADd,CAAN,CAMF,WACEA,iBAA0B,CACxBa,MADwB,CAD5B,KAIO,UACLb,sBADK,KAGL,MAAM,WACH,IADH,kHAAM,CAAN,CAKF,MAAOc,QAAP,gBAAOA,I,CCrDT,gEAkDc,KAEV,MADAC,iBACA,MAFU,sBAlDd,EACE,GAAI,SAGW,MADbA,iCACa,gDACK,MADZC,IACY,iBAAMA,EAAN,IAAMA,EAAN,oCA4ClB,WA5CkB,CAKlB,GALMC,GAKN,CAHAF,0BAGA,EAAIE,uBAAJ,CAAwC,SAEzB,MADbF,iCACa,gDACK,MADZG,IACY,iBAAMA,EAAN,IAAMA,EAAN,oCA0BlB,WA1BkB,CAIlB,GAJMC,GAIN,EAAIA,uBAAJ,CAAwC,SAEzB,MADbJ,iCACa,gDACK,MADZK,IACY,iBAAMA,EAAN,IAAMA,EAAN,6BAAZC,IAAY,CAGlB,CAAIA,uBAHc,CASlB,IATkB,CAKhB,QALgB,0BADL,0BAFf,CAJkB,MAoBX,EAAIF,uBApBO,CAoBX,YApBW,CAsBhB,QAtBgB,qCADL,qCAFf,CALkB,MAsCX,EAAIF,uBAtCO,CAsCX,YAtCW,CAwChB,QAxCgB,qCADL,qCAHf,CAiDE,QAAU,CAAHK,IAGR,CArDH,GCIO,aAAwC,CAC7C,MAAOC,KAAY,MACXC,GAAN,SADiB,CAGjBD,EAAS,kBAATA,WADA,YACS,CAATA,CAHF,CAKD,CAEM,aAA4B,CACjC,MAAO,OAAwB,SACRE,IADQ,YACRA,CADQ,SAEvBC,EAAgBC,KAAKC,EAA3B,SAAsBD,uBAFO,CAS7B,KAJEJ,EAAS,CAATA,OAAS,CAATA,CAIF,CAFEA,EAAS,CAATA,OAAS,CAATA,CAEF,EAAIM,WAAJ,CACEN,EAAS,SAAuBO,qBAAhCP,GAAS,CAATA,CADF,KAEO,CACL,KAAMO,GAAuB,MACtBC,KACIA,EAAP,OAAOA,IAFkB,OAIrB,OAAU,MACRC,GAAQC,iBACZC,EADYD,cAGZ,SAASC,EAHX,UAGE,CAHYD,CADA,CAMRE,EAAQF,iBACZG,EADYH,cAGZ,SAASG,EAHX,UAGE,CAHYH,CANA,CAWRI,EAAOC,OAAb,2BAAaA,MAXC,CAYd,QAhBJ,CAA6B,CAA7B,CAmBAf,EAAS,SAATA,sBAAS,CAATA,CACD,CAhCH,CAkCD,CAEM,aAA4C,CACjD,MAAOA,KAAY,CACjB,aAA0C,OAEtC,MAFsC,KAGpC,MAHoC,CAItC,MAJsC,KAKpC,MALoC,CAMtC,cANsC,KAOpC,YAPoC,CAQtC,OARsC,KASpC,OAToC,CAUtC,SAVsC,KAWpC,SAXoC,CAapC,MAEL,CACD,KAAMgB,GAAoBC,OAA1B,4BAA0BA,IAA1B,CACAjB,EAAS,SAATA,mBAAS,CAATA,CAlBiB,CAoBjB,KAAMkB,GAAeD,OAArB,iCAAqBA,IAArB,CApBiB,GAqBjB,KArBiB,CAsBjB,IAtBiB,CAuBjB,GAAI,CACFE,EAAsB,MAAiBX,KAAO,MACtCY,GAAOC,EAA2Bb,EAAxC,OAAaa,CAD+B,CAEtCC,EAAcL,OAApB,2BAAoBA,IAFwB,CAGtCM,EAAON,mBAAb,IAAaA,CAH+B,CAItCO,EAAO,CACXC,MAAOR,oBADI,EACJA,CADI,CAEXS,SAAUT,uBAFC,EAEDA,CAFC,CAGXU,SAAUV,uBAHC,EAGDA,CAHC,CAIXW,QAASX,yBAJE,CAJ+B,CAUtCY,EAAQ,CACZC,SAAUb,wBADE,EACFA,CADE,CAEZc,kBAAmBd,oCAFP,CAV8B,CAe5C,IAf4C,CAgB5C,YAAIG,IAAJ,CAAwB,CACtB,KAAMY,GAAaf,OAAnB,gBAAmBA,IAAnB,CACA,cAA4BgB,QAA5B,OAA4BA,GAA5B,CAAwD,oBAA5CC,GAA4C,KAArC7B,EAAqC,KACtD,gBAAIA,SAAJ,CACE,GAAI,CAEF8B,KAAiBC,WAAW/B,EAA5B8B,WAAiBC,CAFnB,CAGE,QAAY,CAEZD,KAAiB9B,EAAjB8B,WACD,CAPH,IAQO,IAAI9B,QAAJ,aAAiBA,SAAjB,CACL,KAAM,WAAN,kCAAM,CAAN,CADK,IAGL,SAEH,CAED,sBAA+B,CAG7B,IAAI4B,sBAAJ,CAAqC,CACnC,KAAMI,GAAN,yBACArC,EAAS,SAATA,iBAAS,CAATA,CACD,CACDsC,IAP6B,CAQ7BtC,EAAS,CAATA,OAAS,CAATA,CARF,KAUEA,GAAS,SAATA,SAAS,CAATA,CAEH,CA9C2C,MAiD1C,MAjD0C,KAkDjC,QAAP,MAAO,CAlDiC,CAoD1C,OApD0C,KAqDjC,QAAP,OAAO,CArDiC,CAuD1C,YAvD0C,KAwDjC,QAAP,aAAO,CAxDiC,CA0D1C,MA1D0C,KA2DjC,QAAP,MAAO,CA3DiC,CA6D1C,SA7D0C,KA8DjC,QAAP,SAAO,CA9DiC,CAiEjC,QAAP,MAAO,CAjEbmB,CAAsB,CADxB,CAqEE,QAAc,CAEd3B,cACD,CAED,MAjGiB,EAmGf+C,EAAY,SAA2BC,KAAY,CACjD,KAAMC,GAAuBxB,OAA7B,sBAA6BA,IAA7B,CAKA,QANFsB,CAAY,CAnGG,EA4GfvC,EAAS,CAATA,OAAS,CAATA,CA5Ge,CA6GfuC,GA7Ge,OA+GXG,GAAaC,kBAAO,GAA1B,KAAmBA,IA/GF,CAgHXtC,EAAO,CACXuC,OADW,iBAGXC,UAAWL,EAHA,WAIXM,IAJW,OAKXC,eAAgBP,EALL,QAMXQ,SAAUR,cANC,0BAQXD,WARW,CAhHI,CA2HjBvC,OA3HF,CA6HD,CAEM,aAA4C,CACjD,MAAO,OAAwB,SACVE,IADU,YACVA,CADU,OAE7BF,EAAS,CAATA,OAAS,CAATA,CAF6B,CAG7BC,sBAEQuC,KAAY,IAEdxC,OAFc,CAGdA,EAAS,CAATA,OAAS,CAATA,CAHc,EAKdA,EAAS,SAEPrB,MAAO,4DAFA,CAATqB,CAPNC,SAaStB,KAAS,CACd,KAAM,IAAN,MAAM,GAdVsB,SAgBStB,KAAS,CAEda,cAFc,CAGdQ,EAAS,SAEPrB,MAAO,2DAFA,CAATqB,CAnBJC,EAHF,CA4BD,CAEM,aAA0B,CAC/B,MAAO,OAAwB,SACVC,IADU,YACVA,CADU,OAE7BF,EAAS,CAATA,OAAS,CAATA,CAF6B,CAG7BC,uBAEQuC,KAAY,IAEdxC,OAFc,CAGdA,EAAS,CAATA,OAAS,CAATA,CAHc,GAKdA,EAAS,SAEPrB,MAAO,4DAFA,CAATqB,CALc,CASdA,EAAS,CAATA,OAAS,CAATA,CATc,CAFpBC,SAcStB,KAAS,CACd,KAAM,IAAN,MAAM,GAfVsB,SAiBStB,KAAS,CAEda,cAFc,CAGdQ,EAAS,SAEPrB,MAAO,2DAFA,CAATqB,CApBJC,EAHF,C,CC3NK,eAA4C,CACjD,MAAOD,KAAY,CACjB,GAAI,CACF,MACE,KAAM,WAAN,oCAAM,CAAN,CAGF,eAAIC,kBAAJ,CACED,OADF,KAQE,MAJAA,GAAS,SAEPrB,MAAQ,yBAA8B,EAF/B,CAATqB,CAIA,CAAM,UAAW,IAAjB,6CAAM,CAbV,CAeE,QAAc,CAEdR,cACD,CAnBH,CAqBD,CACM,aAA8B,CACnC,MAAO,OAAwB,SACNU,IADM,YACNA,CADM,WAE7B,GAAI,CACF,eAAI+C,kBAAJ,CACEjD,OADF,KAGE,MAAM,WACH,IADH,6CAAM,CAJV,CAQE,QAAc,CAEdR,cAFc,CAIdQ,EAAS,SAEPrB,MAAQ,yBAAkC,EAFnC,CAATqB,CAID,CAlBH,CAoBD,CAEM,aAAkC,CACvC,MAAO,OAAwB,MACvBkD,GAAchD,0BAApB,MAD6B,CAEvBwC,EAAaC,kBAAO,GAA1B,KAAmBA,IAFU,CAGvBH,EAAW,CACfI,OADe,OAEfC,UAAY,gBAFG,gBAIftB,MAJe,CAHY,CAS7BvB,EAAS,SAATA,UAAS,CAATA,CAT6B,CAU7BA,EAAS,CAATA,OAAS,CAATA,CAV6B,CAW7BA,OAXF,CAaD,CAEM,aAA8B,CACnC,MAAOA,KAAY,CACjBA,OADF,C,CC1CK,YAAsB,CAC3B,MAAO,OAAwB,SACGE,IADH,YACGA,CADH,oBAE7BF,EAAS,CAATA,OAAS,CAATA,CAF6B,KAI3BA,EAASmD,EAATnD,SAASmD,CAATnD,CAJ2B,CAK3BA,EAAS,CAATA,OAAS,CAATA,CAL2B,CAA/B,CAQD,CACM,YAA6B,CAClC,MAAO,CAAP,OAAO,CACR,CAIM,YAAsB,CAC3B,MAAO,CAAP,OAAO,CACR,CACM,YAA0B,CAC/B,MAAO,CAAP,OAAO,CACR,CACM,YAAwB,CAC7B,MAAO,CAAP,OAAO,CACR,CAED,YAA0B,CACxB,MAAO,OAAwB,SACFE,IADE,YACFA,CADE,eAEvBkD,EAAM,GAAZ,KAF6B,CAGvBC,EAAa3C,sBAGjB,GAHF,KAGE,GAHiBA,CAHU,CAQvB4C,EAAcC,OAApB,sBAAoBA,MARS,CASvBC,EAAcC,OAApB,sBAAoBA,MATS,CAU7B,GAAIC,GAAJ,MACA,CAAIJ,GAXyB,CAY3BI,EAAc,IAAdA,UAZ2B,CAatB,CAAIF,GAbkB,GAc3BE,EAAc,IAAdA,UAd2B,EAiB7B,KAAMC,GAAchB,OAApB,SAAoBA,OAApB,CAEA3C,EAAS,sBAATA,aAAS,CAATA,CAnBF,CAqBD,CAEM,YAAsB,CAC3B,MAAO,OAAwB,SACXE,IADW,YACXA,CADW,SAI3B0D,gBAJ2B,CAO7B,KAAMC,GAAWC,YAAY,IAAM9D,EAAnC,GAAmCA,CAAlB8D,OAAjB,CAEA9D,EAAS,SAATA,UAAS,CAATA,CAT6B,CAW7BA,MAXF,CAaD,CAEM,aAA2B,CAChC,MAAOA,KAAY,0JAajB,QAqBA,OAnBE+D,EAAaC,GAAbD,CAmBF,EAjBA/D,EAAS,SAATA,OAAS,CAATA,CAiBA,CAhBAA,EAAS,SAATA,QAAS,CAATA,CAgBA,CAfAA,SAeA,CAdAA,MAcA,CAZIiE,GAAJ,EAAkBA,IAYlB,EAXEjE,EAAS,SAATA,YAAS,CAATA,CAWF,CARIkE,GAAJ,EAAsBA,IAQtB,EAPElE,EAAS,SAATA,gBAAS,CAATA,CAOF,IAHEA,EAAS,SAATA,aAAS,CAATA,CAGF,GAAe,+CAEPmE,EAAWlD,aAAjB,IAAiBA,CAFJ,CAGPmD,EAAYnD,aAAlB,IAAkBA,CAHL,CAQb,GAHIoD,GAAJ,EAAqBA,IAGrB,EAFErE,EAAS,SAATA,eAAS,CAATA,CAEF,GACE,GAAI,CACF,GACE,wBACAmE,IADA,EADF,IAGEC,IAHF,CAKEpE,EAAS,SAATA,mBAAS,CAATA,CALF,KAOE,MAAM,WAAN,qEAAM,CARV,CAYE,QAAc,CAEdR,cACD,CAEJ,CAED,MA9DiB,EA+DfQ,EAAS,CAATA,OAAS,CAATA,CA/De,CAgEfA,EAASmD,EAATnD,SAASmD,CAATnD,CAhEe,CAiEfA,MAjEe,EAmEfA,MAnEe,CAsEjB,MAtEiB,CAuEfA,MAvEe,CAyEfA,MAzEJ,C,CC1FK,aAAkC,CACvC,MAAO,SAAP,OAAO,CACR,CAEM,aAA6B,CAClC,MAAOA,KAAY,CACjBA,OADF,CAGD,CAEM,aAAmC,CACxC,MAAO,SAAP,OAAO,CACR,CCoBD,aAAmC,CACjC,MACE,6BACE,QAASsE,EADX,KAEE,OAAQA,EAFV,OAGE,IAAKA,EAHP,IAIE,UAAWA,EAJb,WAKE,YALF,EAQH,CAED,aAAsC,CACpC,MACE,6BACE,IADF,UAEE,OAFF,MAGE,UAAWA,EAHb,WAIE,UAAWA,EAAQC,OAJrB,EAOH,CAED,kBAAsE,CACpE,MACE,6BACE,aAAcD,UADhB,SAEE,QAASA,EAFX,QAGE,OAAQA,EAHV,OAIE,IAAKA,EAJP,iBAME,UAAWA,EANb,WAOE,UAAWE,mBAA0C,EAPvD,EAUH,CAED,oBAAmF,CACjF,MACE,6BACE,QAASF,EADX,KAEE,OAAQA,EAFV,OAGE,IAAKA,EAHP,iBAKE,UAAWA,EALb,2BAOE,UAAWE,mBAA0C,EAPvD,EAUH,CAED,kBAAoE,CAClE,MACE,6BACE,KAAMF,EADR,KAEE,UAAWA,EAFb,WAGE,IAAKA,EAHP,IAIE,UAAWE,mBAA0C,EAJvD,EAOH,CAED,kBAAmE,CACjE,MACE,6BACE,KAAMF,UADR,WAEE,UAAWA,EAFb,WAGE,IAAKA,EAHP,IAIE,UAAWE,mBAA0C,EAJvD,EAOH,CC5GD,aAA2C,SACzC,GAAIC,SADqC,CAK1C,CAEM,aAA8B,CACnC,KAAMA,GAAY,SAEhBC,WAAYC,UAFI,EAGhBC,YAA4B,GAAfD,SAHG,CAAlB,CAKA,MAAO,SAAP,WAAO,CACR,CAEM,YAA2B,CAChC,MAAO,OAAwB,+BAEvBE,EAAeJ,QAArB,IAAqBA,EAFQ,CAG7B,GAAI,GAAJ,EAAqBI,IAArB,EAGA,KAAMC,GAAiBC,EAAuBN,EAA9C,KAAuBM,CAAvB,CAHA,IAKE/E,EAASgF,EAAmBP,EAA5BzE,KAASgF,CAAThF,CALF,CAMEA,EAASiF,EAATjF,EAASiF,CAATjF,CANF,EAHF,C,+XCpBWkF,IAAN,W,CACMC,GAAN,Y,CACMC,GAAN,a,CACMC,GAAN,e,CACMC,GAAN,iB,CACMC,GAAN,oB,CACMC,GAAN,kB,CAEMC,GAAN,a,CACMC,GAAN,qB,CACMC,GAAN,iB,CACMC,GAAN,iB,CACMC,GAAN,e,CACMC,GAAN,a,CACMC,GAAN,a,CACMC,GAAN,a,CACMC,GAAN,Y,CACMC,GAAN,U,CACMC,GAAN,sB,CACMC,GAAN,e,CACMC,GAAN,c,CACMC,GAAN,0B,CACMC,GAAN,wB,CACMC,GAAN,qB,CACMC,GAAN,qB,CACMC,GAAN,oB,CACMC,GAAN,qB,CACMC,GAAN,wB,CACMC,GAAN,qB,CACMC,GAAN,qB,CACMC,GAAN,kB,CACMC,GAAN,wB,CACMC,GAAN,sB,CACMC,GAAN,qB,CCjCMC,GAAN,6B,kOREP,KAAMC,IAAyB,cAE7BC,kBACK7E,EADL6E,aAEEC,oBAAqB,CAAC,CACpBhD,QADoB,GAEpBiD,SAFoB,uBAGpBhG,KAAM,CACJA,SADI,CAHc,CAAD,CAFvB8F,CASEG,gBAAiB,EATnBH,EAF6B,EAA/B,CA0EO,QAAa,CAClBI,cAAqB,CACnB,GAAI,IAAY,CAACC,EAAjB,QACE,KAAM,WAAN,+DAAM,CAAN,CAIF,aAAeA,EAAf,OANmB,CAOnB,cAAgBA,EAAhB,QAPmB,CAQnB,gBACD,CAEDC,kBAAsB,CACpB,WACA,IAAK,KAAL,QACEC,OAAa,GAAEC,qBAAsB,IAAGA,wBAAxCD,IAEF,MAAOA,QAAP,GAAOA,CACR,CAED,gDACE,MACE,SAAM,UAAN,2BAAM,CAAN,EAFJ,KAIQA,GAAS,SAEbE,KAAM,KAAKA,IAFE,CAJjB,CASQC,EAAc,KAApB,eAAoB,GATtB,CAUQC,EAAO,GAAE,KAAKC,OAAQ,IAAf,CAAb,EAVF,CAWE,cAXF,cAcA,iDACE,MACE,SAAM,UAAN,2BAAM,CAAN,EAFJ,KAKQL,GAAS,SAEbE,KAAM,KAAKA,IAFE,CALjB,CAUQC,EAAc,KAApB,eAAoB,GAVtB,CAWQC,EAAO,GAAE,KAAKE,QAAS,IAAhB,CAAb,EAXF,CAaE,cAbF,cAlCkB,C,4cShEdC,IAAMC,IAAOC,GAAPD,EAAY;;eAETE,KAAMA,gBAAoB,MAAQ;;aAEpCA,KAAMA,wBAA4B,MAAQ;cACzCA,KAAMA,wBAA4B,MAAQ;eACzCA,KAAMA,2BAA+B,MAAQ;qBACvCA,KAAMA,wBAA4B,KAAO;;EAIxDC,GAAgBH,IAAOI,GAAI;;;WAGtBF,KAAKA,gCAAgCA,wBAAhCA,KAA8D;EAGxEG,GAAYL,IAAOM,GAAPN,EAAe;;;;;;;EASjC,gCAA4C,CAC1CO,QAAS,OAQH,KARG,+FAUDC,EAAmB,EACvB,wBAAC,EAAD,CAAC,CAAD,cACE,kCADF,KACE,EADF,CAEE,uCAFF,CADuB,CAOrB,wBAAC,GAAD,EAPJ,IAOI,CAjBG,CAoBP,MACE,yBAAC,GAAD,GAAM,GAAN,qBACE,4BACE,MADF,oBAGE,OAAQC,IAHV,EAIE,eAAgB3E,IAAqB,CAJvC,IADF,CAWH,CAjCyC,C,GAqD7B4E,0BACbC,OADF,SACEA,EAlBsBC,MACf,CACLvH,MAAOuH,SADF,MAELH,cAAeG,SAFV,cAGL9E,eAAgB8E,SAHX,eAILC,OAAQD,SAAaC,MAJhB,CADeD,CAkBtBD,CATyB/I,MAClB,CACLkJ,WAAY,IAAM,CAChBlJ,MACD,CAHI,CADkBA,CASzB+I,KADaD,C,2MCpETL,IAAYL,IAAOM,GAAPN,EAAe;;;;;;;;EAU3Be,GAAYf,IAAOI,GAAI;;;kBAGXF,KAAKA,uBAAuBhJ,IAAK;;;;;;;;;;;;;;;EAiB7C8J,GAAahB,IAAOiB,GAAPjB,EAAmB;;;;;;;;aAQzBE,KACTA,gCAAgCA,wBAAhCA,KAA8D;;EAI5DgB,GAAelB,IAAOmB,GAAPnB,EAAmB;;;;;aAK3BE,KACTA,gCAAgCA,wBAAhCA,KAA8D;;;;;EAO5DkB,GAAkBpB,IAAOqB,GAAPrB,EAAe;;;;;;;;;wBASfE,KACpBA,gCAAgCA,wBAAhCA,KAA8D;aACrDA,KACTA,gCAAgCA,wBAAhCA,KAA8D;;;;;EAOlE,gCAAmC,CACjCK,QAAS,OAYH,KAZG,mKAcDe,EAA6B,sBAAmBC,KAAK,CACzD,KAAMC,GAAiBxJ,gBAAKuJ,EAA5B,SAAuBvJ,uBAAvB,CACA,QAFF,CAAmC,CAd5B,CAmBP,GAAIyJ,GAAJ,KAEA,KAAgC,SACNH,mBAA4CC,KAA5CD,YAAiDC,SAAjDD,EADM,CACNA,EADM,YAO9BG,EAAuBzJ,kBAAkB0J,KAAKA,0BAA9CD,YAA4EC,kBAArD1J,CACxB,CAED,MACE,sCACE,kCADF,KACE,EADF,CAEE,oCAA0B,QAA1B,QAFF,CAKGyJ,GACC,wBAAC,GAAD,GAAS,MAAT,8BAA6C,UAA7C,UACE,oCAEE,QAAS,IAAME,eAFjB,eADF,CANJ,CAeE,wBAAC,GAAD,GAAS,MAAT,iBAAgC,UAAhC,UACE,8CAGE,aAAW,UAHb,EAKE,wBAAC,GAAD,GAAM,SAAN,SALF,CADF,CAfF,CAwBGC,EACC,8CAGE,aAAW,UAHb,EAKE,wBAAC,GAAD,GAAgB,SAAhB,SALF,CADDA,CAUG,8CAGE,aAAW,YAHb,EAKE,wBAAC,GAAD,GAAY,SAAZ,SALF,CAlCN,CA0CE,8CAAiD,aAAjD,SACE,wBAAC,GAAD,GAAO,SAAP,SADF,CA1CF,CA+CH,CAhFgC,C,GAoGpBlB,0BACbC,OADF,SACEA,EAlBsBC,MACf,CACLvH,MAAOuH,SADF,MAELgB,WAAYhB,SAFP,WAGLC,OAAQD,SAHH,OAIL1I,SAAU0I,eAAmB1I,QAJxB,CADe0I,CAkBtBD,CATyB,MAAa,kEAKtCgB,eAAgBxI,KAAQvB,OALc,CAAb,CASzB+I,KADaD,C,qGC3Lf,KAAMmB,IAAe7B,IAAO8B,GAAP9B,EAAe;;;;CAApC,CAMA,gCAA0C,CACxCO,QAAS,OAMH,KANG,2FAOP,MACE,8CAGE,kBAHF,6BAKE,OAAO,OALT,EAOE,wBAAC,GAAD,2BAPF,CAQE,wBAAC,GAAD,OACE,wBAAC,GAAD,SADF,CARF,CAWE,wBAAC,GAAD,OACE,wBAAC,GAAD,aAAoC,MAApC,mBADF,CAXF,CAkBH,CA3BuC,C,GAyC3BI,WAAf,SAAeA,EAXSC,MACf,CACLmB,qBAAsBnB,SADjB,qBAELoB,cAAepB,SAAaoB,aAFvB,CADepB,CAWTD,CAJY,CACzBsB,kBRXK,UAA6B,CAClC,MAAO,CAAP,OAAO,CACR,CQQ0B,CAIZtB,K,0GCpDTI,IAAYf,IAAOI,GAAI;;;;;;;;EAUvB8B,GAAMlC,IAAOI,GAAI;;sBAED+B,SAAW;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;EAgCjC,gCAAoC,CAClC5B,QAAS,CACP,MACE,iCACE,2BADF,IACE,CADF,CAEE,2BAFF,IAEE,CAFF,CAGE,gCAHF,CAMH,CATiC,C,KCtC9BQ,IAAYf,IAAOI,GAAI;;;;;iBAKZF,KAAMA,6BAAmC,YAAc;;;;;EAOlEkC,GAAapC,IAAOI,GAAI;;;;;qBAKTF,KAAMA,6BAAmC,YAAc;EAGtEmC,GAAkBrC,IAAOI,GAAI;;kBAEjBkC,QAAU;;;;;;;EAStBC,GAAcvC,IAAOI,GAAI;;;;wBAIPF,KAAKA,wBAAwBhJ,IAAK;;;;;;;;EAUpDsL,GAAYxC,IAAOiB,GAAPjB,EAAmB;;aAExBsC,QAAU;;;;;EAOjBG,GAAkB,eAEtB7L,UAAW,CACT8L,GAAI,CACFC,UAAW1B,GADT,EAEF2B,MAAO,CACLC,QAAS,IADJ,CAFL,CADK,CAOT3C,EAAG,CACDyC,UAAW1B,GADV,EAED2B,MAAO,CACLC,QAAS,OADJ,CAFN,CAPM,CAaTtK,EAAG,CACDoK,UAAWG,IADV,CAbM,CAFW,C,CAqBxB,4BAAgC,CAC9BzD,aAAc,CACZ,OADY,CAEZ,WAAa,CAAb,oBAAa,CACd,CAED0D,mBAAoB,SACI,KADJ,KACI,CADJ,cAIhB,kBAAoB,WAAW,IAAM,CACnC,cAAc,KAAO,CAArB,oBAAqB,CAAP,CAAd,CADF,CAAoB,KAJJ,CAQnB,CAEDC,sBAAuB,CACrBC,aAAa,KAAbA,aACD,CAED1C,QAAS,OAYH,KAZG,6IAcuB,KAdvB,KAcuB,CAdvB,kBAgBD2C,EAAkB5K,sBAGtB,GAHF,KAGE,GAHsBA,CAhBjB,CAqBD6K,EAAUC,qBAAU,GAA1B,KAAgBA,GArBT,CAsBDC,EAAcD,uBAA2BE,mBAAQ,GAARA,MAA/C,CAA+CA,CAA3BF,CAtBb,CAwBP,GAAIG,GAAJ,KAxBO,IA2BiB,SAAQhJ,8BAA9BgJ,EA3BK,GA6BiB,aAAYhJ,8BAAlCgJ,EA7BK,CA+BgBhJ,oBAArBgJ,uBAAqBhJ,CA/BhB,CAkCP,MACAnD,wBAnCO,CAqCH8E,GAAJ,EAAeA,OArCR,EAsCL9E,yBAA0B8E,EAA1B9E,CAA0B8E,CAA1B9E,CAtCK,CAuCLoM,GAvCK,EAyCLA,iIAzCK,CA+CP,MACE,yDACE,sCACGhJ,YAEG,4BAAa,UAAb,aAHN,CAQGA,YAEG,4BAAiB,UAAjB,GACGiJ,WAA6C,2BADhD,IACgD,CADhD,CAEGA,UACC,wBAAC,GAAD,eAjBd,4FAiBc,CAHJ,SAOG,IACC,wBAAC,GAAD,eACGD,IADH,CARJ,CAVN,CADF,CA2BGE,EACC,4BAAW,QAAX,aADDA,CAEG,IA7BN,CAgCH,CApG6B,C,GA6GjBhD,0BAAYC,OAA3B,SAA2BA,EANHC,MACf,CACLrF,YAAaqF,eADR,YAELrK,MAAOqK,EAAMrK,KAFR,CADeqK,CAMGD,KAAZD,C,sFCpLTiD,IAAgB3D,IAAO4D,GAAP5D,EAAa;;;;;;;;;;;EAa7B6D,GAAY7D,IAAO8D,GAAP9D,EAAkB;;cAEtBE,KAAMA,WAAWA,UAAXA,SAAsC,KAAO;;;;EAMjE,gCAAyC,CACvCK,QAAS,OACmD,WADnD,yEAEP,MACE,yCAAqC,IAAK,WAA1C,KACGhH,EAAW,4BAAW,MAAX,aAAuC,MAAlDA,EAAW,EAAXA,CADH,KAEE,wBAAC,GAAD,OACE,wBAAC,GAAD,mBAAyB,QAAzB,QADF,CAIE,wBAAC,GAAD,GACE,QAAS,eAEP3C,UAAW,CACT8L,GAAI,CACFC,UAAW1B,GADT,EAEF2B,MAAO,CACLC,QAAS,IADJ,CAFL,CADK,CAOT3C,EAAG,CACDyC,UAAW1B,GADV,EAED2B,MAAO,CACLC,QAAS,OADJ,CAFN,CAPM,CAaTtK,EAAG,CACDoK,UAAWG,IADV,CAbM,CAFJ,CADX,IAJF,CAFF,CA+BE,wBAAC,GAAD,OACGtJ,MAAY,OAAc,CACzB,KAAMuK,GAAW,SAAa,GAAExJ,kBAAO,GAAPA,SAAhC,GACA,MACE,yBAAC,GAAD,GACE,KAAM9B,EADR,SAEE,OAFF,SAGE,KAHF,QAIE,MAJF,UAKE,KALF,EAOGA,EAAEU,IAPL,CAHHK,EADH,CA/BF,CAiDH,CArDsC,C,GA8D1BmH,WAAf,SAAeA,EANSC,MACf,CACLoD,WAAYpD,EAAMvE,SADb,CADeuE,CAMTD,K,sKC7ETgD,IAAgB3D,IAAO4D,GAAP5D,EAAa;;;;;;;;;;;EAa7BiE,GAAiBjE,IAAOI,GAAI;;;;EAM5B8D,GAAoBlE,IAAOmE,GAAPnE,EAAoB;;;;;EAOxCoE,GAAkBpE,IAAOqE,GAAPrE,EAAkB;;;;;;;;;EAWpCsE,GAAyBtE,IAAOuE,GAAPvE,EAAkB;;;;;EAO3CwE,GAA0BxE,IAAOuE,GAAPvE,EAAkB;;;;;;KAwGnCW,WAAf,SAAeA,EANSC,MACf,CACL3E,cAAe2E,SAAa3E,aADvB,CADe2E,CAMTD,EA/Ff,WAA4B,wDAEpB8D,EAAN,OAF0B,CAGpBC,EAAW,CAAEC,MAAF,GAAaC,OAA9B,EAAiB,CAHS,CAIpBC,EAAiB,gDAAvB,MAJ0B,CAKpBC,EAAoBC,KAAY,CACpC,KAAMnF,GAAO,yEACXmF,EAASC,OADX,GAGAC,uBAJF,CAL0B,CAYpBC,EAAM,wBACV,yBAAc,IACZ,sCACE,YADF,EAEE,cAAejN,mBAFjB,CAEiBA,CAFjB,CAGE,eAAgB,uDAIdkN,oBAJc,CAHlB,EAUGlN,gBAAmB,OAClB,yCAEE,SAAU,CAAEmN,IAAKC,EAAP,IAAgBC,IAAKD,EAFjC,GAEY,CAFZ,CAGE,KAAM,CACJzF,IAAK2F,GADD,EAEJC,YAFI,CAHR,CAOE,QAAS,IAAMV,IAPjB,EADD7M,CAVH,CAqBE,mCACE,SAAU,CACRmN,IAAKnN,iBADG,IAERqN,IAAKrN,iBAAoBqN,GAFjB,CADZ,CAKE,KAAM,CACJ1F,IAAK6F,GADD,EAEJD,YAFI,CALR,EArBF,CADF,CADU,CAZc,CAiD1B,MACE,gDACE,wBAAC,GAAD,GAAY,MAAZ,mBAAqC,qBAAsB,CAAE3C,QAD/D,IAC6D,CAA3D,EADF,CAEE,gCACE,0CAEE,eAAgB,+BAAK,MAAO,CAAE+B,OAAS,IAFzC,EAE8B,CAAZ,EAFlB,CAGE,iBAAkB,+BAAK,MAAO,CAAEA,OAAS,IAH3C,EAGgC,CAAZ,EAHpB,CAIE,WAAY,+BAAK,MAAO,CAAEA,OAAd,MAAY,CAAZ,EAJd,EADF,CAOE,gCACE,wBAAC,GAAD,GAAO,QAAP,SACE,gCACG3M,uBAA0B,OACzB,wBAAC,GAAD,UACE,4BAAwB,QAAxB,SACE,wBAAC,GAAD,OACE,wBAAC,GAAD,GACE,KAAO,yEACLoN,EAAIL,OAFR,GAIE,OAAO,OAJT,EAMGK,EANH,YAMiBA,EAAIK,IANrB,CADF,CADF,CADF,CAaE,4BAAyB,QAAzB,SACGL,EAAIM,QADP,CAbF,CADD1N,CADH,CADF,CADF,CAPF,CAFF,CAqCH,CAQc0I,C,gSCvJTiF,IAAqB5F,IAAOI,GAAI;;;;;EAgBtC,gCAA0C,CACxCf,aAAc,CACZ,OADY,CAEZ,WAAa,gBAEXwG,gBAAiB,EAFN,CAId,CAEDtF,QAAS,OAQH,KARG,qHAUDuF,EAAoBC,KAAQC,KAAS,CACzC,KAAMC,GAAY,SAEhBC,QAASF,SAAaE,OAFN,CAAlB,CAIAC,IALF,CAVO,CAoBDC,EAAcC,KACX,SACGC,KACCA,UAAeA,EAAfA,MAAP,IAFG,MAIAA,KACIA,EAAP,KALG,CArBF,CA8BDC,EAAgBtO,KAAQ,CAC5BuO,QAAmB,CACjBC,OADiB,OAEjBC,KAAM1M,KAFW,SAEXA,GAFW,CAGjB2M,2CAHiB,CAAnBH,CADF,CA9BO,CAyDP,MACE,yBAAC,EAAD,CAAC,CAAD,cACI,WAAD,YAmEG,wBAAC,GAAD,gFAnEH,CAEG,mCACE,wBAAC,GAAD,OACE,wBAAC,GAAD,mBAAyB,QAAzB,MACGI,oCAEG,0BAHN,CADF,CAME,wBAAC,GAAD,GAAa,UAAb,YACE,wBAAC,GAAD,OACGA,eACG,mBAAgCC,KAE9B,wBAAC,GAAD,GACE,IAAKA,EADP,MAEE,QACE,wBAAC,GAAD,GACE,QAASA,EADX,QAEE,SAAUf,EAAkBe,EAF9B,KAEYf,CAFZ,CAGE,MAAOe,EAAOtK,KAHhB,EAHJ,CASE,MAAOsK,EAAOtK,KAThB,EAFF,CADHqK,CADH,KAmBE,oDAnBF,CAoBE,wBAAC,GAAD,GACE,YADF,iBAEE,QAFF,wBAIE,MAAO,WAJT,gBAKE,SAAUjP,KAAK,CAEb,KAAMmP,GAAWnP,SAAjB,MACA,cAAcoP,cAAd,iBAAcA,EAAd,CARJ,EAUE,WAAY,CACVC,QAAS,CACPC,eAAgB,mBAAmBA,cAD5B,CADC,CAVd,EApBF,CADF,CANF,CADF,CA+CE,wBAAC,GAAD,OACE,wBAAC,GAAD,GACE,KADF,QAEE,MAFF,kBAlES,IAAM,CACzB,KAAMlN,GAAU,CACdmN,WAAYN,EADE,qBAGdO,aAAcf,EAAYQ,EAHZ,YAGAR,CAHA,CAIdgB,QAAS,WAJK,gBAKdC,gBALc,CAAhB,CAQAd,IATyB,CAUzBe,sBAVyB,CAWzB,cAAc,cAAd,cAAc,EAAd,CAXF,CAkEY,CAIE,SAEK,CAAC,CAACV,EAAF,iBAAiCA,sBAAjC,GACKW,KAAMX,EAANW,aAAmC7F,KAAK,CAACA,EAD/C,OACM6F,CADL,GAEG,CAAC,WAHP,eALJ,WADF,CA/CF,CAHN,CA2EH,CA9IuC,CAoK3BC,4BA7KA,KAAO,SAGpBP,eAAgB,CACdQ,SADc,WAEdC,UAAW,QAFG,CAHI,CAAP,CA6KAF,EAAmB7G,OAAlC,SAAkCA,EAnBVC,MACf,CACLgG,eAAgBhG,EADX,cAEL+G,YAAa/G,SAFR,YAGLyG,eAAgBzG,eAAmByG,cAH9B,CADezG,CAmBUD,CAXP/I,MAClB,CACLuO,kBAAmB5J,KAAS,CAC1B3E,OAFG,EAIL0P,aAAc/K,KAAS,CACrB3E,OACD,CANI,CADkBA,CAWO+I,KAAnB6G,EChMf,KAAM7D,IAAgB3D,IAAO4D,GAAP5D,EAAa;;;;;;;;;;;CAAnC,CAaA,gCAA6C,CAC3C+C,mBAAoB,OAC2B,KAD3B,oDAElB6E,IACD,CAEDrH,QAAS,OAC6B,KAD7B,8CAEP,MACE,gDACE,uCADF,CAIH,CAb0C,CA8B9BI,cAAf,SAAeA,EANSC,MACf,CACLgG,eAAgBhG,EAAMiH,aADjB,CADejH,CAMTD,CAdY/I,MAClB,CACLgQ,mBAAoBrL,KAAS,CAC3B3E,OACD,CAHI,CADkBA,CAcZ+I,M,KC/CTmH,IAAQ,CACZC,MADY,KAEZC,QAFY,IAGZC,OAHY,IAIZC,MAAO,GAJK,C,CAQDC,GAAQ,uBAA0B,OAAwB,CAGrE,KAAMC,GAASN,MAAf,GAMA,MALAO,MAAqB,QAAaC,KAAI;yBAAA,CACR;QACxBA,mBAAa;;GAGnB,EATK,CAAc,I,4KbEfC,IAAiBvI,IAAOI,GAAI;;;;;;IAM9B+H,GAAMF,MAAO;;;;GAIb;EAEEO,GAAUxI,IAAOI,GAAI;gBACXkC,QAAU;;;;;;;;;IAStB6F,GAAMF,MAAO;;GAEb;EA2EJ,gCAAuC,CACrC5I,cAAmB,CACjB,QADiB,mGAsBmB,KAAc,IAC9CoJ,GAAJ,CADkD,CAElD,IAFkD,CAgBlD,MAVAC,2BAAuB,OAAe,CACpC,KAAInH,WADgC,CAElC,EAFkC,GAGhCkH,GAHgC,EAMlCE,IANJD,EAUA,EACD,CAvCkB,+EA2CH,IAAM,SACC,KADD,KACC,CADD,SAEpB,IAFoB,CAqCpB,MAjCAxQ,WAAiBE,KAAO,CAItB,KAAMwQ,GAAW,CACftO,WAAYlC,EADG,WAEfoC,OAAQpC,EAFO,OAGfyQ,QAASzQ,EAHM,eAIfsC,IAAKtC,EAAIsC,GAJM,CAAjB,CAOA,GAAItC,EAAJ,QAAiB,CACf,KAAM0Q,GAAN,UACAC,SAFF,KAGO,SAAI3Q,WAAJ,CAILA,oBAAsB,OAAY,CAChC,GACE4Q,uBACAA,SADAA,EADF,SAGEA,SAHF,CAIE,CACA,KAAMC,GAAaC,gBAA0BxO,IAAM,GAAEkO,EAASlO,GAAI,IAAf,CAAnD,EAAmBwO,GAAnB,CACAH,SACD,CARH3Q,EAJK,KAcA,UAAIA,WAAJ,CAA2B,CAChC,KAAM+Q,GAAN,UACAJ,SACD,CA/BH7Q,EAiCA,EACD,CAjFkB,uFAqFK,IAAM,MACtBkR,GAAc,KAApB,aAAoB,EADQ,CAE5B,IAF4B,CAI5B,QAEA,CAAIA,SANwB,GAO1BC,EAAoBC,oBAAoB/H,KAAK,SAASA,EAAtD8H,UAA6C,CAAzBC,CAPM,EAU5B,KAAMC,GACJ,KADF,mCACE,GADF,CAGAF,UAA0B,OAAY,CACpC,KAAMjN,GAAN,MACA,SAEIoN,IAAMH,SAAV,CAJoC,GAKlC3F,IALkC,EAQhCtL,EAAJ,OARoC,CASlCqR,YATkC,CAU7B,MAAIrR,WAVyB,CAWlCqR,YAXkC,CAYzBrR,kBAAJ,MAA4BA,SAZC,CAalCqR,gBAbkC,CAczBrR,kBAAJ,MAA4BA,SAdC,CAelCqR,cAfkC,CAiBlCrR,2BACAA,SADAA,EAEAA,UAHK,UAhB6B,CAqBlCqR,cArBkC,CAuBlCrR,2BACAA,SADAA,EAEAA,UAHK,QAtB6B,CA2BlCqR,cA3BkC,CA6BlCA,OACEC,EAAoB,CADtBD,8BACsB,CAApBC,CADFD,CA7BJJ,EAb4B,CAgD5B,cAAc,cAAd,iBAAc,EAAd,CAA+E,IAAM,CAE/EM,kDAAJ,CAAIA,CAF+E,EAMjFC,WAAW,IAAMD,qDAAjBC,cAAiBD,IAAjBC,GANJ,EASD,CA9IkB,6EAgJLjS,KAAK,CAEbA,EAAJ,MAFiB,GAGfA,kBAHe,CAIfA,4BACEkS,aACEC,iBAAiBnS,EAAjBmS,gCADFD,WACEC,CADFD,GAGClS,WAAe,CAAfA,EAHDkS,GALa,CAWlB,CA3JkB,8EA6JJE,mBA7JI,GAEjB,gBAFiB,CAGjB,WAAa,CAAb,kBAAa,CAHI,CAIjB,kBAAoBA,IAApB,SAAoBA,EACrB,CAEDC,oBAAqB,CACnB,KAAMZ,GAAc,KAApB,aAAoB,EAApB,CACKa,KAAQ,KAAb,QAAKA,GAFc,GAGjB,eAHiB,CAIjB,4BAJiB,EAMf,kBAAJ,OANmB,EAOjB,mDAAoD,KAApD,YAEH,CA+ID1J,QAAS,SACqB,KADrB,KACqB,CADrB,gBAGP,MACE,6BAAgB,IAAK,KAArB,cACE,4BAAS,UAAT,eADF,CAMH,CA1KoC,C,GAqLxBI,WAAf,SAAeA,EARSC,MACf,CACL1I,SAAU0I,eADL,SAELsJ,iBAAkBtJ,YAFb,QAGLrK,MAAOqK,EAAMrK,KAHR,CADeqK,CAQTD,K,0Bc3RTwJ,IAAanK,IAAOI,GAAI;;;;aAIjBF,KAAMA,iBAAqB,MAAQ;;;;;;;;EAU1CkK,GAAYpK,IAAOqK,GAAPrK,EAAkB;;;sBAGdE,KAAKA,qBAAyB,MAAO;;;;;;;;;;;;;EAerDoK,GAAOtK,IAAOmB,GAAPnB,EAAmB;;;;;;;EAQhC,gCAAsC,CACpCX,aAAc,CACZ,OADY,CAEZ,oBAAsB,yBAAtB,IAAsB,CACvB,CAEDkL,iBAAkB,CAEhB,EAAI5S,aAFY,GAGd,4BAHc,CAIdA,kBAJc,CAMjB,CAED4I,QAAS,OAC8C,KAD9C,+DAEDiK,EAAcxG,EAApB,KAFO,CAGDyG,EAAa,GAAEzG,EAAW1H,UAAhC,MAHO,iBAKP,GAAIoO,GAAJ,KAQA,WALqB,8BAAnBA,EAKF,CAHEA,IAGF,CACE,uCACE,yCAEE,QAFF,iBAIE,WAAY,CAJd,mBAIc,CAJd,CAKE,YALF,8BAOE,oBAAqB,CACnBC,MAAO,CAAEC,MAAF,UAAoBC,OAApB,EADY,CAPvB,oBAYE,WAAY,KAAKN,cAZnB,EADF,CAgBE,4BACE,QAAS,WADX,gBAEE,aAFF,OAGE,MAHF,qBAKE,gBALF,EAOE,wBAAC,GAAD,OAPF,CAhBF,CA2BH,CAvDmC,C,GA4EvB5J,WAAf,SAAeA,EAlBSC,MACf,CACLoD,WAAYpD,EADP,UAELkK,cAAelK,eAAmBmK,YAF7B,CADenK,CAkBTD,CAXY/I,MAClB,CACLiF,cAAelF,KAAK,CAClBC,EAASiF,EAAclF,SAAvBC,KAASiF,CAATjF,CAFG,EAILoT,gBAAiB,IAAM,CACrBpT,MACD,CANI,CADkBA,CAWZ+I,K,0BCrHTI,IAAYf,IAAOI,GAAI;;;;;;;aAOhBF,KAAMA,8BAAkC,QAAU;gBAC/CoC,QAAU;gBACVpC,KAAMA,yCAA6C,MAAQ;;EAIrEH,GAAMC,IAAOqB,GAAPrB,EAAe;;;;;;eAMZE,KAAMA,2BAAiC,MAAQ;wBACtCA,KAAMA,4CAAkD,kBAAoB;aACvFA,KAAMA,qCAA2C,WAAa;;;;;;;;;;EAY3E,gCAAsC,CACpCb,aAAc,CACZ,OADY,6EAOE4L,KAAc,CAC5B,KAAIA,UAAJ,CACE,SAF0B,MAGjBA,eAAJ,EAA+BA,SAHV,CAI1B,CAJ0B,CAM5B,CACD,CAda,iGAgBoBC,KAAuB,CACvD,CAAClT,kBAAyB0J,KAD6B,eACxBA,wBAA9B1J,CAAD,CADuD,CAEvD,CAACA,kBAAyB0J,KAA1B,MAA+BA,wBAA9B1J,CAAD,CAAkEA,kBAAyB0J,KAFpC,MAEyCA,wBAA9B1J,CAAlE,CAFuD,CAGvD,CAACA,kBAAyB0J,KAH6B,uBAGxBA,wBAA9B1J,CAAD,CAHuD,CAhB3C,4EAsBDwB,KAAW,MAChB2R,GAAuB,OAAsC,MAE3DC,GAAOpT,kBAAwB0J,KAAKA,EAA1C,aAA0CA,IAA7B1J,CAFoD,CAK3DqT,EAAmBC,oBAA0B5J,KAAK,IAASA,UAAY0J,EAA7E,KAAyBE,CALwC,CAOjE,MAAQ,QAEND,kBAFM,CAPV,CADsB,CAchBE,EAAmB,oBAAgB,OAA4B,CAEnE,IAAIC,uBAAUC,EAAVD,iBAAoC9J,KAAKA,UAAYgK,EAArDF,MAAJ,CAAoF,CAClF,UACA,GAAIG,GAAoBL,kBAAOG,EAAPH,iBAAiC5J,KAAKA,UAAYkK,EAA1E,KAAwBN,CAAxB,CAKA,IAAIM,kBAAJ,CACE,MAAQ,CACNC,WAAY,CACV,GAAGJ,EADO,WADN,GACM,CADN,CAKNJ,kBALM,CAAR,CAcF,IAAIO,kBAAJ,CAA8B,CAC5B,GAAIE,GAAyBX,EAA7B,CAA6BA,GAA7B,CACAQ,EAAoBG,EAApBH,gBAF4B,CAKvBG,EAAL,IAL4B,GAM1BA,EAAyBX,EAAzBW,CAAyBX,GANC,CAO1BQ,EAAoBG,EAApBH,gBAP0B,OAUtBI,GAAOD,EAAb,IAV4B,CAatBE,EAAYV,wBAAqB5J,KAAK,CAA5C,EAAkB4J,CAbU,CAe5B,MAAQ,CACNO,WAAY,CACV,GAAGJ,EAFC,UACM,GADN,CAKNJ,kBALM,CAOT,CAOD,IAAIO,kBAAJ,CAA8B,IACxBE,GAAyBX,EAA7B,CAA6BA,GADD,CAExBY,EAAOD,EAAX,IAF4B,CAM5B,GAHAH,EAAoBG,EAApBH,gBAGA,GAAU,MACFM,GAA0Bd,EAAhC,CAAgCA,GADxB,CAEFe,EAAOD,EAAb,IAFQ,CAGRN,EAAoBM,EAApBN,gBAHQ,CAQR,KAAMK,GAAYV,0BAA2B5J,KAAK,CAAlD,EAAkB4J,CAAlB,CAEA,MAAQ,CACNO,WAAY,CACV,GAAGJ,EAFC,UACM,GADN,CAKNJ,kBALM,CAOT,CAGIS,EAAL,IA1B4B,GA2B1BA,EAAyBX,EAAzBW,CAAyBX,GA3BC,CA4B1BY,EAAOD,EAAPC,IA5B0B,CA6B1BJ,EAAoBG,EAApBH,gBA7B0B,EAmC5B,KAAMK,GAAYV,wBAAqB5J,KAAK,CAA5C,EAAkB4J,CAAlB,CAEA,MAAQ,CACNO,WAAY,CACV,GAAGJ,EAFC,UACM,GADN,CAKNJ,kBALM,CAOT,CACF,CACD,QAnGuB,EAoGtB,eApGH,kBAoGG,CApGsB,CAdH,gBAsHtB,QACD,CA7Ia,uFA+IU,KAAgB,CACtC,cAAc,KAAO,CAAEc,eAAvB,CAAqB,CAAP,CAAd,CADsC,CAEtC,0BAA0BlB,EAA1B,WAA0BA,EAA1B,CACD,CAlJa,GAEZ,WAAa,CACXkB,eAAgB,CADL,CAGd,CA+ID5L,QAAS,SACoB,KADpB,KACoB,CADpB,qBAEuB,KAFvB,qCAIDe,EAA6B,sBAAmBC,KAAK,CACzD,KAAMC,GAAiBxJ,gBAAKuJ,EAA5B,SAAuBvJ,uBAAvB,CACA,QAFF,CAAmC,CAJ5B,CASP,IATO,IAWHoU,GAAJ,IAXO,CAYP,IAZO,CAcP,KAAgC,SACN9K,mBAA4CC,KAA5CD,YAAiDC,SAAjDD,EADM,CACNA,EADM,YAKxB+K,EAA2Bf,oBAAoB5J,KAAKA,mCAAiCA,kBAAjCA,EAA1D,YAAyHA,kBAAxF4J,CALH,CAO1Be,cACCrU,kBAA+B0J,KADhC2K,eACqC3K,kBAApC1J,CADDqU,EAECrU,kBAA+B0J,KAFhC2K,MAEqC3K,kBAApC1J,CAFDqU,EAGCrU,kBAA+B0J,KAHhC2K,MAGqC3K,kBAApC1J,CAHDqU,EAICrU,kBAA+B0J,KAJpC,uBAIyCA,kBAApC1J,CAXyB,GAY5BsU,IAZ4B,EAkB9BF,EAAkBpU,kBAAkB0J,KAApC0K,SAAyC1K,kBAAvB1J,CAlBY,CAoB9B,IAAK,KAAL,QAAmD,CACjD,KAAMuU,GAAgB,KAAtB,aAAsB,GAAtB,CAEArB,OAAwB,SAEtBsB,GAAIlL,EAFkB,oBAItBiL,eAJsB,CAAxBrB,CAMD,CACF,CA5CM,KA8CDW,GAAaS,EACf,KADeA,+BACf,GADeA,CAEf,KAFJ,UAEI,GAhDG,CAkDDG,EAAN,CAlDO,CAoDDC,EAA0BC,UAAUd,EAA1C,MAA0CA,EAAVc,CApDzB,CAsDDC,EAAkB,oBAEjB,IAAMf,SAFb,CAEaA,GAFW,CAtDjB,CA0DP,MACE,EAACX,YAAD,GAEE,uCAEE,wBAAC,GAAD,iBACGA,YACC,EAAgBiB,EAAhB,OAAwC,OACtC,wBAAC,GAAD,GACE,IAAM,cADR,wBAIE,QAJF,EAKE,GAAI,EALN,EAOGU,MAAS,OACR,wBAAC,GAAD,GACE,IAAM,cAAc,IAAd,CADR,WAGE,GAAI,GAAKA,EAAKC,MAHhB,EAKE,4BACE,KADF,QAEE,MAFF,YAGE,IAAM,GAAEC,EAAIP,EAAG,OAAT,CAHR,GAIE,QAASO,UAJX,QAIWA,EAJX,CAKE,iBALF,QAME,QAAS,IAAM,2BAA2BA,EAA3B,MANjB,EAQGA,EAAIC,KARP,CALF,CADDH,CAPH,CADF,CAFJ,CAiCE,wBAAC,GAAD,wBAAqB,GAArB,GAA6B,QAA7B,gBAAqD,QAArD,GACGT,IAAmBD,IAAnBC,EACC,wBAAC,GAAD,WAAW,GAAX,GACE,4BACE,KADF,QAEE,MAFF,YAGE,QAHF,OAIE,iBAJF,OAKE,QAAS,IAAM,6BALjB,IADF,CAFJ,CAcGM,MAA+BP,EAA/BO,EACC,wBAAC,GAAD,WAAW,GAAX,GACE,4BACE,KADF,QAEE,MAFF,YAGE,QAHF,OAIE,iBAJF,OAKE,QAAS,IAAM,cACb3F,MAAc,CAAEoF,eAAgBpF,iBADnB,CACC,CAAdA,CADa,CALjB,qBADF,CAfJ,CA4BG2F,UACC,wBAAC,GAAD,WAAW,GAAX,GACE,4BACE,KADF,QAEE,MAFF,YAGE,QAHF,OAIE,iBAJF,OAKE,QAAS,IAAM,cACb3F,MAAc,CAAEoF,eAAgBpF,iBADnB,CACC,CAAdA,CADa,CALjB,iBADF,CA7BJ,CAjCF,CAFF,CAkFL,CApSmC,CAsTvBpG,cAAf,SAAeA,EAfSC,MACf,CACLqM,QAASrM,YADJ,QAEL1I,SAAU0I,eAAmB1I,QAFxB,CADe0I,CAeTD,CARY/I,MAClB,CACL+J,eAAgBxI,KAAQ,CACtBvB,OACD,CAHI,CADkBA,CAQZ+I,M,KCpVTI,IAAYf,IAAOkN,GAAPlN,EAAc;;;;;;;;;;;;MAY1B4C,KACFA,cACA0F,KAAI;;;OAGA;;MAEF1F,KACF,CAACA,EAAD,SACA0F,KAAI;;;SAGE;;MAEJH,GAAMD,KAAM;aACLtF,KAAUA,8BAAsC,GAAK;cACpDA,KAAUA,8BAAsC,GAAK;;;;GAI/D;;EAIEuH,GAAanK,IAAOI,GAAI;;;;;;kBAMZkC,QAAU;;;;;;;;;;;EAa5B,gCAA0C,CACxCjD,cAAmB,CACjB,QADiB,CAEjB,kBAAoB0K,IAApB,SAAoBA,EACrB,CACDxJ,QAAS,OAC+B,KAD/B,6CAEP,MACE,6BACE,UADF,EAEE,WAAYqB,IAFd,EAGE,QAASnB,IAAoB,CAH/B,EAKE,4BAAY,IAAK,KAAjB,aAAoC,UAApC,aACE,2BADF,IACE,CADF,CAEE,4BAAe,UAAW,kBAF5B,OAEE,EAFF,CAGE,2BAHF,IAGE,CAHF,CAIE,2BAJF,IAIE,CAJF,CAKE,gCALF,CALF,CAcH,CAtBuC,C,GAgC3BE,WAAf,SAAeA,EAPSC,MACf,CACLH,cAAeG,SADV,cAELgB,WAAYhB,SAAagB,UAFpB,CADehB,CAOTD,K,mKCjGf,KAAMwM,IAAe,CACnBtM,OADmB,KAEnBxH,MAFmB,qEAMnB4C,cANmB,GAOnBmR,kBAPmB,GAQnBtR,eARmB,GASnBkG,cATmB,oHAWnB2F,YAAa,EAXM,CAArB,C,sKCGA,KAAMwF,IAAe,CACnBtV,OADmB,KAEnBgD,WAFmB,iBAInBwS,eAJmB,qBAMnBC,eAAgB/S,kBAAO,GANJ,KAMHA,IANG,CAOnBgB,YAAahB,kBAAO,GAPD,KAONA,IAPM,CAQnBe,WARmB,MASnBiS,MATmB,KAUnBC,sBAVmB,CAArB,C,sKCHA,KAAML,IAAe,YAEnB3T,UAFmB,CAArB,CCAA,KAAM2T,IAAe,CACnB5Q,MADmB,GAEnBD,WAFmB,EAGnBE,cAHmB,CAArB,C,sKCAA,KAAM2Q,IAAe,cAEnBjG,WAFmB,KAGnBC,aAAc,IAHK,CAArB,CCAA,KAAMgG,IAAN,GCMA,KAAMM,IAAc,0BAAgB,QNQpC,gBAA8C,CAC5C,OAAQC,EAAR,MACE,QACE,0CAEF,QACE,0CAEF,QACE,gBAAmB1L,cAAe0L,EAAlC,aAEF,QACE,gBAAmBzR,cAAeyR,EAAlC,gBAEF,QACE,gBAAmBN,kBAAmBM,EAAtC,oBAEF,QACE,gBAAmB5R,eAAgB4R,EAAnC,iBAEF,QACE,gBAAmB7M,OAAQ6M,EAA3B,SAEF,QACE,gBAAmBrU,MAAOqU,EAA1B,QAEF,QACE,mCAEF,QACE,mCAEF,QACE,gCAEF,QACE,gCAEF,QACE,gBAAmB/F,YAAa+F,EAAhC,cAEF,QACE,SAzCJ,CA2CD,CMpDmC,cLSpC,gBAAoD,CAClD,OAAQA,EAAR,MACE,QACE,gBAAmB7V,OAAQ6V,EAA3B,OAA0C7S,WAAY6S,EAAtD,aAEF,QACE,gBAEEpS,WAAYoS,EAFd,WAGEnS,YAAamS,EAAOnS,WAHtB,GAMF,QACE,gBAEEgS,MAAOG,EAAOH,KAFhB,GAKF,QACE,gBAEErV,SAAU,CACR,GAAG0I,EADK,SAER,YAEEpG,OAFF,MAGEF,WAAYC,kBAAO,GAAPA,SAHd,CAFQ,CAFZ,GAYF,QACE,gBAEE+S,eAAgB/S,kBAAO,GAFzB,KAEkBA,IAFlB,CAGEe,WAHF,MAIEpD,SAAUwV,EAAOvV,oBAJnB,GAOF,QACE,gBAEEmV,eAAgB/S,kBAAO,GAFzB,KAEkBA,IAFlB,CAGEe,WAHF,MAIEpD,SAAU,CAAC,GAAG0I,EAAJ,eAAyB8M,EAAzB,UAA0ChT,IAA1C,eAAgE,OAAU,MAC5ErC,GAAQC,iBACZC,EADYD,cAGZ,SAASC,EAHX,UAGE,CAHYD,CADoE,CAM5EE,EAAQF,iBACZG,EADYH,cAGZ,SAASG,EAHX,UAGE,CAHYH,CANoE,CAW5EI,EAAOC,OAAb,2BAAaA,MAXqE,CAYlF,QAZQ,EAJZ,GAoBF,QACE,gBAEE0U,eAAgBK,EAAO3T,OAFzB,GAKF,QACE,gBAEEgR,eAFF,GAKF,QACE,gBAEEA,eAFF,GAKF,QACE,gBAEEyC,sBAFF,GAKF,QACE,gBAEEA,sBAFF,GAKF,QACE,gBAEEnG,eAAgBqG,EAAO9U,iBAFzB,GAKF,QACE,SAhGJ,CAkGD,CK5GmC,WJFpC,gBAA8C,CAC5C,OAAQ8U,EAAR,MACE,QACE,gBAEET,UAFF,GAIF,QACE,gBAEEA,UAFF,GAIF,QACE,SAZJ,CAcD,CIbmC,WHDpC,gBAAiD,CAC/C,OAAQS,EAAR,MACE,QACE,MAAOA,GAAP,UACF,QACE,SAJJ,CAMD,CGNmC,eFApC,gBAAqD,CACnD,OAAQA,EAAR,MACE,QACE,gBAEEvG,aAAc,mBAAuBb,KAC/BA,UAAeoH,QAAnB,KADmCpH,CAEjC,SAAkBJ,QAASwH,QAA3B,SAFiCpH,EAAvB,CAFhB,GASF,QACE,gBAEEY,WAAYwG,QAFd,QAGEvG,aAAc,oBAAyBb,KACrC,qBADY,CAHhB,GAOF,QACE,+BACF,QACE,SAtBJ,CAwBD,CEzBmC,CAMlC/P,MDXF,gBAA8C,CAC5C,OAAQmX,EAAR,MACE,QACE,MAAOA,GAAP,MAEF,QACE,UAEF,QACE,SARJ,CAUD,CCNmC,CAAhB,CAApB,CCOAC,SAAa,CACXC,OAAQ,CACNC,kDADM,CADG,CAAbF,C,MAMMG,IAAiB9N,IAAOI,GAAI;;;;;;;;;;;;;;;;;;;;;0BAqBRkC,QAAU;;;0BAGVA,QAAU;;;0BAGVA,QAAU;;;;EAO9ByL,GAAkB9I,6CAAxB,S,CAEA,gCAAsC,CACpC5F,cAAmB,CACjB,QADiB,CAEjB,WAAa2O,yBAAyBD,GAAgBE,0BAAgBC,EAAtE,CAAsDD,CAAhBF,CAAzBC,CAFI,CAGjB,sBAHiB,CAIjB,WAAaG,EACX,WADWA,aAEX,WAFWA,eAGX,WAHF,WAAaA,CAKd,CACDpL,mBAAoB,CAIlB,oBAAoBqL,EAAW,KAAXA,MAAuB,KAA3C,KAAoBA,CAApB,CAJkB,CAQlB,iBAAmB,qBAAqB,IAAM,kBAAkB,KAAhE,KAA8C,CAA3B,CACpB,CAEDpL,sBAAuB,CACrB,kBACD,CAGDqL,SAAc,CACZ,MAAOzN,gBAAP,cACD,CAGD0N,eAAoB,CAClB,KAAMC,GAAgB,KAAtB,aACA,kBAAoB,YAAYC,EAAhC,QAAgCA,EAAZ,CAFF,CAGdD,IAAkB,KAAlBA,cAAuC,WAA3C,SAHkB,EAIhB,qBAAqB,KAArB,aAEH,CAEDhO,QAAS,CACP,MACE,qCAAU,MAAO,KAAjB,OACE,wBAAC,EAAD,GAAkB,MAAO,KAAzB,OACE,gCACE,2BADF,IACE,CADF,CAEE,gCAFF,CADF,CADF,CASH,CAnDmC,CCvDvBkO,EAAf,SAAeA,I,cCFf,kC,cAAA,8D,cAAA,gC,cAAA,iC,cAAA,6C,cAAA,6C,cAAA,0C,cAAA,4C,cAAA,2C,cAAA,gC,cAAA,gC,cAAA,05I,cCAA,4C,cAAA,kD,cAAA,sD,cAAA,4C,cAAA,6C,cAAA,8C,cAAA,kD,cAAA,6C,cAAA,oD,cAAA,oD,cAAA,wD,cAAA,mC,cAAA,iC,cAAA,mD,cAAA,gD,cAAA,iD,cAAA,4C,cAAA,gD,cAAA,gD,cAAA,+C,cAAA,sC,cAAA,kc,cCAA,kuB,cCAA,kD,cAAA,gD,cAAA,uD,cAAA,+C,cAAA,iC,cAAA,4C,cAAA,2C,ItCAA,C","file":"chatframe.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"chatframe\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"chatframe\"] = factory();\n\telse\n\t\troot[\"chatframe\"] = factory();\n})(typeof self !== 'undefined' ? self : this, function() {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"./\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 20);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap bd824dd2f339f60f0c29","module.exports = require(\"react\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"react\"\n// module id = 0\n// module chunks = 0","import { createMuiTheme } from '@material-ui/core/styles'\nimport * as colors from '@material-ui/core/colors'\nimport isHexColor from 'validator/lib/isHexColor'\n\n// Create a color theme to be used by the rest of the chat window. If the user\n// defines a color that isn't available, fall back to default colors and\n// warn user\nexport default function createTheme(\n  primaryColor = 'lightBlue',\n  secondaryColor = 'pink',\n  headerColor = 'lightBlue'\n) {\n  const newTheme = {\n    palette: {\n      error: colors.red,\n      // Used by `getContrastText()` to maximize the contrast between the background and\n      // the text.\n      contrastThreshold: 3,\n      // Used to shift a color's luminance by approximately\n      // two indexes within its tonal palette.\n      // E.g., shift from Red 500 to Red 300 or Red 700.\n      tonalOffset: 0.2,\n    },\n    typography: {\n      useNextVariants: true,\n    },\n    overrides: {\n      MuiFab: {\n        root: {\n          position: 'absolute',\n          bottom: 48,\n          right: 48,\n        },\n      },\n    },\n  }\n  if (isHexColor(primaryColor)) {\n    newTheme.palette.primary = {\n      main: primaryColor,\n    }\n  } else if (colors[primaryColor]) {\n    newTheme.palette.primary = colors[primaryColor]\n  } else {\n    throw new Error(\n      `${primaryColor} is not a valid color. Use a color name from https://material.io/guidelines/style/color.html#color-color-palette`\n    )\n  }\n\n  if (isHexColor(secondaryColor)) {\n    newTheme.palette.secondary = {\n      main: secondaryColor,\n    }\n  } else if (secondaryColor && colors[secondaryColor]) {\n    newTheme.palette.secondary = colors[secondaryColor]\n  } else {\n    throw new Error(\n      `${secondaryColor} is not a valid color. \n      Use a color name from https://material.io/guidelines/style/color.html#color-color-palette`\n    )\n  }\n\n  if (isHexColor(headerColor)) {\n    newTheme.palette.header = {\n      main: headerColor,\n    }\n  } else if (colors[headerColor]) {\n    newTheme.palette.header = colors[headerColor]\n  } else {\n    throw new Error(\n      `${headerColor} is not a valid color. Use a color name from https://material.io/guidelines/style/color.html#color-color-palette`\n    )\n  }\n\n  return createMuiTheme(newTheme)\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/chatframe/createTheme.js","import uuidv4 from 'uuid/v4'\n\nconst constructEmptyResponse = (response) => ({\n  ...response,\n  queryResult: {\n    ...response.queryResult,\n    fulfillmentMessages: [{\n      message: '',\n      platform: 'PLATFORM_UNSPECIFIED',\n      text: {\n        text: ['']\n      }\n    }],\n    fulfillmentText: ''\n  }\n})\n\n// Code 0 === Webhook execution successful\n// Code 4 === Webhook call failed. Error: DEADLINE_EXCEEDED.\n// Code 14 === Webhook call failed. Error: UNAVAILABLE.\nasync function fetchIntent(url) {\n  try {\n    // Make the first attempt to fetch intent\n    console.log('*** Request 1 ***')\n    const req1 = await fetch(url)\n    const response1 = await req1.json()\n\n    console.log('response1', response1)\n\n    // If response timed out, try again\n    if (response1.webhookStatus.code === 4) {\n      console.log('*** Request 2 ***')\n      const req2 = await fetch(url)\n      const response2 = await req2.json()\n\n\n      // If the second response timed out, try one last time\n      if (response2.webhookStatus.code === 4) {\n        console.log('*** Request 3 ***')\n        const req3 = await fetch(url)\n        const response3 = await req3.json()\n\n        // The request has failed three times in a row. Something is wrong.\n        if (response3.webhookStatus.code !== 0) {\n          // return a response that indicates there is an issue.\n          return constructEmptyResponse(response3)\n        }\n\n        // Request 3 was successful. Return response.\n        return response3\n\n        // If the second request had an error other than timeout,\n        // then we will not retry. Return error message.\n      } else if (response2.webhookStatus.code !== 0) {\n        // return a response that indicates there is an issue.\n        return constructEmptyResponse(response2)\n      }\n\n      // Request 2 was successful. Return response.\n      return response2\n\n      // If the first request had an error other than timeout,\n      // then we will not retry. Return error message.\n    } else if (response1.webhookStatus.code !== 0) {\n      // return a response that indicates there is an issue.\n      return constructEmptyResponse(response1)\n    }\n\n    // Request 1 was successful. Return response.\n    return response1\n  } catch (e) {\n    console.error(e)\n    return {}\n  }\n}\n\nexport class Client {\n  constructor(options) {\n    if (!options || !options.textUrl) {\n      throw new Error(\n        'Fulfillment URL is required to generate a conversation client'\n      )\n    }\n    this.textUrl = options.textUrl\n    this.eventUrl = options.eventUrl\n    this.uuid = uuidv4()\n  }\n\n  encodeQueryData(data) {\n    const params = []\n    for (const d in data) {\n      params.push(`${encodeURIComponent(d)}=${encodeURIComponent(data[d])}`)\n    }\n    return params.join('&')\n  }\n\n  async textRequest(query) {\n    if (!query) {\n      throw new Error('Query should not be empty')\n    }\n    const params = {\n      query,\n      uuid: this.uuid,\n    }\n\n    const queryParams = this.encodeQueryData(params)\n    const url = `${this.textUrl}?${queryParams}`\n    return fetchIntent(url)\n  }\n\n  async eventRequest(query) {\n    if (!query) {\n      throw new Error('Query should not be empty')\n    }\n\n    const params = {\n      query,\n      uuid: this.uuid,\n    }\n\n    const queryParams = this.encodeQueryData(params)\n    const url = `${this.eventUrl}?${queryParams}`\n\n    return fetchIntent(url)\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/chatframe/conversationClient.js","import { format, parse, differenceInMilliseconds } from 'date-fns'\nimport uuidv4 from 'uuid/v4'\nimport get from 'lodash/get'\nimport find from 'lodash/find'\nimport omit from 'lodash/omit'\nimport {\n  SAVE_CLIENT,\n  SAVE_RESPONSE,\n  INITIATE_LOADING,\n  SHOW_BUTTON_BAR,\n  HIDE_BUTTON_BAR,\n  DISPLAY_ERROR,\n  CLEAR_ERROR,\n  RECEIVE_WEBHOOK_DATA,\n  DISABLE_INPUT,\n  ENABLE_INPUT,\n  SET_CONVERSATION_ENDED,\n  SET_OUTPUT_CONTEXTS\n} from './actionTypes'\n// Date Format\nimport { sysTimeFormat } from '../config/dateFormats'\n\nimport { Client } from '../conversationClient'\n\nexport function setupDialogflow(clientOptions) {\n  return dispatch => {\n    const client = new Client(clientOptions)\n    const clientName = 'dialogflow'\n    dispatch({ type: SAVE_CLIENT, client, clientName })\n  }\n}\n\nexport function saveResponse(data) {\n  return (dispatch, getState) => {\n    const { messages } = getState().conversation\n    const hasSuggestion = find(data.responses, ['type', 'suggestion'])\n\n    if (hasSuggestion) {\n      dispatch({ type: SHOW_BUTTON_BAR })\n    } else {\n      dispatch({ type: HIDE_BUTTON_BAR })\n    }\n    if (messages.length === 0) {\n      dispatch({ type: SAVE_RESPONSE, newConversationArray: [data] })\n    } else {\n      const newConversationArray = messages\n        .map(msg => {\n          return msg.loading ? data : msg\n        })\n        .sort((a, b) => {\n          const dateA = parse(\n            a.systemTime,\n            sysTimeFormat,\n            new Date(a.systemTime)\n          )\n          const dateB = parse(\n            b.systemTime,\n            sysTimeFormat,\n            new Date(b.systemTime)\n          )\n          const diff = differenceInMilliseconds(dateA, dateB)\n          return diff\n        })\n\n      dispatch({ type: SAVE_RESPONSE, newConversationArray })\n    }\n  }\n}\n\nexport function getMessageFromDialogflow(response) {\n  return dispatch => {\n    function mapMessageTypeToDescriptor(type) {\n      switch (type) {\n        case 'text':\n          return 'text'\n        case 'card':\n          return 'card'\n        case 'quickReplies':\n          return 'suggestion'\n        case 'image':\n          return 'image'\n        case 'payload':\n          return 'payload'\n        default:\n          return 'text'\n      }\n    }\n    const rawOutputContexts = get(response, 'queryResult.outputContexts', [])\n    dispatch({ type: SET_OUTPUT_CONTEXTS, rawOutputContexts })\n\n    const rawResponses = get(response, 'queryResult.fulfillmentMessages', [])\n    let unfilteredResponses = []\n    let containsDisablePayload = false\n    try {\n      unfilteredResponses = rawResponses.map(msg => {\n        const type = mapMessageTypeToDescriptor(msg.message)\n        const suggestions = get(msg, 'quickReplies.quickReplies', [])\n        const text = get(msg, 'text.text', null)\n        const card = {\n          title: get(msg, 'card.title', ''),\n          subtitle: get(msg, 'card.subtitle', ''),\n          imageUrl: get(msg, 'card.imageUri', ''),\n          buttons: get(msg, 'card.buttons', []),\n        }\n        const image = {\n          imageUri: get(msg, 'image.imageUri', ''),\n          accessibilityText: get(msg, 'image.accessibilityText', ''),\n        }\n\n        const payload = {}\n        if (type === 'payload') {\n          const rawPayload = get(msg, 'payload.fields', {})\n          for (const [field, data] of Object.entries(rawPayload)) {\n            if (data.kind === 'stringValue') {\n              try {\n                // Attempt to parse data.stringValue as JSON in case it is\n                payload[field] = JSON.parse(data.stringValue)\n              } catch (err) {\n                // It's not JSON, just add the string\n                payload[field] = data.stringValue\n              }\n            } else if (data.kind && data.kind !== 'stringValue') {\n              throw new Error('Use stringValue to send payloads')\n            } else {\n              return payload\n            }\n          }\n          // Check for disable input property\n          if ('disableInput' in payload) {\n            // If there is more than just a dispable input propert in the payload\n            // remove disableInput and handle the rest of the payload data\n            if (Object.keys(payload).length > 1) {\n              const modifiedPayload = omit(payload, ['disableInput'])\n              dispatch({ type: RECEIVE_WEBHOOK_DATA, modifiedPayload })\n            }\n            containsDisablePayload = true\n            dispatch({ type: DISABLE_INPUT })\n          } else {\n            dispatch({ type: RECEIVE_WEBHOOK_DATA, payload })\n          }\n        }\n\n        switch (type) {\n          case 'text':\n            return { type, text }\n\n          case 'image':\n            return { type, image }\n\n          case 'suggestion':\n            return { type, suggestions }\n\n          case 'card':\n            return { type, card }\n\n          case 'payload':\n            return { type, payload }\n\n          default:\n            return { type, text }\n        }\n      })\n    } catch (error) {\n      // TODO: log error to analytics\n      console.log(error)\n    }\n\n    let responses\n    if (containsDisablePayload) {\n      responses = unfilteredResponses.filter(response => {\n        const containsDisableInput = get(\n          response,\n          'payload.disableInput',\n          false\n        )\n        return !containsDisableInput\n      })\n    } else {\n      dispatch({ type: ENABLE_INPUT })\n      responses = unfilteredResponses\n    }\n    const systemTime = format(new Date(), sysTimeFormat)\n    const data = {\n      entity: 'bot',\n      loading: false,\n      messageId: response.responseId,\n      key: uuidv4(),\n      messageSession: response.session,\n      language: response.queryResult.languageCode,\n      systemTime,\n      responses,\n    }\n\n    dispatch(saveResponse(data))\n  }\n}\n\nexport function sendMessageWithDialogflow(message) {\n  return (dispatch, getState) => {\n    const { client } = getState().conversation\n    dispatch({ type: INITIATE_LOADING })\n    client\n      .textRequest(message)\n      .then(response => {\n        if (response) {\n          dispatch(getMessageFromDialogflow(response))\n          dispatch({ type: CLEAR_ERROR })\n        } else {\n          dispatch({\n            type: DISPLAY_ERROR,\n            error: 'No response received from chat provider. Please try again.',\n          })\n        }\n      })\n      .catch(error => {\n        throw new Error(error)\n      })\n      .catch(error => {\n        // TODO: log error to analytics\n        console.log(error)\n        dispatch({\n          type: DISPLAY_ERROR,\n          error: 'Unable to connect to the chat provider. Please try again.',\n        })\n      })\n  }\n}\n\nexport function sendEvent(event) {\n  return (dispatch, getState) => {\n    const { client } = getState().conversation\n    dispatch({ type: INITIATE_LOADING })\n    client\n      .eventRequest(event)\n      .then(response => {\n        if (response) {\n          dispatch(getMessageFromDialogflow(response))\n          dispatch({ type: CLEAR_ERROR })\n        } else {\n          dispatch({\n            type: DISPLAY_ERROR,\n            error: 'No response received from chat provider. Please try again.',\n          })\n          dispatch({ type: SET_CONVERSATION_ENDED })\n        }\n      })\n      .catch(error => {\n        throw new Error(error)\n      })\n      .catch(error => {\n        // TODO: log error to analytics\n        console.log(error)\n        dispatch({\n          type: DISPLAY_ERROR,\n          error: 'Unable to connect to the chat provider. Please try again.',\n        })\n      })\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/chatframe/actions/dialogflow.js","import { format } from 'date-fns'\nimport {\n  SAVE_USER_RESPONSE,\n  DISPLAY_ERROR,\n  HIDE_BUTTON_BAR,\n} from './actionTypes'\nimport { setupDialogflow, sendMessageWithDialogflow } from './dialogflow'\n// Date Format\nimport { sysTimeFormat } from '../config/dateFormats'\n\nexport function setupClient(client, clientOptions) {\n  return dispatch => {\n    try {\n      if (!client) {\n        throw new Error('No conversation provider selected.')\n      }\n      // Setup Dialogflow\n      if (client.toLowerCase() === 'dialogflow') {\n        dispatch(setupDialogflow(clientOptions))\n      } else {\n        // Unrecognized client\n        dispatch({\n          type: DISPLAY_ERROR,\n          error: `Unable to connect to ${client}`,\n        })\n        throw new Error(`${client} is not a recognized conversation provider.`)\n      }\n    } catch (error) {\n      // TODO: log error to analytics\n      console.log(error)\n    }\n  }\n}\nexport function sendMessage(message) {\n  return (dispatch, getState) => {\n    const { clientName } = getState().conversation\n    try {\n      if (clientName.toLowerCase() === 'dialogflow') {\n        dispatch(sendMessageWithDialogflow(message))\n      } else {\n        throw new Error(\n          `${clientName} is not a recognized conversation provider.`\n        )\n      }\n    } catch (error) {\n      // TODO: log error to analytics\n      console.log(error)\n      // Unrecognized client\n      dispatch({\n        type: DISPLAY_ERROR,\n        error: `Unable to connect to ${clientName}`,\n      })\n    }\n  }\n}\n\nexport function createUserResponse(text) {\n  return (dispatch, getState) => {\n    const numMessages = getState().conversation.messages.length\n    const systemTime = format(new Date(), sysTimeFormat)\n    const response = {\n      entity: 'user',\n      messageId: `usermessage-${numMessages}`,\n      systemTime,\n      text,\n    }\n    dispatch({ type: SAVE_USER_RESPONSE, response })\n    dispatch({ type: HIDE_BUTTON_BAR })\n    dispatch(sendMessage(text))\n  }\n}\n\nexport function sendQuickReply(text) {\n  return dispatch => {\n    dispatch(createUserResponse(text))\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/chatframe/actions/conversation.js","import get from 'lodash/get'\nimport {\n  parse,\n  format,\n  differenceInMinutes,\n  differenceInSeconds,\n} from 'date-fns'\nimport {\n  SET_TITLE,\n  SET_AVATAR,\n  TIMER_START,\n  UPDATE_CURRENT_TIME,\n  SHOW_WINDOW,\n  HIDE_WINDOW,\n  FULLSCREEN,\n  WINDOWED,\n  SET_CONVERSATION_STARTED,\n  SHOW_PRIVACY_POLICY,\n  HIDE_PRIVACY_POLICY,\n  SET_PRIVACY_POLICY,\n  SET_GOOGLE_MAPS_KEY,\n  SET_CENTER_COORDINATES,\n  SET_ACTIVATION_TEXT,\n  SET_FEEDBACK_URL,\n} from './actionTypes'\n\nimport { sysTimeFormat } from '../config/dateFormats'\nimport { setupClient } from './conversation'\nimport { sendEvent } from './dialogflow'\nimport genbotAvatar from '../genbot_avatar.svg'\n\nexport function showWindow() {\n  return (dispatch, getState) => {\n    const { conversationStarted } = getState().conversation\n    dispatch({ type: SHOW_WINDOW })\n    if (!conversationStarted) {\n      dispatch(sendEvent('Welcome'))\n      dispatch({ type: SET_CONVERSATION_STARTED })\n    }\n  }\n}\nexport function showPrivacyPolicy() {\n  return { type: SHOW_PRIVACY_POLICY }\n}\nexport function hidePrivacyPolicy() {\n  return { type: HIDE_PRIVACY_POLICY }\n}\nexport function hideWindow() {\n  return { type: HIDE_WINDOW }\n}\nexport function showFullscreen() {\n  return { type: FULLSCREEN }\n}\nexport function showWindowed() {\n  return { type: WINDOWED }\n}\n\nfunction updateIdleTime() {\n  return (dispatch, getState) => {\n    const { lastUpdateTime } = getState().conversation\n    const now = new Date()\n    const lastUpdate = parse(\n      lastUpdateTime,\n      sysTimeFormat,\n      new Date(lastUpdateTime)\n    )\n    const diffMinutes = differenceInMinutes(now, lastUpdate)\n    const diffSeconds = differenceInSeconds(now, lastUpdate)\n    let headerTime = 'Now'\n    if (diffMinutes >= 1) {\n      headerTime = `${diffMinutes} min ago`\n    } else if (diffSeconds >= 9) {\n      headerTime = `${diffSeconds} sec ago`\n    }\n\n    const currentTime = format(now, sysTimeFormat)\n\n    dispatch({ type: UPDATE_CURRENT_TIME, headerTime, currentTime })\n  }\n}\n\nexport function startTimer() {\n  return (dispatch, getState) => {\n    const { timer } = getState().conversation\n    // If there's an existing timer, clear it\n    if (timer) {\n      clearInterval(timer)\n    }\n    // Create a new timer to tick every 10 seconds\n    const newTimer = setInterval(() => dispatch(updateIdleTime()), 1000 * 10)\n    // Save the new timer\n    dispatch({ type: TIMER_START, newTimer })\n    // Dispatch the first tick\n    dispatch(updateIdleTime())\n  }\n}\n\nexport function initialize(props) {\n  return dispatch => {\n    const {\n      title,\n      avatar,\n      client,\n      clientOptions,\n      initialActive,\n      fullscreen,\n      policyText,\n      mapConfig,\n      activationText,\n      feedbackUrl,\n    } = props\n    let userAvatar = avatar\n    if (!userAvatar) {\n      userAvatar = genbotAvatar\n    }\n    dispatch({ type: SET_TITLE, title })\n    dispatch({ type: SET_AVATAR, avatar: userAvatar })\n    dispatch(setupClient(client, clientOptions))\n    dispatch(startTimer())\n\n    if (policyText && policyText !== '') {\n      dispatch({ type: SET_PRIVACY_POLICY, policyText })\n    }\n\n    if (activationText && activationText !== '') {\n      dispatch({ type: SET_ACTIVATION_TEXT, activationText })\n    }\n\n    if (feedbackUrl) {\n      dispatch({ type: SET_FEEDBACK_URL, feedbackUrl })\n    }\n\n    if (mapConfig) {\n      const { googleMapsKey, centerCoordinates } = mapConfig\n      const latitude = get(centerCoordinates, 'lat', null)\n      const longitude = get(centerCoordinates, 'lng', null)\n\n      if (googleMapsKey && googleMapsKey !== '') {\n        dispatch({ type: SET_GOOGLE_MAPS_KEY, googleMapsKey })\n      }\n      if (centerCoordinates) {\n        try {\n          if (\n            typeof centerCoordinates === 'object' &&\n            latitude !== null &&\n            longitude !== null\n          ) {\n            dispatch({ type: SET_CENTER_COORDINATES, centerCoordinates })\n          } else {\n            throw new Error(\n              'Please provide valid latitude and longitude coordinates, see README'\n            )\n          }\n        } catch (error) {\n          // TODO: log error to analytics\n          console.log(error)\n        }\n      }\n    }\n\n    if (initialActive === true) {\n      dispatch({ type: SET_CONVERSATION_STARTED })\n      dispatch(sendEvent('Welcome'))\n      dispatch(showWindow())\n    } else {\n      dispatch(hideWindow())\n    }\n\n    if (fullscreen === true) {\n      dispatch(showFullscreen())\n    } else {\n      dispatch(showWindowed())\n    }\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/chatframe/actions/initialization.js","import {\n  SAVE_FEEDBACK_INPUT,\n  SET_FEEDBACK_SUBMITTED,\n  SET_FEEDBACK_OPTIONS,\n} from './actionTypes'\n\nimport { sendMessage } from './conversation'\n\nexport function saveFeedbackInput(value) {\n  return { type: SAVE_FEEDBACK_INPUT, value }\n}\n\nexport function sendFeedback(value) {\n  return dispatch => {\n    dispatch(sendMessage(value))\n  }\n}\n\nexport function setFeedbackOptions(value) {\n  return { type: SET_FEEDBACK_OPTIONS, value }\n}\n\nexport function setFeedbackSubmitted(value) {\n  return { type: SET_FEEDBACK_SUBMITTED, value }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/chatframe/actions/feedbackInput.js","import React, { PureComponent } from 'react'\nimport { connect } from 'react-redux'\nimport styled from 'styled-components'\nimport isEqual from 'lodash/isEqual'\nimport merge from 'lodash/merge'\nimport grey from '@material-ui/core/colors/grey'\nimport { forEachRight, sortBy } from 'lodash'\nimport Message from './Message'\nimport CardResponse from './CardResponse'\nimport MapResponse from './MapResponse'\nimport FeedbackResponse from './FeedbackResponse'\nimport { media } from './styles/media'\n\nconst ContentWrapper = styled.div`\n  display: flex;\n  flex-direction: column;\n  /* Vertically flips the container element to achieve flex-direction:column-reverse effect */\n  transform: scale(1, -1);\n  overflow: auto;\n  ${media.tablet`\n    flex-direction: column-reverse;\n    overflow: auto;\n    transform: none;\n  `};\n`\nconst Content = styled.div`\n  background: ${grey[100]};\n  z-index: 4;\n  grid-area: chatwindow;\n  margin-bottom: 1px;\n  margin-top: 8px;\n\n  /* Vertically flips the content element so that the messages won't be upside down */\n  transform: scale(1, -1);\n\n  ${media.tablet`\n   transform: none;\n  `};\n`\n\nfunction buildUserMessage(message) {\n  return (\n    <Message\n      message={message.text}\n      entity={message.entity}\n      key={message.key}\n      timestamp={message.systemTime}\n      isLoading={false}\n    />\n  )\n}\n\nfunction buildLoadingMessage(message) {\n  return (\n    <Message\n      key='loading'\n      entity='bot'\n      timestamp={message.systemTime}\n      isLoading={message.loading}\n    />\n  )\n}\n\nfunction buildFeedbackResponse(message, shouldScrollIntoView = false) {\n  return (\n    <FeedbackResponse\n      feedbackData={message.payload.feedback}\n      session={message.session}\n      entity={message.entity}\n      key={message.key}\n      isLoading={false}\n      timestamp={message.systemTime}\n      className={shouldScrollIntoView ? 'scrollIntoView' : ''}\n    />\n  )\n}\n\nfunction buildBotTextMessage(message, showTimestamp, shouldScrollIntoView = false) {\n  return (\n    <Message\n      message={message.text}\n      entity={message.entity}\n      key={message.key}\n      isLoading={false}\n      timestamp={message.systemTime}\n      showTimestamp={showTimestamp}\n      className={shouldScrollIntoView ? 'scrollIntoView' : ''}\n    />\n  )\n}\n\nfunction buildBotCardMessage(message, shouldScrollIntoView = false) {\n  return (\n    <CardResponse\n      data={message.card}\n      timestamp={message.systemTime}\n      key={message.key}\n      className={shouldScrollIntoView ? 'scrollIntoView' : ''}\n    />\n  )\n}\n\nfunction buildBotMapMessage(message, shouldScrollIntoView = false) {\n  return (\n    <MapResponse\n      data={message.payload.mapPayload}\n      timestamp={message.systemTime}\n      key={message.key}\n      className={shouldScrollIntoView ? 'scrollIntoView' : ''}\n    />\n  )\n}\nclass ChatWindow extends PureComponent {\n  constructor(props) {\n    super(props)\n    this.messages = []\n    this.state = { messageElements: [] }\n    this.componentRef = React.createRef()\n  }\n\n  componentDidUpdate() {\n    const newMessages = this.parseMessages()\n    if (!isEqual(this.messages, newMessages)) {\n      this.messages = newMessages\n      this.createMessageElements()\n    }\n    if (this.componentRef.current) {\n      this.componentRef.current.addEventListener('wheel', this.handleWheel)\n    }\n  }\n\n  // Sometimes Gen's response is so long it exceeds the height of the\n  // chat window and the window automatically scrolls to the bottom. This\n  // function identifies the index of the first content bubble in Gen's latest\n  // reply so we can use that index to auto scroll to the start of the response.\n  findIndexFirstElementInLastResponse = (messages) => {\n    let index = 0\n    let indexFound = false\n\n    // We use forEachRight because we can't just reverse the collection.\n    // Need the index to decrease each iteration.\n    forEachRight(messages, (m, mIndex) => {\n      if (m.entity === 'bot') {\n        if (!indexFound) {\n          index = mIndex\n        }\n      } else {\n        indexFound = true\n      }\n    })\n\n    return index\n  }\n\n  // Parse the raw message structure from the Redux props and convert\n  // it into the appropriate format for each Message\n  parseMessages = () => {\n    const { messages } = this.props\n    const messageData = []\n\n    messages.forEach(msg => {\n      // We want to make sure that each message has all of the metadata\n      // The structure of the response is not consistent, so we are building\n      // a consistent object describing each message.\n      const metadata = {\n        systemTime: msg.systemTime,\n        entity: msg.entity,\n        session: msg.messageSession,\n        key: msg.key,\n      }\n\n      if (msg.loading) {\n        const loadingMessage = merge(msg, metadata)\n        messageData.push(loadingMessage)\n      } else if (msg.entity === 'bot') {\n        // Bot messages contain an array of 'responses' -- we don't want to\n        // display all of them here (e.g. suggestions), so we only push\n        // the ones we display to the final array\n        msg.responses.forEach((res, i) => {\n          if (\n            res.type === 'text' ||\n            res.type === 'card' ||\n            res.type === 'payload'\n          ) {\n            const botMessage = merge(res, { ...metadata, key: `${metadata.key}_${i}` })\n            messageData.push(botMessage)\n          }\n        })\n      } else if (msg.entity === 'user') {\n        const userMessage = merge(msg, metadata)\n        messageData.push(userMessage)\n      }\n    })\n    return messageData\n  }\n\n  // For each message, create the appropriate React component and save\n  // it for later use.\n  createMessageElements = () => {\n    const newMessages = this.parseMessages()\n    const msgElements = []\n\n    let sortedNewMessages = newMessages\n\n    if (newMessages.length > 1) {\n      sortedNewMessages = sortBy(newMessages, m => new Date(m.systemTime))\n    }\n\n    const indexFirstElementInLastResponse =\n      this.findIndexFirstElementInLastResponse(sortedNewMessages)\n\n    sortedNewMessages.forEach((msg, i) => {\n      const shouldScrollIntoView = i === indexFirstElementInLastResponse\n      let showTimestamp = false\n      // set timestamp display flag to true if it's the last message\n      if (i === sortedNewMessages.length - 1) {\n        showTimestamp = true\n      }\n\n      if (msg.loading) {\n        msgElements.push(buildLoadingMessage(msg))\n      } else if (msg.entity === 'user') {\n        msgElements.push(buildUserMessage(msg))\n      } else if (msg.entity === 'bot' && msg.type === 'text') {\n        msgElements.push(buildBotTextMessage(msg, showTimestamp, shouldScrollIntoView))\n      } else if (msg.entity === 'bot' && msg.type === 'card') {\n        msgElements.push(buildBotCardMessage(msg, shouldScrollIntoView))\n      } else if (\n        msg.entity === 'bot' &&\n        msg.type === 'payload' &&\n        msg.payload.mapPayload\n      ) {\n        msgElements.push(buildBotMapMessage(msg, shouldScrollIntoView))\n      } else if (\n        msg.entity === 'bot' &&\n        msg.type === 'payload' &&\n        msg.payload.feedback\n      ) {\n        msgElements.push(buildFeedbackResponse(msg, shouldScrollIntoView))\n      } else {\n        msgElements.push(\n          buildBotTextMessage({ text: ['Something went wrong.'] })\n        )\n      }\n    })\n\n    this.setState((prevState) => ({ ...prevState, messageElements: msgElements }), () => {\n      // Only after state has been updated, scroll specified element into view.\n      if (document.getElementsByClassName('scrollIntoView')[0]) {\n        // Setting a timeout to 0 is a little trick meant to force the DOM call\n        // to happen after the DOM has rendered.\n        // This logic fails if the element doesn't exist by the time this line is reached.\n        setTimeout(() => document.getElementsByClassName('scrollIntoView')[0].scrollIntoView(false), 0)\n      }\n    })\n  }\n\n  handleWheel = e => {\n    // reverse scroll to handle the transform property\n    if (e.deltaY) {\n      e.preventDefault()\n      e.currentTarget.scrollTop -=\n        parseFloat(\n          getComputedStyle(e.currentTarget).getPropertyValue('font-size')\n        ) *\n        (e.deltaY < 0 ? -1 : 1) *\n        2\n    }\n  }\n\n  componentRef = React.createRef(null)\n\n  render() {\n    const { messageElements } = this.state\n\n    return (\n      <ContentWrapper ref={this.componentRef}>\n        <Content elevation={1} square>\n          {messageElements}\n        </Content>\n      </ContentWrapper>\n    )\n  }\n}\n\nconst mapStateToProps = state => {\n  return {\n    messages: state.conversation.messages,\n    buttonBarVisible: state.buttonBar.visible,\n    error: state.error,\n  }\n}\n\nexport default connect(mapStateToProps)(ChatWindow)\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/chatframe/ChatWindow.js","import { SAVE_USER_INPUT } from './actionTypes'\nimport { createUserResponse } from './conversation'\n\nfunction validateCharacterLimit(userInput) {\n  if (userInput.length > 256) {\n    return false\n  }\n  return true\n}\n\nexport function saveUserInput(value) {\n  const userInput = {\n    value,\n    charLength: value.length || 0,\n    maxExceeded: value.length > 255,\n  }\n  return { type: SAVE_USER_INPUT, userInput }\n}\n\nexport function submitUserInput() {\n  return (dispatch, getState) => {\n    const { userInput } = getState()\n    const trimmedValue = userInput.value.trim()\n    if (!trimmedValue || trimmedValue === '') {\n      return\n    }\n    const validUserInput = validateCharacterLimit(userInput.value)\n    if (validUserInput) {\n      dispatch(createUserResponse(userInput.value))\n      dispatch(saveUserInput(''))\n    }\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/chatframe/actions/userInput.js","export const SET_TITLE = 'SET_TITLE'\nexport const SET_AVATAR = 'SET_AVATAR'\nexport const SAVE_CLIENT = 'SAVE_CLIENT'\nexport const SAVE_RESPONSE = 'SAVE_RESPONSE'\nexport const SAVE_USER_INPUT = 'SAVE_USER_INPUT'\nexport const SAVE_USER_RESPONSE = 'SAVE_USER_RESPONSE'\nexport const INITIATE_LOADING = 'INITIATE_LOADING'\nexport const UPDATE_TIME = 'UPDATE_TIME'\nexport const TIMER_START = 'TIMER_START'\nexport const UPDATE_CURRENT_TIME = 'UPDATE_CURRENT_TIME'\nexport const SHOW_BUTTON_BAR = 'SHOW_BUTTON_BAR'\nexport const HIDE_BUTTON_BAR = 'HIDE_BUTTON_BAR'\nexport const DISPLAY_ERROR = 'DISPLAY_ERROR'\nexport const CLEAR_ERROR = 'CLEAR_ERROR'\nexport const SHOW_WINDOW = 'SHOW_WINDOW'\nexport const HIDE_WINDOW = 'HIDE_WINDOW'\nexport const FULLSCREEN = 'FULLSCREEN'\nexport const WINDOWED = 'WINDOWED'\nexport const RECEIVE_WEBHOOK_DATA = 'RECEIVE_WEBHOOK_DATA'\nexport const DISABLE_INPUT = 'DISABLE_INPUT'\nexport const ENABLE_INPUT = 'ENABLE_INPUT'\nexport const SET_CONVERSATION_STARTED = 'SET_CONVERSATION_STARTED'\nexport const SET_CONVERSATION_ENDED = 'SET_CONVERSATION_ENDED'\nexport const SHOW_PRIVACY_POLICY = 'SHOW_PRIVACY_POLICY'\nexport const HIDE_PRIVACY_POLICY = 'HIDE_PRIVACY_POLICY'\nexport const SET_PRIVACY_POLICY = 'SET_PRIVACY_POLICY'\nexport const SET_GOOGLE_MAPS_KEY = 'SET_GOOGLE_MAPS_KEY'\nexport const SET_CENTER_COORDINATES = 'SET_CENTER_COORDINATES'\nexport const SET_ACTIVATION_TEXT = 'SET_ACTIVATION_TEXT'\nexport const SAVE_FEEDBACK_INPUT = 'SAVE_FEEDBACK_INPUT'\nexport const SET_FEEDBACK_URL = 'SET_FEEDBACK_URL'\nexport const SET_FEEDBACK_SUBMITTED = 'SET_FEEDBACK_SUBMITTED'\nexport const SET_FEEDBACK_OPTIONS = 'SET_FEEDBACK_OPTIONS'\nexport const SET_OUTPUT_CONTEXTS = 'SET_OUTPUT_CONTEXTS'\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/chatframe/actions/actionTypes.js","export const sysTimeFormat = \"yyyy-MM-dd'T'HH:mm:ss.SSS\"\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/chatframe/config/dateFormats.js","import React, { PureComponent } from 'react'\nimport styled from 'styled-components'\nimport Fab from '@material-ui/core/Fab'\nimport Chat from '@material-ui/icons/Chat'\nimport Zoom from '@material-ui/core/Zoom'\nimport { withTheme } from '@material-ui/core/styles'\nimport Avatar from '@material-ui/core/Avatar'\n\n// Redux\nimport { connect } from 'react-redux'\nimport { showWindow } from './actions/initialization'\n\nconst Btn = styled(Fab)`\n  && {\n    display: ${p => (p.active ? 'flex' : 'none')};\n    pointer-events: auto;\n    width: ${p => (p.activationtext ? 'auto' : '56px')};\n    height: ${p => (p.activationtext ? 'auto' : '56px')};\n    padding: ${p => (p.activationtext ? '4px 6px' : 'auto')};\n    border-radius: ${p => (p.activationtext ? '20px' : '50%')};\n  }\n`\n\nconst TextContainer = styled.div`\n  text-transform: none;\n  padding-right: 10px;\n  color: ${p => p.theme.palette.getContrastText(p.theme.palette.primary.dark)};\n`\n\nconst BotAvatar = styled(Avatar)`\n  && {\n    width: 32px;\n    height: 32px;\n    margin-right: 10px;\n    border-radius: 50% 50% 0px 50%;\n  }\n`\n\nclass ActivatorButton extends PureComponent {\n  render() {\n    const {\n      title,\n      windowVisible,\n      showWindow,\n      activationText,\n      theme,\n      avatar,\n    } = this.props\n\n    const contentToDisplay = activationText ? (\n      <React.Fragment>\n        <BotAvatar alt={title} src={avatar} />\n        <TextContainer theme={theme}>{activationText}</TextContainer>\n      </React.Fragment>\n    ) :\n      (\n        <Chat />\n      )\n\n    return (\n      <Zoom in={!windowVisible} unmountOnExit>\n        <Btn\n          color='primary'\n          onClick={showWindow}\n          active={windowVisible ? 0 : 1}\n          activationtext={activationText ? 1 : 0}\n        >\n          {contentToDisplay}\n        </Btn>\n      </Zoom>\n    )\n  }\n}\n\nconst mapStateToProps = state => {\n  return {\n    title: state.config.title,\n    windowVisible: state.config.windowVisible,\n    activationText: state.config.activationText,\n    avatar: state.config.avatar,\n  }\n}\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    showWindow: () => {\n      dispatch(showWindow())\n    },\n  }\n}\n\nexport default withTheme()(\n  connect(\n    mapStateToProps,\n    mapDispatchToProps\n  )(ActivatorButton)\n)\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/chatframe/ActivatorButton.js","import React, { PureComponent } from 'react'\nimport { connect } from 'react-redux'\nimport { withTheme } from '@material-ui/core/styles'\nimport Typography from '@material-ui/core/Typography'\nimport Fullscreen from '@material-ui/icons/Fullscreen'\nimport FullscreenExit from '@material-ui/icons/FullscreenExit'\nimport Info from '@material-ui/icons/Info'\nimport Avatar from '@material-ui/core/Avatar'\nimport IconButton from '@material-ui/core/IconButton'\nimport Close from '@material-ui/icons/Close'\nimport styled from 'styled-components'\nimport Tooltip from '@material-ui/core/Tooltip'\nimport Button from '@material-ui/core/Button'\nimport { findLast, find } from 'lodash'\nimport { sendQuickReply } from './actions/conversation'\n\nimport {\n  hideWindow,\n  showFullscreen,\n  showWindowed,\n  showPrivacyPolicy,\n} from './actions/initialization'\n\nconst BotAvatar = styled(Avatar)`\n  && {\n    flex: 0 0 32px;\n    width: 32px;\n    height: 32px;\n    margin-right: 16px;\n    border-radius: 50% 50% 0px 50%;\n  }\n`\n\nconst Container = styled.div`\n  && {\n    position: relative;\n    background: ${p => p.theme.palette.header.main};\n    padding: 6px;\n    height: 32px;\n    display: flex;\n    flex-flow: row nowrap;\n    align-items: center;\n    border-bottom-left-radius: 0px;\n    border-bottom-right-radius: 0px;\n    border-top-right-radius: 4px;\n    border-top-left-radius: 4px;\n    z-index: 1;\n    grid-area: header;\n    box-sizing: content-box; /*For WordPress*/\n    line-height: normal; /*For WordPress*/\n  }\n`\n\nconst HeaderText = styled(Typography)`\n  && {\n    font-family: 'Product Sans';\n    font-weight: 400;\n    height: 32px;\n    font-size: 18px;\n    line-height: 32px;\n    flex: 1;\n    color: ${p =>\n    p.theme.palette.getContrastText(p.theme.palette.primary.dark)};\n  }\n`\n\nconst HeaderButton = styled(IconButton)`\n  && {\n    padding: 6px;\n    flex: 0;\n    cursor: pointer;\n    color: ${p =>\n    p.theme.palette.getContrastText(p.theme.palette.primary.dark)};\n    &:hover {\n      background: rgba(255, 255, 255, 0.15);\n    }\n  }\n`\n\nconst StartOverButton = styled(Button)`\n  && {\n    font-size: 12px;\n    font-weight: lighter;\n    flex: 0;\n    cursor: pointer;\n    min-width: 85px;\n    padding: 1px;\n    border-radius: 10px;\n    border: 1px solid ${p =>\n    p.theme.palette.getContrastText(p.theme.palette.primary.dark)};\n    color: ${p =>\n    p.theme.palette.getContrastText(p.theme.palette.primary.dark)};\n    &:hover {\n      background: rgba(255, 255, 255, 0.15);\n    }\n  }\n`\n\nclass Header extends PureComponent {\n  render() {\n    const {\n      title,\n      theme,\n      hideWindow,\n      showWindowed,\n      showFullscreen,\n      fullscreen,\n      avatar,\n      showPrivacyPolicy,\n      sendQuickReply,\n      messages\n    } = this.props\n\n    const lastMessageWithSuggestions = findLast(messages, m => {\n      const hasSuggestions = find(m.responses, ['type', 'suggestion'])\n      return hasSuggestions\n    })\n\n    let startOverButtonLabel = null\n\n    if (lastMessageWithSuggestions) {\n      const { suggestions } = lastMessageWithSuggestions.responses.filter(m => m.type === 'suggestion')[0]\n\n      // We search for it and use it instead of hard coding because we want\n      // to persist the casing that we get back from server\n      // The 'start over' and 'home' buttons are essentially the same,\n      // but which we receive is dependent on the back end version, so we check for both.\n      startOverButtonLabel = find(suggestions, x => x.toLowerCase() === 'home' || x.toLowerCase() === 'start over')\n    }\n\n    return (\n      <Container theme={theme}>\n        <BotAvatar alt={title} src={avatar} />\n        <HeaderText theme={theme} variant='h6'>\n          {title}\n        </HeaderText>\n        {startOverButtonLabel &&\n          <Tooltip title='Return to subject selection' placement='bottom'>\n            <StartOverButton\n              theme={theme}\n              onClick={() => sendQuickReply('START OVER')}\n            >\n              Start Over\n            </StartOverButton>\n          </Tooltip>\n        }\n        <Tooltip title='Privacy Policy' placement='bottom'>\n          <HeaderButton\n            theme={theme}\n            onClick={showPrivacyPolicy}\n            aria-label='Windowed'\n          >\n            <Info fontSize='small' />\n          </HeaderButton>\n        </Tooltip>\n        {fullscreen ? (\n          <HeaderButton\n            theme={theme}\n            onClick={showWindowed}\n            aria-label='Windowed'\n          >\n            <FullscreenExit fontSize='small' />\n          </HeaderButton>\n        ) :\n          (\n            <HeaderButton\n              theme={theme}\n              onClick={showFullscreen}\n              aria-label='Fullscreen'\n            >\n              <Fullscreen fontSize='small' />\n            </HeaderButton>\n          )}\n        <HeaderButton theme={theme} onClick={hideWindow} aria-label='Close'>\n          <Close fontSize='small' />\n        </HeaderButton>\n      </Container>\n    )\n  }\n}\n\nconst mapStateToProps = state => {\n  return {\n    title: state.config.title,\n    fullscreen: state.config.fullscreen,\n    avatar: state.config.avatar,\n    messages: state.conversation.messages\n  }\n}\n\nconst mapDispatchToProps = dispatch => ({\n  hideWindow,\n  showFullscreen,\n  showWindowed,\n  showPrivacyPolicy,\n  sendQuickReply: text => dispatch(sendQuickReply(text))\n})\n\nexport default withTheme()(\n  connect(\n    mapStateToProps,\n    mapDispatchToProps\n  )(Header)\n)\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/chatframe/Header.js","import React, { PureComponent } from 'react'\nimport { connect } from 'react-redux'\nimport DialogTitle from '@material-ui/core/DialogTitle'\nimport Dialog from '@material-ui/core/Dialog'\nimport DialogActions from '@material-ui/core/DialogActions'\nimport DialogContent from '@material-ui/core/DialogContent'\nimport DialogContentText from '@material-ui/core/DialogContentText'\nimport Button from '@material-ui/core/Button'\nimport styled from 'styled-components'\nimport { hidePrivacyPolicy } from './actions/initialization'\n\nconst StyledDialog = styled(Dialog)`\n  && {\n    position: absolute;\n  }\n`\n\nclass PrivacyPolicy extends PureComponent {\n  render() {\n    const {\n      hidePrivacyPolicy,\n      privacyPolicyVisible,\n      privacyPolicy,\n      parentRef,\n    } = this.props\n    return (\n      <StyledDialog\n        open={privacyPolicyVisible}\n        onClose={hidePrivacyPolicy}\n        aria-labelledby=\"privacy-policy\"\n        container={parentRef}\n        scroll=\"paper\"\n      >\n        <DialogTitle>Privacy Statement</DialogTitle>\n        <DialogContent>\n          <DialogContentText>{privacyPolicy}</DialogContentText>\n        </DialogContent>\n        <DialogActions>\n          <Button onClick={hidePrivacyPolicy} color=\"primary\">\n            Close\n          </Button>\n        </DialogActions>\n      </StyledDialog>\n    )\n  }\n}\n\nconst mapStateToProps = state => {\n  return {\n    privacyPolicyVisible: state.config.privacyPolicyVisible,\n    privacyPolicy: state.config.privacyPolicy,\n  }\n}\n\nconst mapDispatchToProps = {\n  hidePrivacyPolicy,\n}\n\nexport default connect(\n  mapStateToProps,\n  mapDispatchToProps\n)(PrivacyPolicy)\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/chatframe/PrivacyPolicy.js","import React, { PureComponent } from 'react'\nimport styled from 'styled-components'\n\n// Colors\nimport green from '@material-ui/core/colors/green'\n\nconst Container = styled.div`\n  text-align: center;\n  width: 42px;\n  height: 100%;\n  display: flex;\n  flex-flow: row nowrap;\n  justify-content: space-around;\n  align-items: center;\n`\n\nconst Dot = styled.div`\n  animation: dot-keyframes 1s infinite ease-in-out;\n  background-color: ${green[900]};\n  border-radius: 10px;\n  display: inline-block;\n  height: 8px;\n  width: 8px;\n\n  &:nth-child(2) {\n    animation-delay: 0.25s;\n  }\n\n  &:nth-child(3) {\n    animation-delay: 0.5s;\n  }\n\n  @keyframes dot-keyframes {\n    0% {\n      opacity: 0.4;\n      transform: scale(1, 1);\n    }\n\n    50% {\n      opacity: 1;\n      transform: scale(1.3, 1.3);\n    }\n\n    100% {\n      opacity: 0.4;\n      transform: scale(1, 1);\n    }\n  }\n`\n\nclass Loading extends PureComponent {\n  render() {\n    return (\n      <Container>\n        <Dot />\n        <Dot />\n        <Dot />\n      </Container>\n    )\n  }\n}\n\nexport default Loading\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/chatframe/Loading.js","import React, { Component } from 'react'\nimport { connect } from 'react-redux'\nimport styled from 'styled-components'\nimport { parse, format, isSameDay, subDays } from 'date-fns'\nimport grey from '@material-ui/core/colors/grey'\nimport Typography from '@material-ui/core/Typography'\nimport Markdown from 'markdown-to-jsx'\nimport Link from '@material-ui/core/Link'\nimport { withTheme } from '@material-ui/core/styles'\nimport { sysTimeFormat } from './config/dateFormats'\nimport Loading from './Loading'\n\nconst Container = styled.div`\n  display: flex;\n  flex-flow: column nowrap;\n  margin: 10px;\n  height: min-content;\n  align-items: ${p => (p.entity === 'user' ? 'flex-end' : 'flex-start')};\n  scroll-margin: 15px;\n  p, div {\n    font-size: 14px;\n  }\n`\n\nconst ChatBubble = styled.div`\n  width: 100%;\n  display: flex;\n  flex-flow: row nowrap;\n  padding: 0;\n  justify-content: ${p => (p.entity === 'user' ? 'flex-end' : 'flex-start')};\n`\n\nconst ExternalMessage = styled.div`\n  && {\n    background: ${grey[400]};\n    border-top-right-radius: 10px;\n    border-top-left-radius: 1px;\n    border-bottom-right-radius: 10px;\n    border-bottom-left-radius: 10px;\n    padding: 9px;\n  }\n`\n\nconst UserMessage = styled.div`\n  && {\n    max-width: 360px;\n    overflow: hidden;\n    background-color: ${p => p.theme.palette.primary.main};\n    color: #ffffff;\n    border-top-left-radius: 10px;\n    border-top-right-radius: 1px;\n    border-bottom-right-radius: 10px;\n    border-bottom-left-radius: 10px;\n    padding: 9px;\n  }\n`\n\nconst Timestamp = styled(Typography)`\n  && {\n    color: ${grey[500]};\n    margin-top: 6px;\n    padding-left: 5px;\n    padding-right: 2px;\n  }\n`\n\nconst markdownOptions = {\n  forceBlock: true,\n  overrides: {\n    h6: {\n      component: Typography,\n      props: {\n        variant: 'h6',\n      },\n    },\n    p: {\n      component: Typography,\n      props: {\n        variant: 'body1',\n      },\n    },\n    a: {\n      component: Link,\n    },\n  },\n}\n\nclass Message extends Component {\n  constructor() {\n    super()\n    this.state = { isResponseDelayed: false }\n  }\n\n  componentDidMount() {\n    const { isLoading } = this.props\n\n    if (isLoading) {\n      this.loadingTimer = setTimeout(() => {\n        this.setState(() => ({ isResponseDelayed: true }))\n      }, 8000)\n    }\n  }\n\n  componentWillUnmount() {\n    clearTimeout(this.loadingTimer)\n  }\n\n  render() {\n    const {\n      message,\n      entity,\n      isLoading,\n      timestamp,\n      currentTime,\n      theme,\n      showTimestamp,\n      error,\n      className,\n      key\n    } = this.props\n\n    const { isResponseDelayed } = this.state\n\n    const parsedTimestamp = parse(\n      timestamp,\n      sysTimeFormat,\n      new Date(currentTime)\n    )\n    const isToday = isSameDay(new Date(), parsedTimestamp)\n    const isYesterday = isSameDay(parsedTimestamp, subDays(new Date(), 1))\n\n    let formattedTimestamp = null\n\n    if (isToday) {\n      formattedTimestamp = `Today ${format(parsedTimestamp, 'h:mm aa')}`\n    } else if (isYesterday) {\n      formattedTimestamp = `Yesterday ${format(parsedTimestamp, 'h:mm aa')}`\n    } else {\n      formattedTimestamp = format(parsedTimestamp, 'MMMM dd, yyyy h:mm aa')\n    }\n\n    let filteredBotMessage\n    console.log('Message', message)\n\n    if (message && message[0] !== '') {\n      console.log('message[0]', message[0])\n      filteredBotMessage = message\n    } else {\n      filteredBotMessage = [\n        'Im sorry, I am having trouble understanding that question right now. Please try again later or ask me something else.',\n      ]\n    }\n    const delayedResponseMessage = 'Thank you for your patience, Im working hard to get you the best answer. Hold tight!'\n\n    return (\n      <Container entity={entity} className={className} key={key}>\n        <ChatBubble entity={entity}>\n          {entity === 'user' &&\n            (\n              <UserMessage elevation={1} theme={theme}>\n                {message}\n              </UserMessage>\n            )\n          }\n          {entity !== 'user' &&\n            (\n              <ExternalMessage elevation={1}>\n                {isLoading && !error && !isResponseDelayed && <Loading />}\n                {isLoading && !error && isResponseDelayed &&\n                  <Markdown options={markdownOptions}>\n                    {delayedResponseMessage}\n                  </Markdown>}\n                {isLoading && error && error}\n                {!isLoading && (\n                  <Markdown options={markdownOptions}>\n                    {filteredBotMessage[0]}\n                  </Markdown>\n                )}\n              </ExternalMessage>\n            )\n          }\n        </ChatBubble>\n        {showTimestamp ? (\n          <Timestamp variant='caption'>{formattedTimestamp}</Timestamp>\n        ) : null}\n      </Container>\n    )\n  }\n}\n\nconst mapStateToProps = state => {\n  return {\n    currentTime: state.conversation.currentTime,\n    error: state.error,\n  }\n}\nexport default withTheme()(connect(mapStateToProps)(Message))\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/chatframe/Message.js","import React, { PureComponent } from 'react'\nimport { connect } from 'react-redux'\nimport Card from '@material-ui/core/Card'\nimport CardActions from '@material-ui/core/CardActions'\nimport CardContent from '@material-ui/core/CardContent'\nimport CardMedia from '@material-ui/core/CardMedia'\nimport Markdown from 'markdown-to-jsx'\nimport Link from '@material-ui/core/Link'\nimport Button from '@material-ui/core/Button'\nimport Typography from '@material-ui/core/Typography'\nimport styled from 'styled-components'\nimport { format } from 'date-fns'\n\n// Date Format\nimport { sysTimeFormat } from './config/dateFormats'\n\nconst CardContainer = styled(Card)`\n  && {\n    border-top-left-radius: 10px;\n    border-top-right-radius: 10px;\n    border-bottom-right-radius: 10px;\n    border-bottom-left-radius: 10px;\n    background: #fff;\n    margin: 15px 16px 15px 16px;\n    white-space: pre-line;\n    scroll-margin: 15px;\n  }\n`\n\nconst CardImage = styled(CardMedia)`\n  && {\n    height: ${p => (p.image && p.image !== '' ? '200px' : '0px')};\n    background-size: cover;\n    background-position: center center;\n  }\n`\n\nclass CardResponse extends PureComponent {\n  render() {\n    const { title, subtitle, imageUrl, buttons, className } = this.props.data\n    return (\n      <CardContainer className={className} key={this.props.key}>\n        {imageUrl ? <CardImage image={encodeURI(imageUrl)} title='' /> : null}\n        <CardContent>\n          <Typography gutterBottom variant=\"h6\">\n            {title}\n          </Typography>\n          <Markdown\n            options={{\n              forceBlock: true,\n              overrides: {\n                h6: {\n                  component: Typography,\n                  props: {\n                    variant: 'h6',\n                  },\n                },\n                p: {\n                  component: Typography,\n                  props: {\n                    variant: 'body1',\n                  },\n                },\n                a: {\n                  component: Link,\n                },\n              },\n            }}\n          >\n            {subtitle}\n          </Markdown>\n        </CardContent>\n        <CardActions>\n          {buttons.map((b, index) => {\n            const cardKey = `card-${index}${format(new Date(), sysTimeFormat)}`\n            return (\n              <Button\n                href={b.postback}\n                target=\"_blank\"\n                size=\"small\"\n                color=\"primary\"\n                key={cardKey}\n              >\n                {b.text}\n              </Button>\n            )\n          })}\n        </CardActions>\n      </CardContainer>\n    )\n  }\n}\n\nconst mapStateToProps = state => {\n  return {\n    inputValue: state.userInput,\n  }\n}\n\nexport default connect(mapStateToProps)(CardResponse)\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/chatframe/CardResponse.js","import React from 'react'\nimport { connect } from 'react-redux'\nimport Card from '@material-ui/core/Card'\nimport CardHeader from '@material-ui/core/CardHeader'\nimport CardContent from '@material-ui/core/CardContent'\nimport Table from '@material-ui/core/Table'\nimport TableBody from '@material-ui/core/TableBody'\nimport TableCell from '@material-ui/core/TableCell'\nimport TableRow from '@material-ui/core/TableRow'\nimport Typography from '@material-ui/core/Typography'\nimport Link from '@material-ui/core/Link'\n\nimport styled from 'styled-components'\nimport {\n  withScriptjs,\n  withGoogleMap,\n  GoogleMap,\n  Marker,\n} from 'react-google-maps'\nimport pin from './pin.svg'\nimport personPin from './person-pin.svg'\n\nconst CardContainer = styled(Card)`\n  && {\n    border-top-left-radius: 10px;\n    border-top-right-radius: 10px;\n    border-bottom-right-radius: 10px;\n    border-bottom-left-radius: 10px;\n    background: #fff;\n    margin: 15px 16px 15px 16px;\n    white-space: pre-line;\n    scroll-margin: 15px;\n  }\n`\n\nconst TableContainer = styled.div`\n  height: 150px;\n  font-size: 14px;\n  margin-top: 10px;\n`\n\nconst StyledCardContent = styled(CardContent)`\n  &&& {\n    padding-top: 0;\n    padding-bottom: 0;\n  }\n`\n\nconst StyledTableBody = styled(TableBody)`\n  td {\n    padding: 4px 0px 4px 0px;\n  }\n  tr:last-of-type {\n    td {\n      border-bottom: none;\n    }\n  }\n`\n\nconst StyledAddressTableCell = styled(TableCell)`\n  && {\n    width: 70%;\n    padding: 4px 0px 4px 0px;\n  }\n`\n\nconst StyledDistanceTableCell = styled(TableCell)`\n  &&& {\n    width: 20%;\n    padding-right: 0;\n    text-align: right;\n  }\n`\n\n// Maps documentation: https://tomchentw.github.io/react-google-maps\nfunction MapResponse(props) {\n  const { data, googleMapsKey, className, key } = props\n  const cardHeight = '230px'\n  const iconSize = { width: 30, height: 30 }\n  const googleMapsUrl = `https://maps.googleapis.com/maps/api/js?key=${googleMapsKey}&v=3`\n  const handleMarkerClick = location => {\n    const url = `https://www.google.com/maps/search/?api=1&query=Google&query_place_id=${\n      location.placeId\n      }`\n    window.open(url, '_blank')\n  }\n\n  const Map = withScriptjs(\n    withGoogleMap(() => (\n      <GoogleMap\n        defaultZoom={8}\n        defaultCenter={data.nearestLocations[0]}\n        defaultOptions={{\n          zoomControl: true,\n          mapTypeControl: false,\n          streetViewControl: false,\n          fullscreenControl: false,\n        }}\n      >\n        {data.locations.map((row, i) => (\n          <Marker\n            key={i}\n            position={{ lat: row.lat, lng: row.lng }}\n            icon={{\n              url: pin,\n              scaledSize: iconSize,\n            }}\n            onClick={() => handleMarkerClick(row)}\n          />\n        ))}\n        <Marker\n          position={{\n            lat: data.currentGeocode.lat,\n            lng: data.currentGeocode.lng,\n          }}\n          icon={{\n            url: personPin,\n            scaledSize: iconSize,\n          }}\n        />\n      </GoogleMap>\n    ))\n  )\n\n  return (\n    <CardContainer className={className} key={key}>\n      <CardHeader title='Office Locations' titleTypographyProps={{ variant: 'h6' }} />\n      <StyledCardContent>\n        <Map\n          googleMapURL={googleMapsUrl}\n          loadingElement={<div style={{ height: `${cardHeight}` }} />}\n          containerElement={<div style={{ height: `${cardHeight}` }} />}\n          mapElement={<div style={{ height: '100%' }} />}\n        />\n        <TableContainer>\n          <Table padding='dense'>\n            <StyledTableBody>\n              {data.nearestLocations.map((row, i) => (\n                <TableRow key={i}>\n                  <StyledAddressTableCell padding='dense'>\n                    <Typography>\n                      <Link\n                        href={`https://www.google.com/maps/search/?api=1&query=Google&query_place_id=${\n                          row.placeId\n                          }`}\n                        target='blank'\n                      >\n                        {row.street}, {row.city}\n                      </Link>\n                    </Typography>\n                  </StyledAddressTableCell>\n                  <StyledDistanceTableCell padding='dense'>\n                    {row.distance}\n                  </StyledDistanceTableCell>\n                </TableRow>\n              ))}\n            </StyledTableBody>\n          </Table>\n        </TableContainer>\n      </StyledCardContent>\n    </CardContainer>\n  )\n}\n\nconst mapStateToProps = state => {\n  return {\n    googleMapsKey: state.config.googleMapsKey,\n  }\n}\n\nexport default connect(mapStateToProps)(MapResponse)\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/chatframe/MapResponse.js","import React, { PureComponent } from 'react'\nimport { connect } from 'react-redux'\nimport CardActions from '@material-ui/core/CardActions'\nimport CardContent from '@material-ui/core/CardContent'\nimport Button from '@material-ui/core/Button'\nimport Typography from '@material-ui/core/Typography'\nimport FormControl from '@material-ui/core/FormControl'\nimport FormGroup from '@material-ui/core/FormGroup'\nimport FormControlLabel from '@material-ui/core/FormControlLabel'\nimport Checkbox from '@material-ui/core/Checkbox'\nimport TextField from '@material-ui/core/TextField'\nimport { withStyles } from '@material-ui/core/styles'\nimport every from 'lodash/every'\nimport styled from 'styled-components'\nimport {\n  saveFeedbackInput,\n  sendFeedback,\n} from './actions/feedbackInput'\n\nconst FeedbackInputLabel = styled.div`\n  font-size: 14px;\n  font-weight: bold;\n  padding-bottom: 15px;\n  padding-top: 13px;\n`\n\nconst styles = () => ({\n  root: {\n  },\n  inputMultiline: {\n    fontSize: '0.875rem',\n    overflowY: 'hidden'\n  }\n})\n\nclass FeedbackInput extends PureComponent {\n  constructor() {\n    super()\n    this.state = {\n      isSubmitted: false,\n      feedbackComment: ''\n    }\n  }\n\n  render() {\n    const {\n      feedbackInputs,\n      feedbackUrl,\n      saveFeedbackInput,\n      sendFeedback,\n      session,\n      outputContexts\n    } = this.props\n\n    const handleInputChange = name => event => {\n      const inputItem = {\n        value: name,\n        checked: event.target.checked,\n      }\n      saveFeedbackInput(inputItem)\n    }\n\n    // We need to filter values that are not checked, and return\n    // a list of checked values in the final submission\n    const processList = list => {\n      return list\n        .filter(item => {\n          return item.checked ? item.value : null\n        })\n        .map(item => {\n          return item.value\n        })\n    }\n\n    const sendAnalytics = data => {\n      fetch(feedbackUrl, {\n        method: 'POST',\n        body: JSON.stringify(data),\n        headers: {\n          'Content-Type': 'application/json',\n        },\n      })\n    }\n\n    // On form submit, build the payload data structure,\n    // send the payload to analytics, send message to dialogflow,\n    // and set submitted flag to true in redux state.\n    const handleSubmit = () => {\n      const payload = {\n        wasHelpful: feedbackInputs.wasHelpful,\n        session,\n        feedbackList: processList(feedbackInputs.feedbackList),\n        comment: this.state.feedbackComment,\n        outputContexts\n      }\n\n      sendAnalytics(payload)\n      sendFeedback('Feedback complete')\n      this.setState((prevState) => ({ ...prevState, isSubmitted: true }))\n    }\n\n    return (\n      <React.Fragment>\n        {!this.state.isSubmitted ?\n          (\n            <div>\n              <CardContent>\n                <Typography gutterBottom variant='h6'>\n                  {feedbackInputs.wasHelpful\n                    ? 'Why was Gen helpful?'\n                    : 'Why was Gen not helpful?'}\n                </Typography>\n                <FormControl component='fieldset'>\n                  <FormGroup>\n                    {feedbackInputs.feedbackList\n                      ? feedbackInputs.feedbackList.map(choice => {\n                        return (\n                          <FormControlLabel\n                            key={choice.value}\n                            control={\n                              <Checkbox\n                                checked={choice.checked}\n                                onChange={handleInputChange(choice.value)}\n                                value={choice.value}\n                              />\n                            }\n                            label={choice.value}\n                          />\n                        )\n                      })\n                      : null\n                    }\n                    <FeedbackInputLabel>Add your comments</FeedbackInputLabel>\n                    <TextField\n                      placeholder=\"Type something\"\n                      variant=\"outlined\"\n                      multiline\n                      value={this.state.feedbackComment}\n                      onChange={e => {\n                        // Need to copy the value here because of React's synthetic events\n                        const newValue = e.target.value\n                        this.setState(prevState => ({ ...prevState, feedbackComment: newValue }))\n                      }}\n                      InputProps={{\n                        classes: {\n                          inputMultiline: this.props.classes.inputMultiline\n                        },\n                      }}\n                    />\n                  </FormGroup>\n                </FormControl>\n              </CardContent>\n              <CardActions>\n                <Button\n                  size='small'\n                  color='primary'\n                  onClick={handleSubmit}\n                  disabled={\n                    !(\n                      (!!feedbackInputs.feedbackList && feedbackInputs.feedbackList.length > 0\n                        && !every(feedbackInputs.feedbackList, x => !x.checked))\n                      || !!this.state.feedbackComment)}\n                >\n                  Submit\n                </Button>\n              </CardActions>\n            </div>\n          )\n          :\n          (\n            <CardContent>\n              Thank you. Your feedback is important to us and will help improve Gen.\n            </CardContent>\n          )\n        }\n      </React.Fragment>\n    )\n  }\n}\n\nconst mapStateToProps = state => {\n  return {\n    feedbackInputs: state.feedbackInput,\n    feedbackUrl: state.config.feedbackUrl,\n    outputContexts: state.conversation.outputContexts\n  }\n}\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    saveFeedbackInput: value => {\n      dispatch(saveFeedbackInput(value))\n    },\n    sendFeedback: value => {\n      dispatch(sendFeedback(value))\n    },\n  }\n}\n\nexport default withStyles(styles)(connect(\n  mapStateToProps,\n  mapDispatchToProps\n)(FeedbackInput))\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/chatframe/FeedbackInput.js","import React, { PureComponent } from 'react'\nimport { connect } from 'react-redux'\nimport Card from '@material-ui/core/Card'\nimport styled from 'styled-components'\nimport FeedbackInput from './FeedbackInput'\nimport { setFeedbackOptions } from './actions/feedbackInput'\n\nconst CardContainer = styled(Card)`\n  && {\n    border-top-left-radius: 10px;\n    border-top-right-radius: 10px;\n    border-bottom-right-radius: 10px;\n    border-bottom-left-radius: 10px;\n    background: #fff;\n    margin: 15px 16px 15px 16px;\n    white-space: pre-line;\n    scroll-margin: 15px;\n  }\n`\n\nclass FeedbackResponse extends PureComponent {\n  componentDidMount() {\n    const { setFeedbackOptions, feedbackData } = this.props\n    setFeedbackOptions(feedbackData)\n  }\n\n  render() {\n    const { session, className, key } = this.props\n    return (\n      <CardContainer className={className} key={key}>\n        <FeedbackInput session={session} />\n      </CardContainer>\n    )\n  }\n}\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    setFeedbackOptions: value => {\n      dispatch(setFeedbackOptions(value))\n    },\n  }\n}\n\nconst mapStateToProps = state => {\n  return {\n    feedbackInputs: state.feedbackInput,\n  }\n}\n\nexport default connect(\n  mapStateToProps,\n  mapDispatchToProps\n)(FeedbackResponse)\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/chatframe/FeedbackResponse.js","/* eslint-disable no-param-reassign */\nimport { css } from 'styled-components'\n\nconst sizes = {\n  giant: 1170,\n  desktop: 992,\n  tablet: 768,\n  phone: 620,\n}\n\n// iterate through the sizes and create a media template\nexport const media = Object.keys(sizes).reduce((accumulator, label) => {\n  // use em in breakpoints to work properly cross-browser and support users\n  // changing their browsers font-size: https://zellwk.com/blog/media-query-units/\n  const emSize = sizes[label] / 16\n  accumulator[label] = (...args) => css`\n    @media (max-width: ${emSize}em) {\n      ${css(...args)};\n    }\n  `\n  return accumulator\n}, {})\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/chatframe/styles/media.js","import React, { PureComponent } from 'react'\nimport { connect } from 'react-redux'\nimport Send from '@material-ui/icons/Send'\nimport styled from 'styled-components'\nimport IconButton from '@material-ui/core/IconButton'\nimport TextField from '@material-ui/core/TextField'\n\n// Redux\nimport { saveUserInput, submitUserInput } from './actions/userInput'\n\nconst OuterFrame = styled.div`\n  grid-area: userinput;\n  background: #fefefe;\n  display: flex;\n  display: ${p => (p.visible ? 'none' : 'flex')};\n  flex-flow: row nowrap;\n  justify-content: center;\n  align-items: center;\n  border-top: 1px solid rgba(0, 0, 0, 0.2);\n  z-index: 4;\n  border-bottom-left-radius: 4px;\n  border-bottom-right-radius: 4px;\n`\n\nconst TextInput = styled(TextField)`\n  && {\n    padding: 5px 15px;\n    padding-bottom: ${p => p.helperText !== null && '16px'};\n    /*All properties below are specified to combat WordPress*/\n    \n    textarea {\n      border: none;\n      width: 100%;\n      outline: none;\n      color: #000;\n      height: 100%;\n      padding: 0;\n      font-size: 14px;\n    }\n  }\n`\n\nconst Icon = styled(IconButton)`\n  && {\n    padding-right: 15px;\n    &:hover {\n      background: transparent;\n    }\n  }\n`\nclass UserInput extends PureComponent {\n  constructor() {\n    super()\n    this.handleKeyPress = this.handleKeyPress.bind(this)\n  }\n\n  handleKeyPress(e) {\n    // Enter was pressed\n    if (e.charCode === 13) {\n      this.props.submitUserInput()\n      e.preventDefault()\n    }\n  }\n\n  render() {\n    const { saveUserInput, inputValue, shouldDisable } = this.props\n    const inputValues = inputValue.value\n    const charLimit = `${inputValue.charLength}/255`\n    const { maxExceeded } = inputValue\n    let helperTextValue = null\n\n    if (maxExceeded) {\n      helperTextValue = `Exceeded character limit: ${charLimit}`\n    } else {\n      helperTextValue = null\n    }\n\n    return (\n      <OuterFrame visible={shouldDisable}>\n        <TextInput\n          multiline\n          rowsMax='4'\n          fullWidth\n          InputProps={{ disableUnderline: true }}\n          placeholder='Send a message'\n          helperText={helperTextValue}\n          FormHelperTextProps={{\n            style: { color: '#cd5c5c', margin: 0 },\n          }}\n          onChange={saveUserInput}\n          value={inputValues}\n          onKeyPress={this.handleKeyPress}\n        />\n\n        <Icon\n          onClick={this.props.submitUserInput}\n          aria-label='Send'\n          color='primary'\n          disabled={maxExceeded}\n          disableRipple\n        >\n          <Send />\n        </Icon>\n      </OuterFrame>\n    )\n  }\n}\n\nconst mapStateToProps = state => {\n  return {\n    inputValue: state.userInput,\n    shouldDisable: state.conversation.disableInput,\n  }\n}\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    saveUserInput: e => {\n      dispatch(saveUserInput(e.target.value))\n    },\n    submitUserInput: () => {\n      dispatch(submitUserInput())\n    },\n  }\n}\n\nexport default connect(\n  mapStateToProps,\n  mapDispatchToProps\n)(UserInput)\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/chatframe/UserInput.js","import React, { PureComponent } from 'react'\nimport { connect } from 'react-redux'\nimport styled from 'styled-components'\nimport Grid from '@material-ui/core/Grid'\nimport Button from '@material-ui/core/Button'\nimport { findLast, find, filter, reduce, findIndex } from 'lodash'\nimport grey from '@material-ui/core/colors/grey'\nimport { sendQuickReply } from './actions/conversation'\n\nconst Container = styled.div`\n  grid-area: buttonbar;\n  display: flex;\n  flex-flow: row wrap;\n  justify-content: flex-start;\n  align-items: flex-start;\n  align-content: flex-start;\n  padding: ${p => (p.visible ? '4px 4px 16px 16px' : '0 16px')};\n  background: ${grey[300]};\n  border-top: ${p => (p.visible ? '1px solid rgba(0, 0, 0, 0.2)' : 'none')};\n  overflow-y: auto;\n`\n\nconst Btn = styled(Button)`\n  && {\n    margin-right: 8px;\n    margin-top: 8px;\n    padding-left: 5px;\n    padding-right: 5px;\n    display: ${p => (p.visible === 'true' ? 'block' : 'none')};\n    background-color: ${p => (p.navigationbutton === 'true' ? 'rgb(36,39,44)' : 'rgb(240,240,240)')};\n    color: ${p => (p.navigationbutton === 'true' ? ' white' : 'secondary')};\n    border-radius: 10px;\n    font-size: 14px;\n    width: 100%\n    \n  }\n\n  :hover {\n    background-color: rgb(181,181,181) !important;\n  }\n`\n\nclass ButtonBar extends PureComponent {\n  constructor() {\n    super()\n    this.state = {\n      paginationPage: 1\n    }\n  }\n\n  minColumnSpan = suggestion => {\n    if (suggestion.length >= 18) {\n      return 3\n    } else if (suggestion.length >= 13 && suggestion.length < 18) {\n      return 2\n    }\n    return 1\n  }\n\n  arrangeSubjectMatterSuggestions = suggestionElements => ([\n    [find(suggestionElements, x => x.label.toLowerCase() === 'child support')],\n    [find(suggestionElements, x => x.label.toLowerCase() === 'snap'), find(suggestionElements, x => x.label.toLowerCase() === 'tanf')],\n    [find(suggestionElements, x => x.label.toLowerCase() === 'workforce development')]\n  ])\n\n  playTetris = buttons => {\n    const findNextInCollection = (reqColumnSpan, currentCollection) => {\n      // Find the next button to display in button bar\n      const next = find(currentCollection, x => x.minColumnSpan === reqColumnSpan)\n\n      // Exclude the button found from the collection of buttons left to render\n      const remainingButtons = filter(currentCollection, x => !next || x.label !== next.label)\n\n      return ({\n        next,\n        remainingButtons\n      })\n    }\n\n    const buttonRowsResult = reduce(buttons, (results, currentButton) => {\n      // If the current button has not been added, start a new row\n      if (findIndex(results.remainingButtons, x => x.label === currentButton.label) >= 0) {\n        const btn1 = currentButton\n        let _remainingButtons = filter(results.remainingButtons, x => x.label !== btn1.label)\n\n        // If btn1 is large, then it's the only button in row.\n        // Add the button to the row, and remove the button from list\n        // of buttons left to add\n        if (btn1.minColumnSpan === 3) {\n          return ({\n            buttonRows: [\n              ...results.buttonRows,\n              [btn1]\n            ],\n            remainingButtons: _remainingButtons\n          })\n        }\n\n        // If btn1 is medium, then it needs a second button,\n        // preferably medium, but can be small. If none exist that\n        // match this criteria, then add button by itself. It will span full width\n        // Add the buttons to the row, and remove the buttons from list\n        // of buttons left to add\n        if (btn1.minColumnSpan === 2) {\n          let nextInCollectionResult = findNextInCollection(2, _remainingButtons)\n          _remainingButtons = nextInCollectionResult.remainingButtons\n\n          // If no medium button is found, search for small\n          if (!nextInCollectionResult.next) {\n            nextInCollectionResult = findNextInCollection(1, _remainingButtons)\n            _remainingButtons = nextInCollectionResult.remainingButtons\n          }\n\n          const btn2 = nextInCollectionResult.next\n\n          // Filter out second button if compatible one not found\n          const buttonRow = filter([btn1, btn2], x => !!x)\n\n          return ({\n            buttonRows: [\n              ...results.buttonRows,\n              buttonRow\n            ],\n            remainingButtons: _remainingButtons\n          })\n        }\n\n        // If btn1 is small, then try to fit 3 small. If can't\n        // find 1 or 2 more small, then try to add a medium. If none exist that\n        // match this criteria, then add button by itself and span full width\n        // Add the buttons to the row, and remove the buttons from list\n        // of buttons left to add\n        if (btn1.minColumnSpan === 1) {\n          let nextInCollectionResult = findNextInCollection(1, _remainingButtons)\n          let btn2 = nextInCollectionResult.next\n          _remainingButtons = nextInCollectionResult.remainingButtons\n\n          // If a small button is found, try to find a third\n          if (btn2) {\n            const nextInCollectionResult2 = findNextInCollection(1, _remainingButtons)\n            const btn3 = nextInCollectionResult2.next\n            _remainingButtons = nextInCollectionResult2.remainingButtons\n\n            // Even if a third button is not found, return the current two as row\n\n            // Filter out second and/or third button if compatible not found\n            const buttonRow = filter([btn1, btn2, btn3], x => !!x)\n\n            return ({\n              buttonRows: [\n                ...results.buttonRows,\n                buttonRow\n              ],\n              remainingButtons: _remainingButtons\n            })\n          }\n\n          // If no small button is found, search for medium\n          if (!nextInCollectionResult.next) {\n            nextInCollectionResult = findNextInCollection(2, _remainingButtons)\n            btn2 = nextInCollectionResult.next\n            _remainingButtons = nextInCollectionResult.remainingButtons\n          }\n\n          // Even if a second button is not found, return the current one as row\n\n          // Filter out second button if compatible one not found\n          const buttonRow = filter([btn1, btn2], x => !!x)\n\n          return ({\n            buttonRows: [\n              ...results.buttonRows,\n              buttonRow\n            ],\n            remainingButtons: _remainingButtons\n          })\n        }\n      }\n      return results\n    }, { buttonRows: [], remainingButtons: buttons })\n\n    const { buttonRows } = buttonRowsResult\n\n    return buttonRows\n  }\n\n  handleSuggestionClick = (suggestion) => {\n    this.setState(() => ({ paginationPage: 1 }))\n    this.props.sendQuickReply(suggestion.toUpperCase())\n  }\n\n  render() {\n    const { paginationPage } = this.state\n    const { visible, messages } = this.props\n\n    const lastMessageWithSuggestions = findLast(messages, m => {\n      const hasSuggestions = find(m.responses, ['type', 'suggestion'])\n      return hasSuggestions\n    })\n\n    const suggestionElements = []\n\n    let backButtonLabel = null\n    let isSelectingSubjectMatter = false\n\n    if (lastMessageWithSuggestions) {\n      const { suggestions } = lastMessageWithSuggestions.responses.filter(m => m.type === 'suggestion')[0]\n\n      // Start over and home button are the same, but based on server\n      // code version, we might receive 'home' or 'start over' as suggestion\n      const excludedBackAndStartOver = filter(suggestions, x => x.toLowerCase() !== 'go back' && x.toLowerCase() !== 'home' && x.toLowerCase() !== 'start over')\n\n      if (excludedBackAndStartOver.length === 4\n        && find(excludedBackAndStartOver, x => x.toLowerCase() === 'child support')\n        && find(excludedBackAndStartOver, x => x.toLowerCase() === 'tanf')\n        && find(excludedBackAndStartOver, x => x.toLowerCase() === 'snap')\n        && find(excludedBackAndStartOver, x => x.toLowerCase() === 'workforce development')) {\n        isSelectingSubjectMatter = true\n      }\n\n\n      // We search for it and use it because we want\n      // to persist the casing that we get back from server\n      backButtonLabel = find(suggestions, x => x.toLowerCase() === 'go back')\n\n      for (const suggestion of excludedBackAndStartOver) {\n        const minColumnSpan = this.minColumnSpan(suggestion)\n\n        suggestionElements.push({\n          label: suggestion,\n          id: lastMessageWithSuggestions.messageId,\n          visible,\n          minColumnSpan\n        })\n      }\n    }\n\n    const buttonRows = isSelectingSubjectMatter\n      ? this.arrangeSubjectMatterSuggestions(suggestionElements)\n      : this.playTetris(suggestionElements)\n\n    const numberOfRowsPerPage = 4\n\n    const numberOfNavigationPages = Math.ceil(buttonRows.length / numberOfRowsPerPage)\n\n    const paginationPages = new Array(numberOfNavigationPages)\n      .fill()\n      .map(() => buttonRows.splice(0, numberOfRowsPerPage))\n\n    return (\n      (suggestionElements.length > 0 || backButtonLabel) &&\n      (\n        <Container visible={visible}>\n          {/* Start of suggestion rows */}\n          <Grid container >\n            {suggestionElements.length > 0 &&\n              paginationPages[paginationPage - 1].map((btns, i) => (\n                <Grid\n                  key={`buttonRow_${i}`}\n                  container\n                  item\n                  spacing={8}\n                  xs={12}\n                >\n                  {btns.map((btn, index) => (\n                    <Grid\n                      key={`buttonRow_${i}_${index}`}\n                      item\n                      xs={12 / btns.length}\n                    >\n                      <Btn\n                        size=\"small\"\n                        color=\"secondary\"\n                        key={`${btn.id}-btn${index}`}\n                        visible={btn.visible.toString()}\n                        navigationbutton=\"false\"\n                        onClick={() => this.handleSuggestionClick(btn.label)}\n                      >\n                        {btn.label}\n                      </Btn>\n                    </Grid>\n                  ))\n                  }\n                </Grid>\n              ))\n            }\n            {/* Start of navigation row */}\n            <Grid item container xs={12} justify=\"space-between\" spacing={8}>\n              {backButtonLabel && paginationPage === 1 &&\n                <Grid item xs={4}>\n                  <Btn\n                    size=\"small\"\n                    color=\"secondary\"\n                    visible=\"true\"\n                    navigationbutton=\"true\"\n                    onClick={() => this.handleSuggestionClick(backButtonLabel)}\n                  >\n                    {backButtonLabel}\n                  </Btn>\n                </Grid>\n              }\n              {numberOfNavigationPages > 1 && paginationPage > 1 &&\n                <Grid item xs={5}>\n                  <Btn\n                    size=\"small\"\n                    color=\"secondary\"\n                    visible=\"true\"\n                    navigationbutton=\"true\"\n                    onClick={() => this.setState(\n                      prevState => ({ paginationPage: prevState.paginationPage - 1 }))}\n                  >\n                    Previous Options\n                  </Btn>\n                </Grid>\n              }\n              {numberOfNavigationPages > 1 && paginationPage < numberOfNavigationPages &&\n                <Grid item xs={5}>\n                  <Btn\n                    size=\"small\"\n                    color=\"secondary\"\n                    visible=\"true\"\n                    navigationbutton=\"true\"\n                    onClick={() => this.setState(\n                      prevState => ({ paginationPage: prevState.paginationPage + 1 }))}\n                  >\n                    More Options\n                  </Btn>\n                </Grid>\n              }\n            </Grid>\n          </Grid>\n        </Container >\n      )\n    )\n  }\n}\n\nconst mapStateToProps = state => {\n  return {\n    visible: state.buttonBar.visible,\n    messages: state.conversation.messages,\n  }\n}\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    sendQuickReply: text => {\n      dispatch(sendQuickReply(text))\n    },\n  }\n}\n\nexport default connect(\n  mapStateToProps,\n  mapDispatchToProps,\n)(ButtonBar)\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/chatframe/ButtonBar.js","import React, { PureComponent } from 'react'\nimport Paper from '@material-ui/core/Paper'\nimport styled, { css } from 'styled-components'\nimport { connect } from 'react-redux'\nimport grey from '@material-ui/core/colors/grey'\nimport Header from './Header'\nimport PrivacyPolicy from './PrivacyPolicy'\nimport ChatWindow from './ChatWindow'\nimport UserInput from './UserInput'\nimport ButtonBar from './ButtonBar'\nimport { media } from './styles/media'\n\nconst Container = styled(Paper)`\n  && {\n    width: 400px;\n    height: 70vh;\n    max-height: 600px;\n    overflow: hidden;\n    position: absolute;\n    bottom: 48px;\n    right: 48px;\n    transition: width 120ms ease-in-out, height 150ms ease-in-out;\n    pointer-events: none;\n\n    ${props =>\n    props.fullscreen &&\n    css`\n        width: calc(100% - 96px);\n        height: calc(100% - 96px);\n      `};\n    \n    ${props =>\n    !props.visible &&\n    css`\n          width: 0;\n          height: 0;\n        `};\n\n    ${media.phone`\n    width: ${props => (props.visible ? 'calc(100% - 20px)' : '0')};\n    height: ${props => (props.visible ? 'calc(100% - 96px)' : '0')};\n    right: 10px;\n    max-width: none;\n    max-height: none;\n  `};\n  }\n`\n\nconst OuterFrame = styled.div`\n  && {\n    width: 100%;\n    height: 100%;\n    transform-origin: bottom right;\n    pointer-events: auto;\n    background: ${grey[100]};\n    display: grid;\n    grid-template-columns: 1fr;\n    grid-template-rows: 44px 1fr auto min-content;\n    grid-template-areas:\n      'header'\n      'chatwindow'\n      'buttonbar'\n      'userinput';\n    box-sizing: content-box;\n  }\n`\n\nclass ChatContainer extends PureComponent {\n  constructor(props) {\n    super(props)\n    this.containerRef = React.createRef()\n  }\n  render() {\n    const { windowVisible, fullscreen } = this.props\n    return (\n      <Container\n        elevation={4}\n        fullscreen={fullscreen ? 1 : 0}\n        visible={windowVisible ? 1 : 0}\n      >\n        <OuterFrame ref={this.containerRef} className='mui-fixed'>\n          <Header />\n          <PrivacyPolicy parentRef={this.containerRef.current} />\n          <ChatWindow />\n          <ButtonBar />\n          <UserInput />\n        </OuterFrame>\n      </Container>\n    )\n  }\n}\n\nconst mapStateToProps = state => {\n  return {\n    windowVisible: state.config.windowVisible,\n    fullscreen: state.config.fullscreen,\n  }\n}\n\nexport default connect(mapStateToProps)(ChatContainer)\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/chatframe/ChatContainer.js","import * as t from '../actions/actionTypes'\n\nconst initialState = {\n  avatar: null,\n  title: 'Chat Window',\n  windowVisible: false,\n  fullscreen: false,\n  privacyPolicyVisible: false,\n  googleMapsKey: '',\n  centerCoordinates: '',\n  activationText: '',\n  privacyPolicy:\n    'Please do not enter any personally identifiable information such as SSN, Date of Birth, Case Number or last name.',\n  feedbackUrl: '',\n}\n\nfunction config(state = initialState, action) {\n  switch (action.type) {\n    case t.HIDE_PRIVACY_POLICY:\n      return { ...state, privacyPolicyVisible: false }\n\n    case t.SHOW_PRIVACY_POLICY:\n      return { ...state, privacyPolicyVisible: true }\n\n    case t.SET_PRIVACY_POLICY:\n      return { ...state, privacyPolicy: action.policyText }\n\n    case t.SET_GOOGLE_MAPS_KEY:\n      return { ...state, googleMapsKey: action.googleMapsKey }\n\n    case t.SET_CENTER_COORDINATES:\n      return { ...state, centerCoordinates: action.centerCoordinates }\n\n    case t.SET_ACTIVATION_TEXT:\n      return { ...state, activationText: action.activationText }\n\n    case t.SET_AVATAR:\n      return { ...state, avatar: action.avatar }\n\n    case t.SET_TITLE:\n      return { ...state, title: action.title }\n\n    case t.SHOW_WINDOW:\n      return { ...state, windowVisible: true }\n\n    case t.HIDE_WINDOW:\n      return { ...state, windowVisible: false }\n\n    case t.FULLSCREEN:\n      return { ...state, fullscreen: true }\n\n    case t.WINDOWED:\n      return { ...state, fullscreen: false }\n\n    case t.SET_FEEDBACK_URL:\n      return { ...state, feedbackUrl: action.feedbackUrl }\n\n    default:\n      return state\n  }\n}\n\nexport default config\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/chatframe/reducers/configReducer.js","import { parse, format, differenceInMilliseconds } from 'date-fns'\nimport uuidv4 from 'uuid/v4'\nimport * as t from '../actions/actionTypes'\nimport { sysTimeFormat } from '../config/dateFormats'\n\nconst initialState = {\n  client: null,\n  clientName: null,\n  messages: [],\n  webhookPayload: null,\n  disableInput: false,\n  lastUpdateTime: format(new Date(), sysTimeFormat),\n  currentTime: format(new Date(), sysTimeFormat),\n  headerTime: 'Now',\n  timer: null,\n  conversationStarted: false,\n}\nfunction conversation(state = initialState, action) {\n  switch (action.type) {\n    case t.SAVE_CLIENT:\n      return { ...state, client: action.client, clientName: action.clientName }\n\n    case t.UPDATE_CURRENT_TIME:\n      return {\n        ...state,\n        headerTime: action.headerTime,\n        currentTime: action.currentTime,\n      }\n\n    case t.TIMER_START:\n      return {\n        ...state,\n        timer: action.timer,\n      }\n\n    case t.INITIATE_LOADING:\n      return {\n        ...state,\n        messages: [\n          ...state.messages,\n          {\n            loading: true,\n            entity: 'bot',\n            systemTime: format(new Date(), sysTimeFormat),\n          },\n        ],\n      }\n\n    case t.SAVE_RESPONSE:\n      return {\n        ...state,\n        lastUpdateTime: format(new Date(), sysTimeFormat),\n        headerTime: 'Now',\n        messages: action.newConversationArray,\n      }\n\n    case t.SAVE_USER_RESPONSE:\n      return {\n        ...state,\n        lastUpdateTime: format(new Date(), sysTimeFormat),\n        headerTime: 'Now',\n        messages: [...state.messages, { ...action.response, key: uuidv4() }].sort((a, b) => {\n          const dateA = parse(\n            a.systemTime,\n            sysTimeFormat,\n            new Date(a.systemTime)\n          )\n          const dateB = parse(\n            b.systemTime,\n            sysTimeFormat,\n            new Date(b.systemTime)\n          )\n          const diff = differenceInMilliseconds(dateB, dateA)\n          return diff\n        }),\n      }\n\n    case t.RECEIVE_WEBHOOK_DATA:\n      return {\n        ...state,\n        webhookPayload: action.payload,\n      }\n\n    case t.ENABLE_INPUT:\n      return {\n        ...state,\n        disableInput: false,\n      }\n\n    case t.DISABLE_INPUT:\n      return {\n        ...state,\n        disableInput: true,\n      }\n\n    case t.SET_CONVERSATION_STARTED:\n      return {\n        ...state,\n        conversationStarted: true,\n      }\n\n    case t.SET_CONVERSATION_ENDED:\n      return {\n        ...state,\n        conversationStarted: false,\n      }\n\n    case t.SET_OUTPUT_CONTEXTS:\n      return {\n        ...state,\n        outputContexts: action.rawOutputContexts\n      }\n\n    default:\n      return state\n  }\n}\n\nexport default conversation\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/chatframe/reducers/conversationReducer.js","import * as t from '../actions/actionTypes'\n\nconst initialState = {\n  visible: false,\n  buttons: [],\n}\nfunction config(state = initialState, action) {\n  switch (action.type) {\n    case t.SHOW_BUTTON_BAR:\n      return {\n        ...state,\n        visible: true,\n      }\n    case t.HIDE_BUTTON_BAR:\n      return {\n        ...state,\n        visible: false,\n      }\n    default:\n      return state\n  }\n}\n\nexport default config\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/chatframe/reducers/buttonBarReducer.js","import * as t from '../actions/actionTypes'\n\nconst initialState = {\n  value: '',\n  charLength: 0,\n  maxExceeded: false,\n}\nfunction userInput(state = initialState, action) {\n  switch (action.type) {\n    case t.SAVE_USER_INPUT:\n      return action.userInput\n    default:\n      return state\n  }\n}\n\nexport default userInput\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/chatframe/reducers/userInputReducer.js","import * as t from '../actions/actionTypes'\n\nconst initialState = {\n  submitted: false,\n  wasHelpful: null,\n  feedbackList: null,\n}\n\nfunction feedbackInput(state = initialState, action) {\n  switch (action.type) {\n    case t.SAVE_FEEDBACK_INPUT:\n      return {\n        ...state,\n        feedbackList: state.feedbackList.map(item => {\n          if (item.value === action.value.value) {\n            return { ...item, checked: action.value.checked }\n          }\n          return item\n        }),\n      }\n    case t.SET_FEEDBACK_OPTIONS:\n      return {\n        ...state,\n        wasHelpful: action.value.helpful,\n        feedbackList: action.value.options.map(item => {\n          return { ...item, checked: false }\n        }),\n      }\n    case t.SET_FEEDBACK_SUBMITTED:\n      return { ...state, submitted: true }\n    default:\n      return state\n  }\n}\n\nexport default feedbackInput\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/chatframe/reducers/feedbackInputReducer.js","import * as t from '../actions/actionTypes'\n\nconst initialState = ''\nfunction config(state = initialState, action) {\n  switch (action.type) {\n    case t.DISPLAY_ERROR:\n      return action.error\n\n    case t.CLEAR_ERROR:\n      return initialState\n\n    default:\n      return state\n  }\n}\n\nexport default config\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/chatframe/reducers/errorReducer.js","import { combineReducers } from 'redux'\nimport config from './configReducer'\nimport conversation from './conversationReducer'\nimport buttonBar from './buttonBarReducer'\nimport userInput from './userInputReducer'\nimport feedbackInput from './feedbackInputReducer'\nimport error from './errorReducer'\n\nconst rootReducer = combineReducers({\n  config,\n  conversation,\n  buttonBar,\n  userInput,\n  feedbackInput,\n  error,\n})\nexport default rootReducer\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/chatframe/reducers/rootReducer.js","import { Provider } from 'react-redux'\nimport { createStore, applyMiddleware, compose } from 'redux'\nimport React, { PureComponent } from 'react'\nimport styled from 'styled-components'\nimport WebFont from 'webfontloader'\nimport MuiThemeProvider from '@material-ui/core/styles/MuiThemeProvider'\nimport thunkMiddleware from 'redux-thunk'\nimport 'whatwg-fetch'\nimport grey from '@material-ui/core/colors/grey'\nimport createTheme from './createTheme'\nimport ActivatorButton from './ActivatorButton'\nimport ChatContainer from './ChatContainer'\nimport rootReducer from './reducers/rootReducer'\nimport { initialize } from './actions/initialization'\n\nWebFont.load({\n  google: {\n    families: ['Roboto:300,400,500', 'Product Sans:400'],\n  },\n})\n\nconst OuterContainer = styled.div`\n  width: 100%;\n  height: 100%;\n  pointer-events: none;\n  position: fixed;\n  top: 0;\n  left: 0;\n  z-index: 999999;\n  display: flex;\n  flex-flow: column nowrap;\n  justify-content: center;\n  align-items: center;\n  align-content: center;\n  box-sizing: border-box;\n  font-family: 'Roboto', sans-serif;\n  line-height: normal; /*For WordPress*/\n  & > * {\n    box-sizing: border-box;\n    font-family: 'Roboto', sans-serif;\n\n    & ::-webkit-scrollbar-thumb {\n      background-color: ${grey[600]};\n      -webkit-border-radius: 8px;\n      border-radius: 8px;\n      border: 2px solid ${grey[100]};\n    }\n    & ::-webkit-scrollbar {\n      background-color: ${grey[100]};\n      width: 8px;\n    }\n  }\n`\n\n\nconst composeEnhancer = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose;\n\nclass ChatFrame extends PureComponent {\n  constructor(props) {\n    super(props)\n    this.store = createStore(rootReducer, composeEnhancer(applyMiddleware(thunkMiddleware)))\n    this.currentValue = null\n    this.theme = createTheme(\n      this.props.primaryColor,\n      this.props.secondaryColor,\n      this.props.headerColor\n    )\n  }\n  componentDidMount() {\n    // We load the initial options into the Redux store inside of the\n    // componentDidMount() lifecycle hook. This lets us use Redux to manage\n    // state instead of passing props down manually.\n    this.store.dispatch(initialize(this.props, this.theme))\n\n    // In order to expose when a webhook payload of custom data is received,\n    // we manually create a subscription to the data piece we want to expose\n    this.unsubscribe = this.store.subscribe(() => this.handleChange(this.store))\n  }\n\n  componentWillUnmount() {\n    this.unsubscribe()\n  }\n\n  // Select the current conversation payload from our Redux store\n  select(state) {\n    return state.conversation.webhookPayload\n  }\n\n  // When props are updated (e.g. Theme changes), update entire component\n  handleChange(store) {\n    const previousValue = this.currentValue\n    this.currentValue = this.select(store.getState())\n    if (previousValue !== this.currentValue && this.props.onPayload) {\n      this.props.onPayload(this.currentValue)\n    }\n  }\n\n  render() {\n    return (\n      <Provider store={this.store}>\n        <MuiThemeProvider theme={this.theme}>\n          <OuterContainer>\n            <ChatContainer />\n            <ActivatorButton />\n          </OuterContainer>\n        </MuiThemeProvider>\n      </Provider>\n    )\n  }\n}\n\nexport default ChatFrame\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/chatframe/ChatFrame.js","import ChatFrame from './ChatFrame'\n\nexport default ChatFrame\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/chatframe/index.js","module.exports = require(\"webfontloader\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"webfontloader\"\n// module id = 22\n// module chunks = 0","module.exports = require(\"@material-ui/core/Paper\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"@material-ui/core/Paper\"\n// module id = 34\n// module chunks = 0","module.exports = \"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCI+PGRlZnM+PHBhdGggaWQ9ImEiIGQ9Ik0wIDBoMjR2MjRIMFYweiIvPjwvZGVmcz48Y2xpcFBhdGggaWQ9ImIiPjx1c2UgeGxpbms6aHJlZj0iI2EiIG92ZXJmbG93PSJ2aXNpYmxlIi8+PC9jbGlwUGF0aD48cGF0aCBjbGlwLXBhdGg9InVybCgjYikiIGZpbGw9IiMyOTc5RkYiIGQ9Ik0xMiAyQzguMTQgMiA1IDUuMTQgNSA5YzAgNS4yNSA3IDEzIDcgMTNzNy03Ljc1IDctMTNjMC0zLjg2LTMuMTQtNy03LTd6bTAgMmMxLjEgMCAyIC45IDIgMiAwIDEuMTEtLjkgMi0yIDJzLTItLjg5LTItMmMwLTEuMS45LTIgMi0yem0wIDEwYy0xLjY3IDAtMy4xNC0uODUtNC0yLjE1LjAyLTEuMzIgMi42Ny0yLjA1IDQtMi4wNXMzLjk4LjczIDQgMi4wNWMtLjg2IDEuMy0yLjMzIDIuMTUtNCAyLjE1eiIvPjwvc3ZnPg==\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/chatframe/person-pin.svg\n// module id = 56\n// module chunks = 0","module.exports = require(\"@material-ui/core/FormControl\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"@material-ui/core/FormControl\"\n// module id = 57\n// module chunks = 0"],"sourceRoot":""}