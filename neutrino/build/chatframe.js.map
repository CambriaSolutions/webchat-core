{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap a150e338935d25b952b9","webpack:///external \"react\"","webpack:///./src/components/chatframe/createTheme.js","webpack:///./src/components/chatframe/conversationClient.js","webpack:///./src/components/chatframe/actions/dialogflow.js","webpack:///./src/components/chatframe/actions/conversation.js","webpack:///./src/components/chatframe/actions/initialization.js","webpack:///./src/components/chatframe/actions/feedbackInput.js","webpack:///./src/components/chatframe/ChatWindow.js","webpack:///./src/components/chatframe/actions/userInput.js","webpack:///./src/components/chatframe/actions/actionTypes.js","webpack:///./src/components/chatframe/config/dateFormats.js","webpack:///./src/components/chatframe/ActivatorButton.js","webpack:///./src/components/chatframe/Header.js","webpack:///./src/components/chatframe/PrivacyPolicy.js","webpack:///./src/components/chatframe/Loading.js","webpack:///./src/components/chatframe/Message.js","webpack:///./src/components/chatframe/CardResponse.js","webpack:///./src/components/chatframe/MapResponse.js","webpack:///./src/components/chatframe/FeedbackInput.js","webpack:///./src/components/chatframe/FeedbackResponse.js","webpack:///./src/components/chatframe/styles/media.js","webpack:///./src/components/chatframe/UserInput.js","webpack:///./src/components/chatframe/ButtonBar.js","webpack:///./src/components/chatframe/ChatContainer.js","webpack:///./src/components/chatframe/reducers/configReducer.js","webpack:///./src/components/chatframe/reducers/conversationReducer.js","webpack:///./src/components/chatframe/reducers/buttonBarReducer.js","webpack:///./src/components/chatframe/reducers/userInputReducer.js","webpack:///./src/components/chatframe/reducers/feedbackInputReducer.js","webpack:///./src/components/chatframe/reducers/errorReducer.js","webpack:///./src/components/chatframe/reducers/rootReducer.js","webpack:///./src/components/chatframe/ChatFrame.js","webpack:///./src/components/chatframe/index.js","webpack:///external \"webfontloader\"","webpack:///external \"@material-ui/core/Paper\"","webpack:///./src/components/chatframe/person-pin.svg","webpack:///external \"@material-ui/core/FormControl\""],"names":["primaryColor","secondaryColor","headerColor","newTheme","palette","error","contrastThreshold","tonalOffset","typography","useNextVariants","overrides","MuiFab","root","position","bottom","right","main","createMuiTheme","n","message","response","setTimeout","fetchRetry","dispatch","client","getState","hasSuggestion","find","data","messages","newConversationArray","msg","dateA","parse","a","dateB","b","diff","differenceInMilliseconds","rawOutputContexts","get","rawResponses","unfilteredResponses","type","mapMessageTypeToDescriptor","suggestions","text","card","title","subtitle","imageUrl","buttons","image","imageUri","accessibilityText","rawPayload","Object","field","payload","JSON","modifiedPayload","containsDisablePayload","console","responses","containsDisableInput","systemTime","format","entity","messageId","messageSession","language","clientName","numMessages","sendEvent","now","lastUpdate","diffMinutes","differenceInMinutes","diffSeconds","differenceInSeconds","headerTime","currentTime","clearInterval","newTimer","setInterval","userAvatar","genbotAvatar","policyText","activationText","latitude","longitude","googleMapsKey","loading","key","userInput","charLength","value","maxExceeded","trimmedValue","validUserInput","validateCharacterLimit","createUserResponse","saveUserInput","SET_TITLE","SET_AVATAR","SAVE_CLIENT","SAVE_RESPONSE","SAVE_USER_INPUT","SAVE_USER_RESPONSE","INITIATE_LOADING","TIMER_START","UPDATE_CURRENT_TIME","SHOW_BUTTON_BAR","HIDE_BUTTON_BAR","DISPLAY_ERROR","CLEAR_ERROR","SHOW_WINDOW","HIDE_WINDOW","FULLSCREEN","WINDOWED","RECEIVE_WEBHOOK_DATA","DISABLE_INPUT","ENABLE_INPUT","SET_CONVERSATION_STARTED","SET_CONVERSATION_ENDED","SHOW_PRIVACY_POLICY","HIDE_PRIVACY_POLICY","SET_PRIVACY_POLICY","SET_GOOGLE_MAPS_KEY","SET_CENTER_COORDINATES","SET_ACTIVATION_TEXT","SAVE_FEEDBACK_INPUT","SET_FEEDBACK_URL","SET_FEEDBACK_SUBMITTED","SET_FEEDBACK_OPTIONS","SET_OUTPUT_CONTEXTS","sysTimeFormat","constructor","options","encodeQueryData","params","encodeURIComponent","textRequest","uuid","queryParams","url","textUrl","eventRequest","eventUrl","err","StyledFab","styled","Fab","p","TextContainer","div","BotAvatar","Avatar","mediaMatch","window","useState","matches","setMatches","useEffect","handler","e","styles","customBadge","backgroundColor","height","width","left","border","welcomeBubble","display","isVisible","ChatBubble","StyledCloseIcon","HighlightOffIcon","displayGenGreeting","render","contentToDisplay","badge","classes","windowVisible","withStyles","withTheme","connect","state","avatar","conversationStarted","showWindow","Carat","grey","Container","HeaderText","Typography","HeaderButton","IconButton","fullscreen","showPrivacyPolicy","StyledDialog","Dialog","privacyPolicyVisible","privacyPolicy","hidePrivacyPolicy","Dot","green","ExternalMessage","UserMessage","Timestamp","parsedTimestamp","isToday","isSameDay","isYesterday","subDays","formattedTimestamp","filteredBotMessage","loadingOrErrorMsg","chatMessage","isLoading","h6","component","props","variant","Link","showTimestamp","CardContainer","Card","CardImage","CardMedia","cardKey","inputValue","TableContainer","StyledCardContent","CardContent","StyledTableBody","TableBody","StyledAddressTableCell","TableCell","StyledDistanceTableCell","cardHeight","iconSize","googleMapsUrl","handleMarkerClick","location","placeId","Map","fullscreenControl","lat","row","lng","pin","scaledSize","personPin","city","distance","handleInputChange","name","event","inputItem","checked","saveFeedbackInput","processList","list","item","sendAnalytics","fetch","method","body","headers","feedbackInputs","choice","wasHelpful","feedbackList","outputContexts","sendFeedback","setFeedbackSubmitted","feedbackUrl","componentDidMount","setFeedbackOptions","feedbackInput","sizes","giant","desktop","tablet","phone","media","emSize","accumulator","css","ContentWrapper","Content","ChatMessage","metadata","session","loadingMessage","messageData","res","botMessage","userMessage","newMessages","i","msgElements","buildBotTextMessage","parseFloat","getComputedStyle","React","componentDidUpdate","isEqual","buttonBarVisible","OuterFrame","TextInput","TextField","Icon","handleKeyPress","inputValues","charLimit","helperTextValue","style","color","margin","shouldDisable","disableInput","submitUserInput","Btn","Button","lastMessageWithSuggestions","m","hasSuggestions","suggestionElements","id","visible","btn","sendQuickReply","label","Paper","initialState","centerCoordinates","webhookPayload","lastUpdateTime","timer","rootReducer","action","WebFont","google","families","OuterContainer","composeEnhancer","createStore","applyMiddleware","thunkMiddleware","createTheme","initialize","componentWillUnmount","select","handleChange","previousValue","store","ChatFrame"],"mappings":"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","file":"chatframe.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"chatframe\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"chatframe\"] = factory();\n\telse\n\t\troot[\"chatframe\"] = factory();\n})(typeof self !== 'undefined' ? self : this, function() {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"./\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 19);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap a150e338935d25b952b9","module.exports = require(\"react\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"react\"\n// module id = 0\n// module chunks = 0","import { createMuiTheme } from '@material-ui/core/styles'\r\nimport * as colors from '@material-ui/core/colors'\r\nimport isHexColor from 'validator/lib/isHexColor'\r\n\r\n// Create a color theme to be used by the rest of the chat window. If the user\r\n// defines a color that isn't available, fall back to default colors and\r\n// warn user\r\nexport default function createTheme(\r\n  primaryColor = 'lightBlue',\r\n  secondaryColor = 'pink',\r\n  headerColor = 'lightBlue'\r\n) {\r\n  const newTheme = {\r\n    palette: {\r\n      error: colors.red,\r\n      // Used by `getContrastText()` to maximize the contrast between the background and\r\n      // the text.\r\n      contrastThreshold: 3,\r\n      // Used to shift a color's luminance by approximately\r\n      // two indexes within its tonal palette.\r\n      // E.g., shift from Red 500 to Red 300 or Red 700.\r\n      tonalOffset: 0.2,\r\n    },\r\n    typography: {\r\n      useNextVariants: true,\r\n    },\r\n    overrides: {\r\n      MuiFab: {\r\n        root: {\r\n          position: 'absolute',\r\n          bottom: 48,\r\n          right: 48,\r\n        },\r\n      },\r\n    },\r\n  }\r\n  if (isHexColor(primaryColor)) {\r\n    newTheme.palette.primary = {\r\n      main: primaryColor,\r\n    }\r\n  } else if (colors[primaryColor]) {\r\n    newTheme.palette.primary = colors[primaryColor]\r\n  } else {\r\n    throw new Error(\r\n      `${primaryColor} is not a valid color. Use a color name from https://material.io/guidelines/style/color.html#color-color-palette`\r\n    )\r\n  }\r\n\r\n  if (isHexColor(secondaryColor)) {\r\n    newTheme.palette.secondary = {\r\n      main: secondaryColor,\r\n    }\r\n  } else if (secondaryColor && colors[secondaryColor]) {\r\n    newTheme.palette.secondary = colors[secondaryColor]\r\n  } else {\r\n    throw new Error(\r\n      `${secondaryColor} is not a valid color. \r\n      Use a color name from https://material.io/guidelines/style/color.html#color-color-palette`\r\n    )\r\n  }\r\n\r\n  if (isHexColor(headerColor)) {\r\n    newTheme.palette.header = {\r\n      main: headerColor,\r\n    }\r\n  } else if (colors[headerColor]) {\r\n    newTheme.palette.header = colors[headerColor]\r\n  } else {\r\n    throw new Error(\r\n      `${headerColor} is not a valid color. Use a color name from https://material.io/guidelines/style/color.html#color-color-palette`\r\n    )\r\n  }\r\n\r\n  return createMuiTheme(newTheme)\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/chatframe/createTheme.js","import uuidv4 from 'uuid/v4'\r\n\r\n// If the fetch request fails, try again after 500 ms\r\nfunction fetchRetry(url, n = 1) {\r\n  const message = fetch(url)\r\n    .then(response => {\r\n      return response.json()\r\n    })\r\n    .catch(error => {\r\n      if (n === 1) throw error\r\n      setTimeout(() => {\r\n        fetchRetry(url, n - 1)\r\n      }, 500)\r\n    })\r\n  return message\r\n}\r\n\r\nexport class Client {\r\n  constructor(options) {\r\n    if (!options || !options.textUrl) {\r\n      throw new Error(\r\n        'Fulfillment URL is required to generate a conversation client'\r\n      )\r\n    }\r\n    this.textUrl = options.textUrl\r\n    this.eventUrl = options.eventUrl\r\n    this.uuid = uuidv4()\r\n  }\r\n\r\n  encodeQueryData(data) {\r\n    const params = []\r\n    for (const d in data) {\r\n      params.push(`${encodeURIComponent(d)}=${encodeURIComponent(data[d])}`)\r\n    }\r\n    return params.join('&')\r\n  }\r\n\r\n  textRequest(query) {\r\n    if (!query) {\r\n      throw new Error('Query should not be empty')\r\n    }\r\n    const params = {\r\n      query,\r\n      uuid: this.uuid,\r\n    }\r\n\r\n    const queryParams = this.encodeQueryData(params)\r\n    const url = `${this.textUrl}?${queryParams}`\r\n\r\n    return fetchRetry(url, 2)\r\n  }\r\n\r\n  eventRequest(query) {\r\n    if (!query) {\r\n      throw new Error('Query should not be empty')\r\n    }\r\n\r\n    const params = {\r\n      query,\r\n      uuid: this.uuid,\r\n    }\r\n\r\n    const queryParams = this.encodeQueryData(params)\r\n    const url = `${this.eventUrl}?${queryParams}`\r\n\r\n    return fetch(url)\r\n      .then(response => {\r\n        return response.json()\r\n      })\r\n      .catch(err => {\r\n        throw new Error(err)\r\n      })\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/chatframe/conversationClient.js","import { format, parse, differenceInMilliseconds } from 'date-fns'\r\nimport get from 'lodash/get'\r\nimport find from 'lodash/find'\r\nimport omit from 'lodash/omit'\r\nimport {\r\n  SAVE_CLIENT,\r\n  SAVE_RESPONSE,\r\n  INITIATE_LOADING,\r\n  SHOW_BUTTON_BAR,\r\n  HIDE_BUTTON_BAR,\r\n  DISPLAY_ERROR,\r\n  CLEAR_ERROR,\r\n  RECEIVE_WEBHOOK_DATA,\r\n  DISABLE_INPUT,\r\n  ENABLE_INPUT,\r\n  SET_CONVERSATION_ENDED,\r\n  SET_OUTPUT_CONTEXTS\r\n} from './actionTypes'\r\n// Date Format\r\nimport { sysTimeFormat } from '../config/dateFormats'\r\n\r\nimport { Client } from '../conversationClient'\r\n\r\nexport function setupDialogflow(clientOptions) {\r\n  return dispatch => {\r\n    const client = new Client(clientOptions)\r\n    const clientName = 'dialogflow'\r\n    dispatch({ type: SAVE_CLIENT, client, clientName })\r\n  }\r\n}\r\n\r\nexport function saveResponse(data) {\r\n  return (dispatch, getState) => {\r\n    const { messages } = getState().conversation\r\n    const hasSuggestion = find(data.responses, ['type', 'suggestion'])\r\n\r\n    if (hasSuggestion) {\r\n      dispatch({ type: SHOW_BUTTON_BAR })\r\n    } else {\r\n      dispatch({ type: HIDE_BUTTON_BAR })\r\n    }\r\n    if (messages.length === 0) {\r\n      dispatch({ type: SAVE_RESPONSE, newConversationArray: [data] })\r\n    } else {\r\n      const newConversationArray = messages\r\n        .map(msg => {\r\n          return msg.loading ? data : msg\r\n        })\r\n        .sort((a, b) => {\r\n          const dateA = parse(\r\n            a.systemTime,\r\n            sysTimeFormat,\r\n            new Date(a.systemTime)\r\n          )\r\n          const dateB = parse(\r\n            b.systemTime,\r\n            sysTimeFormat,\r\n            new Date(b.systemTime)\r\n          )\r\n          const diff = differenceInMilliseconds(dateA, dateB)\r\n          return diff\r\n        })\r\n\r\n      dispatch({ type: SAVE_RESPONSE, newConversationArray })\r\n    }\r\n  }\r\n}\r\n\r\nexport function getMessageFromDialogflow(response) {\r\n  return dispatch => {\r\n    function mapMessageTypeToDescriptor(type) {\r\n      switch (type) {\r\n        case 'text':\r\n          return 'text'\r\n        case 'card':\r\n          return 'card'\r\n        case 'quickReplies':\r\n          return 'suggestion'\r\n        case 'image':\r\n          return 'image'\r\n        case 'payload':\r\n          return 'payload'\r\n        default:\r\n          return 'text'\r\n      }\r\n    }\r\n    const rawOutputContexts = get(response, 'queryResult.outputContexts', [])\r\n    dispatch({ type: SET_OUTPUT_CONTEXTS, rawOutputContexts })\r\n\r\n    const rawResponses = get(response, 'queryResult.fulfillmentMessages', [])\r\n    let unfilteredResponses = []\r\n    let containsDisablePayload = false\r\n    try {\r\n      unfilteredResponses = rawResponses.map(msg => {\r\n        const type = mapMessageTypeToDescriptor(msg.message)\r\n        const suggestions = get(msg, 'quickReplies.quickReplies', [])\r\n        const text = get(msg, 'text.text', null)\r\n        const card = {\r\n          title: get(msg, 'card.title', ''),\r\n          subtitle: get(msg, 'card.subtitle', ''),\r\n          imageUrl: get(msg, 'card.imageUri', ''),\r\n          buttons: get(msg, 'card.buttons', []),\r\n        }\r\n        const image = {\r\n          imageUri: get(msg, 'image.imageUri', ''),\r\n          accessibilityText: get(msg, 'image.accessibilityText', ''),\r\n        }\r\n\r\n        const payload = {}\r\n        if (type === 'payload') {\r\n          const rawPayload = get(msg, 'payload.fields', {})\r\n          for (const [field, data] of Object.entries(rawPayload)) {\r\n            if (data.kind === 'stringValue') {\r\n              try {\r\n                // Attempt to parse data.stringValue as JSON in case it is\r\n                payload[field] = JSON.parse(data.stringValue)\r\n              } catch (err) {\r\n                // It's not JSON, just add the string\r\n                payload[field] = data.stringValue\r\n              }\r\n            } else if (data.kind && data.kind !== 'stringValue') {\r\n              throw new Error('Use stringValue to send payloads')\r\n            } else {\r\n              return payload\r\n            }\r\n          }\r\n          // Check for disable input property\r\n          if ('disableInput' in payload) {\r\n            // If there is more than just a dispable input propert in the payload\r\n            // remove disableInput and handle the rest of the payload data\r\n            if (Object.keys(payload).length > 1) {\r\n              const modifiedPayload = omit(payload, ['disableInput'])\r\n              dispatch({ type: RECEIVE_WEBHOOK_DATA, modifiedPayload })\r\n            }\r\n            containsDisablePayload = true\r\n            dispatch({ type: DISABLE_INPUT })\r\n          } else {\r\n            dispatch({ type: RECEIVE_WEBHOOK_DATA, payload })\r\n          }\r\n        }\r\n\r\n        switch (type) {\r\n          case 'text':\r\n            return { type, text }\r\n\r\n          case 'image':\r\n            return { type, image }\r\n\r\n          case 'suggestion':\r\n            return { type, suggestions }\r\n\r\n          case 'card':\r\n            return { type, card }\r\n\r\n          case 'payload':\r\n            return { type, payload }\r\n\r\n          default:\r\n            return { type, text }\r\n        }\r\n      })\r\n    } catch (error) {\r\n      // TODO: log error to analytics\r\n      console.log(error)\r\n    }\r\n\r\n    let responses\r\n    if (containsDisablePayload) {\r\n      responses = unfilteredResponses.filter(response => {\r\n        const containsDisableInput = get(\r\n          response,\r\n          'payload.disableInput',\r\n          false\r\n        )\r\n        return !containsDisableInput\r\n      })\r\n    } else {\r\n      dispatch({ type: ENABLE_INPUT })\r\n      responses = unfilteredResponses\r\n    }\r\n    const systemTime = format(new Date(), sysTimeFormat)\r\n    const data = {\r\n      entity: 'bot',\r\n      loading: false,\r\n      messageId: response.responseId,\r\n      messageSession: response.session,\r\n      language: response.queryResult.languageCode,\r\n      systemTime,\r\n      responses,\r\n    }\r\n\r\n    dispatch(saveResponse(data))\r\n  }\r\n}\r\n\r\nexport function sendMessageWithDialogflow(message) {\r\n  return (dispatch, getState) => {\r\n    const { client } = getState().conversation\r\n    dispatch({ type: INITIATE_LOADING })\r\n    client\r\n      .textRequest(message)\r\n      .then(response => {\r\n        if (response) {\r\n          dispatch(getMessageFromDialogflow(response))\r\n          dispatch({ type: CLEAR_ERROR })\r\n        } else {\r\n          dispatch({\r\n            type: DISPLAY_ERROR,\r\n            error: 'No response received from chat provider. Please try again.',\r\n          })\r\n        }\r\n      })\r\n      .catch(error => {\r\n        throw new Error(error)\r\n      })\r\n      .catch(error => {\r\n        // TODO: log error to analytics\r\n        console.log(error)\r\n        dispatch({\r\n          type: DISPLAY_ERROR,\r\n          error: 'Unable to connect to the chat provider. Please try again.',\r\n        })\r\n      })\r\n  }\r\n}\r\n\r\nexport function sendEvent(event) {\r\n  return (dispatch, getState) => {\r\n    const { client } = getState().conversation\r\n    dispatch({ type: INITIATE_LOADING })\r\n    client\r\n      .eventRequest(event)\r\n      .then(response => {\r\n        if (response) {\r\n          dispatch(getMessageFromDialogflow(response))\r\n          dispatch({ type: CLEAR_ERROR })\r\n        } else {\r\n          dispatch({\r\n            type: DISPLAY_ERROR,\r\n            error: 'No response received from chat provider. Please try again.',\r\n          })\r\n          dispatch({ type: SET_CONVERSATION_ENDED })\r\n        }\r\n      })\r\n      .catch(error => {\r\n        throw new Error(error)\r\n      })\r\n      .catch(error => {\r\n        // TODO: log error to analytics\r\n        console.log(error)\r\n        dispatch({\r\n          type: DISPLAY_ERROR,\r\n          error: 'Unable to connect to the chat provider. Please try again.',\r\n        })\r\n      })\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/chatframe/actions/dialogflow.js","import { format } from 'date-fns'\r\nimport {\r\n  SAVE_USER_RESPONSE,\r\n  DISPLAY_ERROR,\r\n  HIDE_BUTTON_BAR,\r\n} from './actionTypes'\r\nimport { setupDialogflow, sendMessageWithDialogflow } from './dialogflow'\r\n// Date Format\r\nimport { sysTimeFormat } from '../config/dateFormats'\r\n\r\nexport function setupClient(client, clientOptions) {\r\n  return dispatch => {\r\n    try {\r\n      if (!client) {\r\n        throw new Error('No conversation provider selected.')\r\n      }\r\n      // Setup Dialogflow\r\n      if (client.toLowerCase() === 'dialogflow') {\r\n        dispatch(setupDialogflow(clientOptions))\r\n      } else {\r\n        // Unrecognized client\r\n        dispatch({\r\n          type: DISPLAY_ERROR,\r\n          error: `Unable to connect to ${client}`,\r\n        })\r\n        throw new Error(`${client} is not a recognized conversation provider.`)\r\n      }\r\n    } catch (error) {\r\n      // TODO: log error to analytics\r\n      console.log(error)\r\n    }\r\n  }\r\n}\r\nexport function sendMessage(message) {\r\n  return (dispatch, getState) => {\r\n    const { clientName } = getState().conversation\r\n    try {\r\n      if (clientName.toLowerCase() === 'dialogflow') {\r\n        dispatch(sendMessageWithDialogflow(message))\r\n      } else {\r\n        throw new Error(\r\n          `${clientName} is not a recognized conversation provider.`\r\n        )\r\n      }\r\n    } catch (error) {\r\n      // TODO: log error to analytics\r\n      console.log(error)\r\n      // Unrecognized client\r\n      dispatch({\r\n        type: DISPLAY_ERROR,\r\n        error: `Unable to connect to ${clientName}`,\r\n      })\r\n    }\r\n  }\r\n}\r\n\r\nexport function createUserResponse(text) {\r\n  return (dispatch, getState) => {\r\n    const numMessages = getState().conversation.messages.length\r\n    const systemTime = format(new Date(), sysTimeFormat)\r\n    const response = {\r\n      entity: 'user',\r\n      messageId: `usermessage-${numMessages}`,\r\n      systemTime,\r\n      text,\r\n    }\r\n    dispatch({ type: SAVE_USER_RESPONSE, response })\r\n    dispatch({ type: HIDE_BUTTON_BAR })\r\n    dispatch(sendMessage(text))\r\n  }\r\n}\r\n\r\nexport function sendQuickReply(text) {\r\n  return dispatch => {\r\n    dispatch(createUserResponse(text))\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/chatframe/actions/conversation.js","import get from 'lodash/get'\r\nimport {\r\n  parse,\r\n  format,\r\n  differenceInMinutes,\r\n  differenceInSeconds,\r\n} from 'date-fns'\r\nimport {\r\n  SET_TITLE,\r\n  SET_AVATAR,\r\n  TIMER_START,\r\n  UPDATE_CURRENT_TIME,\r\n  SHOW_WINDOW,\r\n  HIDE_WINDOW,\r\n  FULLSCREEN,\r\n  WINDOWED,\r\n  SET_CONVERSATION_STARTED,\r\n  SHOW_PRIVACY_POLICY,\r\n  HIDE_PRIVACY_POLICY,\r\n  SET_PRIVACY_POLICY,\r\n  SET_GOOGLE_MAPS_KEY,\r\n  SET_CENTER_COORDINATES,\r\n  SET_ACTIVATION_TEXT,\r\n  SET_FEEDBACK_URL,\r\n} from './actionTypes'\r\n\r\nimport { sysTimeFormat } from '../config/dateFormats'\r\nimport { setupClient } from './conversation'\r\nimport { sendEvent } from './dialogflow'\r\nimport genbotAvatar from '../genbot_avatar.svg'\r\n\r\nexport function showWindow() {\r\n  return (dispatch, getState) => {\r\n    const { conversationStarted } = getState().conversation\r\n    dispatch({ type: SHOW_WINDOW })\r\n    if (!conversationStarted) {\r\n      dispatch(sendEvent('Welcome'))\r\n      dispatch({ type: SET_CONVERSATION_STARTED })\r\n    }\r\n  }\r\n}\r\nexport function showPrivacyPolicy() {\r\n  return { type: SHOW_PRIVACY_POLICY }\r\n}\r\nexport function hidePrivacyPolicy() {\r\n  return { type: HIDE_PRIVACY_POLICY }\r\n}\r\nexport function hideWindow() {\r\n  return { type: HIDE_WINDOW }\r\n}\r\nexport function showFullscreen() {\r\n  return { type: FULLSCREEN }\r\n}\r\nexport function showWindowed() {\r\n  return { type: WINDOWED }\r\n}\r\n\r\nfunction updateIdleTime() {\r\n  return (dispatch, getState) => {\r\n    const { lastUpdateTime } = getState().conversation\r\n    const now = new Date()\r\n    const lastUpdate = parse(\r\n      lastUpdateTime,\r\n      sysTimeFormat,\r\n      new Date(lastUpdateTime)\r\n    )\r\n    const diffMinutes = differenceInMinutes(now, lastUpdate)\r\n    const diffSeconds = differenceInSeconds(now, lastUpdate)\r\n    let headerTime = 'Now'\r\n    if (diffMinutes >= 1) {\r\n      headerTime = `${diffMinutes} min ago`\r\n    } else if (diffSeconds >= 9) {\r\n      headerTime = `${diffSeconds} sec ago`\r\n    }\r\n\r\n    const currentTime = format(now, sysTimeFormat)\r\n\r\n    dispatch({ type: UPDATE_CURRENT_TIME, headerTime, currentTime })\r\n  }\r\n}\r\n\r\nexport function startTimer() {\r\n  return (dispatch, getState) => {\r\n    const { timer } = getState().conversation\r\n    // If there's an existing timer, clear it\r\n    if (timer) {\r\n      clearInterval(timer)\r\n    }\r\n    // Create a new timer to tick every 10 seconds\r\n    const newTimer = setInterval(() => dispatch(updateIdleTime()), 1000 * 10)\r\n    // Save the new timer\r\n    dispatch({ type: TIMER_START, newTimer })\r\n    // Dispatch the first tick\r\n    dispatch(updateIdleTime())\r\n  }\r\n}\r\n\r\nexport function initialize(props) {\r\n  return dispatch => {\r\n    const {\r\n      title,\r\n      avatar,\r\n      client,\r\n      clientOptions,\r\n      initialActive,\r\n      fullscreen,\r\n      policyText,\r\n      mapConfig,\r\n      activationText,\r\n      feedbackUrl,\r\n    } = props\r\n    let userAvatar = avatar\r\n    if (!userAvatar) {\r\n      userAvatar = genbotAvatar\r\n    }\r\n    dispatch({ type: SET_TITLE, title })\r\n    dispatch({ type: SET_AVATAR, avatar: userAvatar })\r\n    dispatch(setupClient(client, clientOptions))\r\n    dispatch(startTimer())\r\n\r\n    if (policyText && policyText !== '') {\r\n      dispatch({ type: SET_PRIVACY_POLICY, policyText })\r\n    }\r\n\r\n    if (activationText && activationText !== '') {\r\n      dispatch({ type: SET_ACTIVATION_TEXT, activationText })\r\n    }\r\n\r\n    if (feedbackUrl) {\r\n      dispatch({ type: SET_FEEDBACK_URL, feedbackUrl })\r\n    }\r\n\r\n    if (mapConfig) {\r\n      const { googleMapsKey, centerCoordinates } = mapConfig\r\n      const latitude = get(centerCoordinates, 'lat', null)\r\n      const longitude = get(centerCoordinates, 'lng', null)\r\n\r\n      if (googleMapsKey && googleMapsKey !== '') {\r\n        dispatch({ type: SET_GOOGLE_MAPS_KEY, googleMapsKey })\r\n      }\r\n      if (centerCoordinates) {\r\n        try {\r\n          if (\r\n            typeof centerCoordinates === 'object' &&\r\n            latitude !== null &&\r\n            longitude !== null\r\n          ) {\r\n            dispatch({ type: SET_CENTER_COORDINATES, centerCoordinates })\r\n          } else {\r\n            throw new Error(\r\n              'Please provide valid latitude and longitude coordinates, see README'\r\n            )\r\n          }\r\n        } catch (error) {\r\n          // TODO: log error to analytics\r\n          console.log(error)\r\n        }\r\n      }\r\n    }\r\n\r\n    if (initialActive === true) {\r\n      dispatch({ type: SET_CONVERSATION_STARTED })\r\n      dispatch(sendEvent('Welcome'))\r\n      dispatch(showWindow())\r\n    } else {\r\n      dispatch(hideWindow())\r\n    }\r\n\r\n    if (fullscreen === true) {\r\n      dispatch(showFullscreen())\r\n    } else {\r\n      dispatch(showWindowed())\r\n    }\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/chatframe/actions/initialization.js","import {\r\n  SAVE_FEEDBACK_INPUT,\r\n  SET_FEEDBACK_SUBMITTED,\r\n  SET_FEEDBACK_OPTIONS,\r\n} from './actionTypes'\r\n\r\nimport { sendMessage } from './conversation'\r\n\r\nexport function saveFeedbackInput(value) {\r\n  return { type: SAVE_FEEDBACK_INPUT, value }\r\n}\r\n\r\nexport function sendFeedback(value) {\r\n  return dispatch => {\r\n    dispatch(sendMessage(value))\r\n  }\r\n}\r\n\r\nexport function setFeedbackOptions(value) {\r\n  return { type: SET_FEEDBACK_OPTIONS, value }\r\n}\r\n\r\nexport function setFeedbackSubmitted(value) {\r\n  return { type: SET_FEEDBACK_SUBMITTED, value }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/chatframe/actions/feedbackInput.js","import React, { PureComponent } from 'react'\r\nimport { connect } from 'react-redux'\r\nimport styled from 'styled-components'\r\nimport isEqual from 'lodash/isEqual'\r\nimport merge from 'lodash/merge'\r\nimport uuidv4 from 'uuid/v4'\r\nimport grey from '@material-ui/core/colors/grey'\r\nimport { parse, differenceInMilliseconds } from 'date-fns'\r\nimport { sysTimeFormat } from './config/dateFormats'\r\nimport Message from './Message'\r\nimport CardResponse from './CardResponse'\r\nimport MapResponse from './MapResponse'\r\nimport FeedbackResponse from './FeedbackResponse'\r\nimport { media } from './styles/media'\r\n\r\nconst ContentWrapper = styled.div`\r\n  display: flex;\r\n  flex-direction: column;\r\n  /* Vertically flips the container element to achieve flex-direction:column-reverse effect */\r\n  transform: scale(1, -1);\r\n  overflow: auto;\r\n  ${media.tablet`\r\n    flex-direction: column-reverse;\r\n    overflow: auto;\r\n    transform: none;\r\n  `};\r\n`\r\nconst Content = styled.div`\r\n  background: ${grey[100]};\r\n  z-index: 4;\r\n  grid-area: chatwindow;\r\n  margin-bottom: 1px;\r\n  margin-top: 8px;\r\n`\r\n\r\nconst ChatMessage = styled.div`\r\n  /* Vertically flips the content element so that the messages won't be upside down */\r\n  transform: scale(1, -1);\r\n\r\n  ${media.tablet`\r\n   transform: none;\r\n  `};\r\n`\r\n\r\nfunction buildUserMessage(message) {\r\n  return (\r\n    <Message\r\n      message={message.text}\r\n      entity={message.entity}\r\n      key={message.key}\r\n      timestamp={message.systemTime}\r\n      isLoading={false}\r\n    />\r\n  )\r\n}\r\n\r\nfunction buildLoadingMessage(message) {\r\n  return (\r\n    <Message\r\n      key='loading'\r\n      entity='bot'\r\n      timestamp={message.systemTime}\r\n      isLoading={message.loading}\r\n    />\r\n  )\r\n}\r\n\r\nfunction buildFeedbackResponse(message) {\r\n  return (\r\n    <FeedbackResponse\r\n      feedbackData={message.payload.feedback}\r\n      session={message.session}\r\n      entity={message.entity}\r\n      key={message.key}\r\n      isLoading={false}\r\n      timestamp={message.systemTime}\r\n    />\r\n  )\r\n}\r\n\r\nfunction buildBotTextMessage(message, showTimestamp) {\r\n  return (\r\n    <Message\r\n      message={message.text}\r\n      entity={message.entity}\r\n      key={message.key}\r\n      isLoading={false}\r\n      timestamp={message.systemTime}\r\n      showTimestamp={showTimestamp}\r\n    />\r\n  )\r\n}\r\n\r\nfunction buildBotCardMessage(message) {\r\n  return (\r\n    <CardResponse\r\n      data={message.card}\r\n      timestamp={message.systemTime}\r\n      key={message.key}\r\n    />\r\n  )\r\n}\r\n\r\nfunction buildBotMapMessage(message) {\r\n  return (\r\n    <MapResponse\r\n      data={message.payload.mapPayload}\r\n      timestamp={message.systemTime}\r\n      key={message.key}\r\n    />\r\n  )\r\n}\r\nclass ChatWindow extends PureComponent {\r\n  constructor(props) {\r\n    super(props)\r\n    this.messages = []\r\n    this.state = { messageElements: [] }\r\n  }\r\n\r\n  componentDidUpdate() {\r\n    const newMessages = this.parseMessages()\r\n    if (!isEqual(this.messages, newMessages)) {\r\n      this.messages = newMessages\r\n      this.createMessageElements()\r\n    }\r\n    if (this.componentRef.current) {\r\n      this.componentRef.current.addEventListener('wheel', this.handleWheel)\r\n    }\r\n  }\r\n\r\n  // Parse the raw message structure from the Redux props and convert\r\n  // it into the appropriate format for each Message\r\n  parseMessages = () => {\r\n    const { messages } = this.props\r\n    const messageData = []\r\n    messages.forEach(msg => {\r\n      // We want to make sure that each message has all of the metadata\r\n      // The structure of the response is not consistent, so we are building\r\n      // a consistent object describing each message.\r\n      const metadata = {\r\n        systemTime: msg.systemTime,\r\n        entity: msg.entity,\r\n        session: msg.messageSession,\r\n      }\r\n      if (msg.loading) {\r\n        const key = uuidv4()\r\n        metadata.key = key\r\n        const loadingMessage = merge(msg, metadata)\r\n        messageData.push(loadingMessage)\r\n      } else if (msg.entity === 'bot') {\r\n        // Bot messages contain an array of 'responses' -- we don't want to\r\n        // display all of them here (e.g. suggestions), so we only push\r\n        // the ones we display to the final array\r\n        msg.responses.forEach(res => {\r\n          if (\r\n            res.type === 'text' ||\r\n            res.type === 'card' ||\r\n            res.type === 'payload'\r\n          ) {\r\n            const key = uuidv4()\r\n            metadata.key = key\r\n            const botMessage = merge(res, metadata)\r\n            messageData.push(botMessage)\r\n          }\r\n        })\r\n      } else if (msg.entity === 'user') {\r\n        const key = uuidv4()\r\n        metadata.key = key\r\n        const userMessage = merge(msg, metadata)\r\n        messageData.push(userMessage)\r\n      }\r\n    })\r\n    return messageData\r\n  }\r\n\r\n  // For each message, create the appropriate React component and save\r\n  // it for later use.\r\n  createMessageElements = () => {\r\n    const newMessages = this.parseMessages()\r\n    const msgElements = []\r\n    newMessages.forEach((msg, i) => {\r\n      let showTimestamp = false\r\n      // set timestamp display flag to true if it's the last message\r\n      if (i === newMessages.length - 1) {\r\n        showTimestamp = true\r\n      }\r\n\r\n      if (msg.loading) {\r\n        msgElements.push(buildLoadingMessage(msg))\r\n      } else if (msg.entity === 'user') {\r\n        msgElements.push(buildUserMessage(msg))\r\n      } else if (msg.entity === 'bot' && msg.type === 'text') {\r\n        msgElements.push(buildBotTextMessage(msg, showTimestamp))\r\n      } else if (msg.entity === 'bot' && msg.type === 'card') {\r\n        msgElements.push(buildBotCardMessage(msg))\r\n      } else if (\r\n        msg.entity === 'bot' &&\r\n        msg.type === 'payload' &&\r\n        msg.payload.mapPayload\r\n      ) {\r\n        msgElements.push(buildBotMapMessage(msg))\r\n      } else if (\r\n        msg.entity === 'bot' &&\r\n        msg.type === 'payload' &&\r\n        msg.payload.feedback\r\n      ) {\r\n        msgElements.push(buildFeedbackResponse(msg))\r\n      } else {\r\n        console.error('ChatWindow.js, createMessageElements(): newMessages, msg, i', newMessages, msg, i)\r\n        msgElements.push(\r\n          buildBotTextMessage({ text: ['Something went wrong.'] })\r\n        )\r\n      }\r\n    })\r\n\r\n    msgElements.sort((a, b) => {\r\n      const dateA = parse(\r\n        a.props.timestamp,\r\n        sysTimeFormat,\r\n        new Date(a.props.timestamp)\r\n      )\r\n      const dateB = parse(\r\n        b.props.timestamp,\r\n        sysTimeFormat,\r\n        new Date(b.props.timestamp)\r\n      )\r\n      const diff = differenceInMilliseconds(dateA, dateB)\r\n      return diff\r\n    })\r\n    this.setState({ messageElements: msgElements })\r\n  }\r\n\r\n  handleWheel = e => {\r\n    // reverse scroll to handle the transform property\r\n    if (e.deltaY) {\r\n      e.preventDefault()\r\n      e.currentTarget.scrollTop -=\r\n        parseFloat(\r\n          getComputedStyle(e.currentTarget).getPropertyValue('font-size')\r\n        ) *\r\n        (e.deltaY < 0 ? -1 : 1) *\r\n        2\r\n    }\r\n  }\r\n\r\n  componentRef = React.createRef(null)\r\n\r\n  render() {\r\n    const { messageElements } = this.state\r\n    return (\r\n      <ContentWrapper ref={this.componentRef}>\r\n        <Content elevation={1} square>\r\n          <ChatMessage>{messageElements}</ChatMessage>\r\n        </Content>\r\n      </ContentWrapper>\r\n    )\r\n  }\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n  return {\r\n    messages: state.conversation.messages,\r\n    buttonBarVisible: state.buttonBar.visible,\r\n    error: state.error,\r\n  }\r\n}\r\n\r\nexport default connect(mapStateToProps)(ChatWindow)\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/chatframe/ChatWindow.js","import { SAVE_USER_INPUT } from './actionTypes'\r\nimport { createUserResponse } from './conversation'\r\n\r\nfunction validateCharacterLimit(userInput) {\r\n  if (userInput.length > 256) {\r\n    return false\r\n  }\r\n  return true\r\n}\r\n\r\nexport function saveUserInput(value) {\r\n  const userInput = {\r\n    value,\r\n    charLength: value.length || 0,\r\n    maxExceeded: value.length > 255,\r\n  }\r\n  return { type: SAVE_USER_INPUT, userInput }\r\n}\r\n\r\nexport function submitUserInput() {\r\n  return (dispatch, getState) => {\r\n    const { userInput } = getState()\r\n    const trimmedValue = userInput.value.trim()\r\n    if (!trimmedValue || trimmedValue === '') {\r\n      return\r\n    }\r\n    const validUserInput = validateCharacterLimit(userInput.value)\r\n    if (validUserInput) {\r\n      dispatch(createUserResponse(userInput.value))\r\n      dispatch(saveUserInput(''))\r\n    }\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/chatframe/actions/userInput.js","export const SET_TITLE = 'SET_TITLE'\r\nexport const SET_AVATAR = 'SET_AVATAR'\r\nexport const SAVE_CLIENT = 'SAVE_CLIENT'\r\nexport const SAVE_RESPONSE = 'SAVE_RESPONSE'\r\nexport const SAVE_USER_INPUT = 'SAVE_USER_INPUT'\r\nexport const SAVE_USER_RESPONSE = 'SAVE_USER_RESPONSE'\r\nexport const INITIATE_LOADING = 'INITIATE_LOADING'\r\nexport const UPDATE_TIME = 'UPDATE_TIME'\r\nexport const TIMER_START = 'TIMER_START'\r\nexport const UPDATE_CURRENT_TIME = 'UPDATE_CURRENT_TIME'\r\nexport const SHOW_BUTTON_BAR = 'SHOW_BUTTON_BAR'\r\nexport const HIDE_BUTTON_BAR = 'HIDE_BUTTON_BAR'\r\nexport const DISPLAY_ERROR = 'DISPLAY_ERROR'\r\nexport const CLEAR_ERROR = 'CLEAR_ERROR'\r\nexport const SHOW_WINDOW = 'SHOW_WINDOW'\r\nexport const HIDE_WINDOW = 'HIDE_WINDOW'\r\nexport const FULLSCREEN = 'FULLSCREEN'\r\nexport const WINDOWED = 'WINDOWED'\r\nexport const RECEIVE_WEBHOOK_DATA = 'RECEIVE_WEBHOOK_DATA'\r\nexport const DISABLE_INPUT = 'DISABLE_INPUT'\r\nexport const ENABLE_INPUT = 'ENABLE_INPUT'\r\nexport const SET_CONVERSATION_STARTED = 'SET_CONVERSATION_STARTED'\r\nexport const SET_CONVERSATION_ENDED = 'SET_CONVERSATION_ENDED'\r\nexport const SHOW_PRIVACY_POLICY = 'SHOW_PRIVACY_POLICY'\r\nexport const HIDE_PRIVACY_POLICY = 'HIDE_PRIVACY_POLICY'\r\nexport const SET_PRIVACY_POLICY = 'SET_PRIVACY_POLICY'\r\nexport const SET_GOOGLE_MAPS_KEY = 'SET_GOOGLE_MAPS_KEY'\r\nexport const SET_CENTER_COORDINATES = 'SET_CENTER_COORDINATES'\r\nexport const SET_ACTIVATION_TEXT = 'SET_ACTIVATION_TEXT'\r\nexport const SAVE_FEEDBACK_INPUT = 'SAVE_FEEDBACK_INPUT'\r\nexport const SET_FEEDBACK_URL = 'SET_FEEDBACK_URL'\r\nexport const SET_FEEDBACK_SUBMITTED = 'SET_FEEDBACK_SUBMITTED'\r\nexport const SET_FEEDBACK_OPTIONS = 'SET_FEEDBACK_OPTIONS'\r\nexport const SET_OUTPUT_CONTEXTS = 'SET_OUTPUT_CONTEXTS'\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/chatframe/actions/actionTypes.js","export const sysTimeFormat = \"yyyy-MM-dd'T'HH:mm:ss.SSS\"\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/chatframe/config/dateFormats.js","import React, { PureComponent, useEffect, useState } from 'react'\r\nimport styled from 'styled-components'\r\nimport Fab from '@material-ui/core/Fab'\r\nimport Chat from '@material-ui/icons/Chat'\r\nimport Zoom from '@material-ui/core/Zoom'\r\nimport Badge from '@material-ui/core/Badge'\r\nimport { withTheme, withStyles } from '@material-ui/core/styles'\r\nimport Avatar from '@material-ui/core/Avatar'\r\nimport HighlightOffIcon from '@material-ui/icons/HighlightOff';\r\n\r\n// Redux\r\nimport { connect } from 'react-redux'\r\nimport { showWindow } from './actions/initialization'\r\n\r\nconst StyledFab = styled(Fab)`\r\n  && {\r\n    display: ${p => (p.active ? 'flex' : 'none')};\r\n    pointer-events: auto;\r\n    width: ${p => (p.activationtext ? 'auto' : '56px')};\r\n    height: ${p => (p.activationtext ? 'auto' : '56px')};\r\n    padding: ${p => (p.activationtext ? '4px 6px' : 'auto')};\r\n    border-radius: ${p => (p.activationtext ? '20px' : '50%')};\r\n  }\r\n`\r\n\r\nconst TextContainer = styled.div`\r\n  text-transform: none;\r\n  padding-right: 10px;\r\n  color: ${p => p.theme.palette.getContrastText(p.theme.palette.primary.dark)};\r\n`\r\n\r\nconst BotAvatar = styled(Avatar)`\r\n  && {\r\n    width: 32px;\r\n    height: 32px;\r\n    margin-right: 10px;\r\n    border-radius: 50% 50% 0px 50%;\r\n  }\r\n`\r\nconst mediaMatch = window.matchMedia('(min-width: 768px)');\r\nconst [matches, setMatches] = useState(mediaMatch.matches);\r\n\r\nuseEffect(() => {\r\n  const handler = e => setMatches(e.matches);\r\n  mediaMatch.addListener(handler);\r\n  return () => mediaMatch.removeListener(handler);\r\n});\r\n\r\nconst styles = () => ({\r\n  customBadge: {\r\n    backgroundColor: 'red',\r\n    height: '11px',\r\n    width: '11px',\r\n    left: '-13px',\r\n    border: 'solid white 1px'\r\n  },\r\n  welcomeBubble: isVisible => ({\r\n      display: isVisible ? '' : 'none'\r\n  })\r\n});\r\n\r\nconst ChatBubble = styled.div`\r\n  z-index: 10000;\r\n  position: absolute;\r\n  top: -43px;\r\n  left: -315px;\r\n  color: black;\r\n  font-family: 'Product Sans';\r\n  font-weight: 400;\r\n  font-size: 15px;\r\n  text-transform: none;\r\n  max-width: 270px;\r\n  border: 2px solid #666;\r\n  -webkit-border-radius: 30px;\r\n  -moz-border-radius: 30px;\r\n  border-radius: 8px;\r\n  -webkit-box-shadow: 2px 2px 4px #888;\r\n  -moz-box-shadow: 2px 2px 4px #888;\r\n  box-shadow: 2px 2px 4px #888;\r\n  text-align: left;\r\n  padding: 8px;\r\n\r\n  :before {\r\n    content: ' ';\r\n    position: absolute;\r\n    width: 0;\r\n    height: 0px;\r\n    left: 286px;\r\n    top: 11px;\r\n    border: 15px solid;\r\n    border-left: none;\r\n    border-color: transparent transparent #666 transparent;\r\n  }\r\n\r\n  :after {\r\n    content: ' ';\r\n    position: absolute;\r\n    width: 0;\r\n    height: 0;\r\n    left: 266px;\r\n    top: 9px;\r\n    border: 15px solid;\r\n    border-color: transparent transparent #fff transparent;\r\n  }\r\n`\r\n\r\nconst StyledCloseIcon = styled(HighlightOffIcon)`\r\n  color: #666\r\n  position: absolute;\r\n  top: -11px;\r\n  right: -13px;\r\n  background-color: white;\r\n`\r\n\r\nclass ActivatorButton extends PureComponent {\r\n  constructor() {\r\n    super()\r\n    this.state = {\r\n      displayGenGreeting: true\r\n    }\r\n  }\r\n\r\n  closeGenGreeting = (e) => {\r\n    e.stopPropagation()\r\n    this.setState(() => ({ displayGenGreeting: false }))\r\n  }\r\n\r\n  render() {\r\n    const {\r\n      title,\r\n      windowVisible,\r\n      showWindow,\r\n      activationText,\r\n      theme,\r\n      avatar,\r\n      classes,\r\n      conversationStarted\r\n    } = this.props\r\n\r\n    const { displayGenGreeting } = this.state\r\n\r\n    const contentToDisplay = activationText ? (\r\n      <React.Fragment>\r\n        <Badge\r\n          classes={{ badge: classes.customBadge }}\r\n          overlap=\"circle\"\r\n          variant=\"dot\"\r\n          badgeContent={0}\r\n          invisible={!displayGenGreeting || conversationStarted}\r\n        >\r\n          <BotAvatar alt={title} src={avatar} />\r\n          <TextContainer theme={theme}>{activationText}</TextContainer>\r\n          {displayGenGreeting && !conversationStarted &&\r\n            <ChatBubble classes={styles.welcomeBubble(matches)}>\r\n              I have some new features waiting for you. Check it out and let&apos;s chat!\r\n              <StyledCloseIcon onClick={this.closeGenGreeting} />\r\n            </ChatBubble>\r\n          }\r\n        </Badge>\r\n      </React.Fragment >\r\n    ) : (<Chat />)\r\n\r\n    return (\r\n      <Zoom in={!windowVisible} unmountOnExit>\r\n        <StyledFab\r\n          color='primary'\r\n          onClick={showWindow}\r\n          active={windowVisible ? 0 : 1}\r\n          activationtext={activationText ? 1 : 0}\r\n        >\r\n          {contentToDisplay}\r\n        </StyledFab>\r\n      </Zoom>\r\n    )\r\n  }\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n  return {\r\n    title: state.config.title,\r\n    windowVisible: state.config.windowVisible,\r\n    activationText: state.config.activationText,\r\n    avatar: state.config.avatar,\r\n    conversationStarted: state.conversation.conversationStarted\r\n  }\r\n}\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n  return {\r\n    showWindow: () => {\r\n      dispatch(showWindow())\r\n    },\r\n  }\r\n}\r\n\r\nexport default withStyles(styles)(\r\n  withTheme()(\r\n    connect(\r\n      mapStateToProps,\r\n      mapDispatchToProps\r\n    )(ActivatorButton)\r\n  ))\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/chatframe/ActivatorButton.js","import React, { PureComponent } from 'react'\r\nimport { connect } from 'react-redux'\r\nimport { withTheme } from '@material-ui/core/styles'\r\nimport Typography from '@material-ui/core/Typography'\r\nimport Fullscreen from '@material-ui/icons/Fullscreen'\r\nimport FullscreenExit from '@material-ui/icons/FullscreenExit'\r\nimport Info from '@material-ui/icons/Info'\r\nimport Avatar from '@material-ui/core/Avatar'\r\nimport IconButton from '@material-ui/core/IconButton'\r\nimport Close from '@material-ui/icons/Close'\r\nimport grey from '@material-ui/core/colors/grey'\r\nimport styled from 'styled-components'\r\nimport Tooltip from '@material-ui/core/Tooltip'\r\n\r\nimport {\r\n  hideWindow,\r\n  showFullscreen,\r\n  showWindowed,\r\n  showPrivacyPolicy,\r\n} from './actions/initialization'\r\n\r\nconst BotAvatar = styled(Avatar)`\r\n  && {\r\n    flex: 0 0 32px;\r\n    width: 32px;\r\n    height: 32px;\r\n    margin-right: 16px;\r\n    border-radius: 50% 50% 0px 50%;\r\n  }\r\n`\r\n\r\nconst Carat = styled.div`\r\n  position: absolute;\r\n  bottom: -1px;\r\n  left: 27px;\r\n  width: 0;\r\n  height: 0;\r\n  border-left: 6px solid transparent;\r\n  border-right: 6px solid transparent;\r\n  border-bottom: 6px solid ${grey[100]};\r\n`\r\n\r\nconst Container = styled.div`\r\n  && {\r\n    position: relative;\r\n    background: ${p => p.theme.palette.header.main};\r\n    padding: 16px;\r\n    height: 32px;\r\n    display: flex;\r\n    flex-flow: row nowrap;\r\n    align-items: center;\r\n    border-bottom-left-radius: 0px;\r\n    border-bottom-right-radius: 0px;\r\n    border-top-right-radius: 4px;\r\n    border-top-left-radius: 4px;\r\n    z-index: 1;\r\n    grid-area: header;\r\n    box-sizing: content-box; /*For WordPress*/\r\n    line-height: normal; /*For WordPress*/\r\n  }\r\n`\r\n\r\nconst HeaderText = styled(Typography)`\r\n  && {\r\n    font-family: 'Product Sans';\r\n    font-weight: 400;\r\n    height: 32px;\r\n    font-size: 18px;\r\n    line-height: 32px;\r\n    flex: 1;\r\n    color: ${p =>\r\n      p.theme.palette.getContrastText(p.theme.palette.primary.dark)};\r\n  }\r\n`\r\n\r\nconst HeaderButton = styled(IconButton)`\r\n  && {\r\n    padding: 6px;\r\n    flex: 0;\r\n    cursor: pointer;\r\n    color: ${p =>\r\n      p.theme.palette.getContrastText(p.theme.palette.primary.dark)};\r\n    &:hover {\r\n      background: rgba(255, 255, 255, 0.15);\r\n    }\r\n  }\r\n`\r\n\r\nclass Header extends PureComponent {\r\n  render() {\r\n    const {\r\n      title,\r\n      theme,\r\n      hideWindow,\r\n      showWindowed,\r\n      showFullscreen,\r\n      fullscreen,\r\n      avatar,\r\n      showPrivacyPolicy,\r\n    } = this.props\r\n    return (\r\n      <Container theme={theme}>\r\n        <Carat />\r\n        <BotAvatar alt={title} src={avatar} />\r\n        <HeaderText theme={theme} variant='h6'>\r\n          {title}\r\n        </HeaderText>\r\n        <Tooltip title='Privacy Policy' placement='bottom'>\r\n          <HeaderButton\r\n            theme={theme}\r\n            onClick={showPrivacyPolicy}\r\n            aria-label='Windowed'\r\n          >\r\n            <Info fontSize='small' />\r\n          </HeaderButton>\r\n        </Tooltip>\r\n        {fullscreen ? (\r\n          <HeaderButton\r\n            theme={theme}\r\n            onClick={showWindowed}\r\n            aria-label='Windowed'\r\n          >\r\n            <FullscreenExit fontSize='small' />\r\n          </HeaderButton>\r\n        ) : (\r\n          <HeaderButton\r\n            theme={theme}\r\n            onClick={showFullscreen}\r\n            aria-label='Fullscreen'\r\n          >\r\n            <Fullscreen fontSize='small' />\r\n          </HeaderButton>\r\n        )}\r\n        <HeaderButton theme={theme} onClick={hideWindow} aria-label='Close'>\r\n          <Close fontSize='small' />\r\n        </HeaderButton>\r\n      </Container>\r\n    )\r\n  }\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n  return {\r\n    title: state.config.title,\r\n    fullscreen: state.config.fullscreen,\r\n    avatar: state.config.avatar,\r\n  }\r\n}\r\n\r\nconst mapDispatchToProps = {\r\n  hideWindow,\r\n  showFullscreen,\r\n  showWindowed,\r\n  showPrivacyPolicy,\r\n}\r\n\r\nexport default withTheme()(\r\n  connect(\r\n    mapStateToProps,\r\n    mapDispatchToProps\r\n  )(Header)\r\n)\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/chatframe/Header.js","import React, { PureComponent } from 'react'\r\nimport { connect } from 'react-redux'\r\nimport DialogTitle from '@material-ui/core/DialogTitle'\r\nimport Dialog from '@material-ui/core/Dialog'\r\nimport DialogActions from '@material-ui/core/DialogActions'\r\nimport DialogContent from '@material-ui/core/DialogContent'\r\nimport DialogContentText from '@material-ui/core/DialogContentText'\r\nimport Button from '@material-ui/core/Button'\r\nimport styled from 'styled-components'\r\nimport { hidePrivacyPolicy } from './actions/initialization'\r\n\r\nconst StyledDialog = styled(Dialog)`\r\n  && {\r\n    position: absolute;\r\n  }\r\n`\r\n\r\nclass PrivacyPolicy extends PureComponent {\r\n  render() {\r\n    const {\r\n      hidePrivacyPolicy,\r\n      privacyPolicyVisible,\r\n      privacyPolicy,\r\n      parentRef,\r\n    } = this.props\r\n    return (\r\n      <StyledDialog\r\n        open={privacyPolicyVisible}\r\n        onClose={hidePrivacyPolicy}\r\n        aria-labelledby=\"privacy-policy\"\r\n        container={parentRef}\r\n        scroll=\"paper\"\r\n      >\r\n        <DialogTitle>Privacy Statement</DialogTitle>\r\n        <DialogContent>\r\n          <DialogContentText>{privacyPolicy}</DialogContentText>\r\n        </DialogContent>\r\n        <DialogActions>\r\n          <Button onClick={hidePrivacyPolicy} color=\"primary\">\r\n            Close\r\n          </Button>\r\n        </DialogActions>\r\n      </StyledDialog>\r\n    )\r\n  }\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n  return {\r\n    privacyPolicyVisible: state.config.privacyPolicyVisible,\r\n    privacyPolicy: state.config.privacyPolicy,\r\n  }\r\n}\r\n\r\nconst mapDispatchToProps = {\r\n  hidePrivacyPolicy,\r\n}\r\n\r\nexport default connect(\r\n  mapStateToProps,\r\n  mapDispatchToProps\r\n)(PrivacyPolicy)\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/chatframe/PrivacyPolicy.js","import React, { PureComponent } from 'react'\r\nimport styled from 'styled-components'\r\n\r\n// Colors\r\nimport green from '@material-ui/core/colors/green'\r\n\r\nconst Container = styled.div`\r\n  text-align: center;\r\n  width: 42px;\r\n  height: 100%;\r\n  display: flex;\r\n  flex-flow: row nowrap;\r\n  justify-content: space-around;\r\n  align-items: center;\r\n`\r\n\r\nconst Dot = styled.div`\r\n  animation: dot-keyframes 1s infinite ease-in-out;\r\n  background-color: ${green[900]};\r\n  border-radius: 10px;\r\n  display: inline-block;\r\n  height: 8px;\r\n  width: 8px;\r\n\r\n  &:nth-child(2) {\r\n    animation-delay: 0.25s;\r\n  }\r\n\r\n  &:nth-child(3) {\r\n    animation-delay: 0.5s;\r\n  }\r\n\r\n  @keyframes dot-keyframes {\r\n    0% {\r\n      opacity: 0.4;\r\n      transform: scale(1, 1);\r\n    }\r\n\r\n    50% {\r\n      opacity: 1;\r\n      transform: scale(1.3, 1.3);\r\n    }\r\n\r\n    100% {\r\n      opacity: 0.4;\r\n      transform: scale(1, 1);\r\n    }\r\n  }\r\n`\r\n\r\nclass Loading extends PureComponent {\r\n  render() {\r\n    return (\r\n      <Container>\r\n        <Dot />\r\n        <Dot />\r\n        <Dot />\r\n      </Container>\r\n    )\r\n  }\r\n}\r\n\r\nexport default Loading\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/chatframe/Loading.js","import React, { PureComponent } from 'react'\r\nimport { connect } from 'react-redux'\r\nimport styled from 'styled-components'\r\nimport { parse, format, isSameDay, subDays } from 'date-fns'\r\nimport grey from '@material-ui/core/colors/grey'\r\nimport Typography from '@material-ui/core/Typography'\r\nimport Markdown from 'markdown-to-jsx'\r\nimport Link from '@material-ui/core/Link'\r\nimport { withTheme } from '@material-ui/core/styles'\r\nimport { sysTimeFormat } from './config/dateFormats'\r\nimport Loading from './Loading'\r\n\r\nconst Container = styled.div`\r\n  display: flex;\r\n  flex-flow: column nowrap;\r\n  margin: 15px 16px 15px 16px;\r\n  height: min-content;\r\n  align-items: ${p => (p.entity === 'user' ? 'flex-end' : 'flex-start')};\r\n`\r\n\r\nconst ChatBubble = styled.div`\r\n  width: 100%;\r\n  display: flex;\r\n  flex-flow: row nowrap;\r\n  justify-content: ${p => (p.entity === 'user' ? 'flex-end' : 'flex-start')};\r\n`\r\n\r\nconst ExternalMessage = styled.div`\r\n  && {\r\n    background: ${grey[400]};\r\n    border-top-right-radius: 10px;\r\n    border-top-left-radius: 1px;\r\n    border-bottom-right-radius: 10px;\r\n    border-bottom-left-radius: 10px;\r\n    padding: 12px;\r\n  }\r\n`\r\n\r\nconst UserMessage = styled.div`\r\n  && {\r\n    max-width: 360px;\r\n    overflow: hidden;\r\n    background-color: ${p => p.theme.palette.primary.main};\r\n    color: #ffffff;\r\n    border-top-left-radius: 10px;\r\n    border-top-right-radius: 1px;\r\n    border-bottom-right-radius: 10px;\r\n    border-bottom-left-radius: 10px;\r\n    padding: 12px;\r\n  }\r\n`\r\n\r\nconst Timestamp = styled(Typography)`\r\n  && {\r\n    color: ${grey[500]};\r\n    margin-top: 6px;\r\n    padding-left: 5px;\r\n    padding-right: 2px;\r\n  }\r\n`\r\n\r\nclass Message extends PureComponent {\r\n  render() {\r\n    const {\r\n      message,\r\n      entity,\r\n      isLoading,\r\n      timestamp,\r\n      currentTime,\r\n      theme,\r\n      showTimestamp,\r\n      error,\r\n    } = this.props\r\n\r\n    const parsedTimestamp = parse(\r\n      timestamp,\r\n      sysTimeFormat,\r\n      new Date(currentTime)\r\n    )\r\n    const isToday = isSameDay(new Date(), parsedTimestamp)\r\n    const isYesterday = isSameDay(parsedTimestamp, subDays(new Date(), 1))\r\n\r\n    let formattedTimestamp = null\r\n\r\n    if (isToday) {\r\n      formattedTimestamp = `Today ${format(parsedTimestamp, 'h:mm aa')}`\r\n    } else if (isYesterday) {\r\n      formattedTimestamp = `Yesterday ${format(parsedTimestamp, 'h:mm aa')}`\r\n    } else {\r\n      formattedTimestamp = format(parsedTimestamp, 'MMMM dd, yyyy h:mm aa')\r\n    }\r\n\r\n    let filteredBotMessage\r\n    if (message && message[0] !== '') {\r\n      filteredBotMessage = message\r\n    } else {\r\n      console.error('Message.js, class Message, render(), this.props: ', this.props)\r\n\r\n      filteredBotMessage = [\r\n        'Oops! Something happened with the connection. Please try again.',\r\n      ]\r\n    }\r\n\r\n    let loadingOrErrorMsg = <Loading />\r\n    if (isLoading) {\r\n      // display error message from state if it exists\r\n      if (error) {\r\n        loadingOrErrorMsg = error\r\n      }\r\n    }\r\n\r\n    const chatMessage =\r\n      entity === 'user' ? (\r\n        <UserMessage elevation={1} theme={theme}>\r\n          {message}\r\n        </UserMessage>\r\n      ) : (\r\n        <ExternalMessage elevation={1}>\r\n          {isLoading ? (\r\n            loadingOrErrorMsg\r\n          ) : (\r\n            <Markdown\r\n              options={{\r\n                forceBlock: true,\r\n                overrides: {\r\n                  h6: {\r\n                    component: Typography,\r\n                    props: {\r\n                      variant: 'h6',\r\n                    },\r\n                  },\r\n                  p: {\r\n                    component: Typography,\r\n                    props: {\r\n                      variant: 'body1',\r\n                    },\r\n                  },\r\n                  a: {\r\n                    component: Link,\r\n                  },\r\n                },\r\n              }}\r\n            >\r\n              {filteredBotMessage[0]}\r\n            </Markdown>\r\n          )}\r\n        </ExternalMessage>\r\n      )\r\n    return (\r\n      <Container entity={entity}>\r\n        <ChatBubble entity={entity}>{chatMessage}</ChatBubble>\r\n        {showTimestamp ? (\r\n          <Timestamp variant='caption'>{formattedTimestamp}</Timestamp>\r\n        ) : null}\r\n      </Container>\r\n    )\r\n  }\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n  return {\r\n    currentTime: state.conversation.currentTime,\r\n    error: state.error,\r\n  }\r\n}\r\nexport default withTheme()(connect(mapStateToProps)(Message))\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/chatframe/Message.js","import React, { PureComponent } from 'react'\r\nimport { connect } from 'react-redux'\r\nimport Card from '@material-ui/core/Card'\r\nimport CardActions from '@material-ui/core/CardActions'\r\nimport CardContent from '@material-ui/core/CardContent'\r\nimport CardMedia from '@material-ui/core/CardMedia'\r\nimport Markdown from 'markdown-to-jsx'\r\nimport Link from '@material-ui/core/Link'\r\nimport Button from '@material-ui/core/Button'\r\nimport Typography from '@material-ui/core/Typography'\r\nimport styled from 'styled-components'\r\nimport { format } from 'date-fns'\r\n\r\n// Date Format\r\nimport { sysTimeFormat } from './config/dateFormats'\r\n\r\nconst CardContainer = styled(Card)`\r\n  && {\r\n    border-top-left-radius: 10px;\r\n    border-top-right-radius: 10px;\r\n    border-bottom-right-radius: 10px;\r\n    border-bottom-left-radius: 10px;\r\n    background: #fff;\r\n    margin: 15px 16px 15px 16px;\r\n    white-space: pre-line;\r\n  }\r\n`\r\n\r\nconst CardImage = styled(CardMedia)`\r\n  && {\r\n    height: ${p => (p.image && p.image !== '' ? '200px' : '0px')};\r\n    background-size: cover;\r\n    background-position: center center;\r\n  }\r\n`\r\n\r\nclass CardResponse extends PureComponent {\r\n  render() {\r\n    const { title, subtitle, imageUrl, buttons } = this.props.data\r\n    return (\r\n      <CardContainer>\r\n        {imageUrl ? <CardImage image={encodeURI(imageUrl)} title='' /> : null}\r\n        <CardContent>\r\n          <Typography gutterBottom variant=\"h6\">\r\n            {title}\r\n          </Typography>\r\n          <Markdown\r\n            options={{\r\n              forceBlock: true,\r\n              overrides: {\r\n                h6: {\r\n                  component: Typography,\r\n                  props: {\r\n                    variant: 'h6',\r\n                  },\r\n                },\r\n                p: {\r\n                  component: Typography,\r\n                  props: {\r\n                    variant: 'body1',\r\n                  },\r\n                },\r\n                a: {\r\n                  component: Link,\r\n                },\r\n              },\r\n            }}\r\n          >\r\n            {subtitle}\r\n          </Markdown>\r\n        </CardContent>\r\n        <CardActions>\r\n          {buttons.map((b, index) => {\r\n            const cardKey = `card-${index}${format(new Date(), sysTimeFormat)}`\r\n            return (\r\n              <Button\r\n                href={b.postback}\r\n                target=\"_blank\"\r\n                size=\"small\"\r\n                color=\"primary\"\r\n                key={cardKey}\r\n              >\r\n                {b.text}\r\n              </Button>\r\n            )\r\n          })}\r\n        </CardActions>\r\n      </CardContainer>\r\n    )\r\n  }\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n  return {\r\n    inputValue: state.userInput,\r\n  }\r\n}\r\n\r\nexport default connect(mapStateToProps)(CardResponse)\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/chatframe/CardResponse.js","import React from 'react'\r\nimport { connect } from 'react-redux'\r\nimport Card from '@material-ui/core/Card'\r\nimport CardHeader from '@material-ui/core/CardHeader'\r\nimport CardContent from '@material-ui/core/CardContent'\r\nimport Table from '@material-ui/core/Table'\r\nimport TableBody from '@material-ui/core/TableBody'\r\nimport TableCell from '@material-ui/core/TableCell'\r\nimport TableRow from '@material-ui/core/TableRow'\r\nimport Typography from '@material-ui/core/Typography'\r\nimport Link from '@material-ui/core/Link'\r\n\r\nimport styled from 'styled-components'\r\nimport {\r\n  withScriptjs,\r\n  withGoogleMap,\r\n  GoogleMap,\r\n  Marker,\r\n} from 'react-google-maps'\r\nimport pin from './pin.svg'\r\nimport personPin from './person-pin.svg'\r\n\r\nconst CardContainer = styled(Card)`\r\n  && {\r\n    border-top-left-radius: 10px;\r\n    border-top-right-radius: 10px;\r\n    border-bottom-right-radius: 10px;\r\n    border-bottom-left-radius: 10px;\r\n    background: #fff;\r\n    margin: 15px 16px 15px 16px;\r\n    white-space: pre-line;\r\n  }\r\n`\r\n\r\nconst TableContainer = styled.div`\r\n  height: 150px;\r\n  font-size: 12px;\r\n  margin-top: 10px;\r\n`\r\n\r\nconst StyledCardContent = styled(CardContent)`\r\n  &&& {\r\n    padding-top: 0;\r\n    padding-bottom: 0;\r\n  }\r\n`\r\n\r\nconst StyledTableBody = styled(TableBody)`\r\n  td {\r\n    padding: 4px 0px 4px 0px;\r\n  }\r\n  tr:last-of-type {\r\n    td {\r\n      border-bottom: none;\r\n    }\r\n  }\r\n`\r\n\r\nconst StyledAddressTableCell = styled(TableCell)`\r\n  && {\r\n    width: 70%;\r\n    padding: 4px 0px 4px 0px;\r\n  }\r\n`\r\n\r\nconst StyledDistanceTableCell = styled(TableCell)`\r\n  &&& {\r\n    width: 20%;\r\n    padding-right: 0;\r\n    text-align: right;\r\n  }\r\n`\r\n\r\n// Maps documentation: https://tomchentw.github.io/react-google-maps\r\nfunction MapResponse(props) {\r\n  const { data, googleMapsKey } = props\r\n  const cardHeight = '230px'\r\n  const iconSize = { width: 30, height: 30 }\r\n  const googleMapsUrl = `https://maps.googleapis.com/maps/api/js?key=${googleMapsKey}&v=3`\r\n  const handleMarkerClick = location => {\r\n    const url = `https://www.google.com/maps/search/?api=1&query=Google&query_place_id=${\r\n      location.placeId\r\n    }`\r\n    window.open(url, '_blank')\r\n  }\r\n\r\n  const Map = withScriptjs(\r\n    withGoogleMap(() => (\r\n      <GoogleMap\r\n        defaultZoom={8}\r\n        defaultCenter={data.nearestLocations[0]}\r\n        defaultOptions={{\r\n          zoomControl: true,\r\n          mapTypeControl: false,\r\n          streetViewControl: false,\r\n          fullscreenControl: false,\r\n        }}\r\n      >\r\n        {data.locations.map((row, i) => (\r\n          <Marker\r\n            key={i}\r\n            position={{ lat: row.lat, lng: row.lng }}\r\n            icon={{\r\n              url: pin,\r\n              scaledSize: iconSize,\r\n            }}\r\n            onClick={() => handleMarkerClick(row)}\r\n          />\r\n        ))}\r\n        <Marker\r\n          position={{\r\n            lat: data.currentGeocode.lat,\r\n            lng: data.currentGeocode.lng,\r\n          }}\r\n          icon={{\r\n            url: personPin,\r\n            scaledSize: iconSize,\r\n          }}\r\n        />\r\n      </GoogleMap>\r\n    ))\r\n  )\r\n\r\n  return (\r\n    <CardContainer>\r\n      <CardHeader title='Office Locations' />\r\n      <StyledCardContent>\r\n        <Map\r\n          googleMapURL={googleMapsUrl}\r\n          loadingElement={<div style={{ height: `${cardHeight}` }} />}\r\n          containerElement={<div style={{ height: `${cardHeight}` }} />}\r\n          mapElement={<div style={{ height: '100%' }} />}\r\n        />\r\n        <TableContainer>\r\n          <Table padding='dense'>\r\n            <StyledTableBody>\r\n              {data.nearestLocations.map((row, i) => (\r\n                <TableRow key={i}>\r\n                  <StyledAddressTableCell padding='dense'>\r\n                    <Typography>\r\n                      <Link\r\n                        href={`https://www.google.com/maps/search/?api=1&query=Google&query_place_id=${\r\n                          row.placeId\r\n                        }`}\r\n                        target='blank'\r\n                      >\r\n                        {row.street}, {row.city}\r\n                      </Link>\r\n                    </Typography>\r\n                  </StyledAddressTableCell>\r\n                  <StyledDistanceTableCell padding='dense'>\r\n                    {row.distance}\r\n                  </StyledDistanceTableCell>\r\n                </TableRow>\r\n              ))}\r\n            </StyledTableBody>\r\n          </Table>\r\n        </TableContainer>\r\n      </StyledCardContent>\r\n    </CardContainer>\r\n  )\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n  return {\r\n    googleMapsKey: state.config.googleMapsKey,\r\n  }\r\n}\r\n\r\nexport default connect(mapStateToProps)(MapResponse)\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/chatframe/MapResponse.js","import React, { PureComponent } from 'react'\r\nimport { connect } from 'react-redux'\r\nimport CardActions from '@material-ui/core/CardActions'\r\nimport CardContent from '@material-ui/core/CardContent'\r\nimport Button from '@material-ui/core/Button'\r\nimport Typography from '@material-ui/core/Typography'\r\nimport FormControl from '@material-ui/core/FormControl'\r\nimport FormGroup from '@material-ui/core/FormGroup'\r\nimport FormControlLabel from '@material-ui/core/FormControlLabel'\r\nimport Checkbox from '@material-ui/core/Checkbox'\r\nimport {\r\n  saveFeedbackInput,\r\n  sendFeedback,\r\n  setFeedbackSubmitted,\r\n} from './actions/feedbackInput'\r\n\r\nclass FeedbackInput extends PureComponent {\r\n  render() {\r\n    const {\r\n      feedbackInputs,\r\n      feedbackUrl,\r\n      saveFeedbackInput,\r\n      setFeedbackSubmitted,\r\n      sendFeedback,\r\n      session,\r\n      outputContexts\r\n    } = this.props\r\n\r\n    const handleInputChange = name => event => {\r\n      const inputItem = {\r\n        value: name,\r\n        checked: event.target.checked,\r\n      }\r\n      saveFeedbackInput(inputItem)\r\n    }\r\n\r\n    // We need to filter values that are not checked, and return\r\n    // a list of checked values in the final submission\r\n    const processList = list => {\r\n      return list\r\n        .filter(item => {\r\n          return item.checked ? item.value : null\r\n        })\r\n        .map(item => {\r\n          return item.value\r\n        })\r\n    }\r\n\r\n    const sendAnalytics = data => {\r\n      fetch(feedbackUrl, {\r\n        method: 'POST',\r\n        body: JSON.stringify(data),\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n        },\r\n      })\r\n    }\r\n\r\n    // On form submit, build the payload data structure,\r\n    // send the payload to analyics, send message to diaglogflow,\r\n    // and set submitted flag to true in redux state.\r\n    const handleSubmit = () => {\r\n      const payload = {\r\n        wasHelpful: feedbackInputs.wasHelpful,\r\n        session,\r\n        feedbackList: processList(feedbackInputs.feedbackList),\r\n        outputContexts\r\n      }\r\n      sendAnalytics(payload)\r\n      sendFeedback('Feedback complete')\r\n      setFeedbackSubmitted(true)\r\n    }\r\n    return (\r\n      <React.Fragment>\r\n        <CardContent>\r\n          <Typography gutterBottom variant='h6'>\r\n            {feedbackInputs.wasHelpful\r\n              ? 'Why was Gen helpful?'\r\n              : 'Why was Gen not helpful?'}\r\n          </Typography>\r\n          <FormControl component='fieldset'>\r\n            <FormGroup>\r\n              {feedbackInputs.feedbackList\r\n                ? feedbackInputs.feedbackList.map(choice => {\r\n                  return (\r\n                    <FormControlLabel\r\n                      key={choice.value}\r\n                      control={\r\n                        <Checkbox\r\n                          checked={choice.checked}\r\n                          onChange={handleInputChange(choice.value)}\r\n                          value={choice.value}\r\n                        />\r\n                      }\r\n                      label={choice.value}\r\n                    />\r\n                  )\r\n                })\r\n                : null}\r\n            </FormGroup>\r\n          </FormControl>\r\n        </CardContent>\r\n        <CardActions>\r\n          <Button size='small' color='primary' onClick={handleSubmit}>\r\n            Submit\r\n          </Button>\r\n        </CardActions>\r\n      </React.Fragment>\r\n    )\r\n  }\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n  return {\r\n    feedbackInputs: state.feedbackInput,\r\n    feedbackUrl: state.config.feedbackUrl,\r\n    outputContexts: state.conversation.outputContexts\r\n  }\r\n}\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n  return {\r\n    saveFeedbackInput: value => {\r\n      dispatch(saveFeedbackInput(value))\r\n    },\r\n    setFeedbackSubmitted: () => {\r\n      dispatch(setFeedbackSubmitted(true))\r\n    },\r\n    sendFeedback: value => {\r\n      dispatch(sendFeedback(value))\r\n    },\r\n  }\r\n}\r\n\r\nexport default connect(\r\n  mapStateToProps,\r\n  mapDispatchToProps\r\n)(FeedbackInput)\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/chatframe/FeedbackInput.js","import React, { PureComponent } from 'react'\r\nimport { connect } from 'react-redux'\r\nimport Card from '@material-ui/core/Card'\r\nimport CardContent from '@material-ui/core/CardContent'\r\nimport styled from 'styled-components'\r\nimport FeedbackInput from './FeedbackInput'\r\nimport { setFeedbackOptions } from './actions/feedbackInput'\r\n\r\nconst CardContainer = styled(Card)`\r\n  && {\r\n    border-top-left-radius: 10px;\r\n    border-top-right-radius: 10px;\r\n    border-bottom-right-radius: 10px;\r\n    border-bottom-left-radius: 10px;\r\n    background: #fff;\r\n    margin: 15px 16px 15px 16px;\r\n    white-space: pre-line;\r\n  }\r\n`\r\n\r\nclass FeedbackResponse extends PureComponent {\r\n  componentDidMount() {\r\n    const { setFeedbackOptions, feedbackData } = this.props\r\n    setFeedbackOptions(feedbackData)\r\n  }\r\n\r\n  render() {\r\n    const { session, feedbackInputs } = this.props\r\n    return (\r\n      <CardContainer>\r\n        {feedbackInputs.submitted ? (\r\n          <CardContent>\r\n            Thank you. Your feedback is important to us and will help improve\r\n            Gen.\r\n          </CardContent>\r\n        ) : (\r\n          <FeedbackInput session={session} />\r\n        )}\r\n      </CardContainer>\r\n    )\r\n  }\r\n}\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n  return {\r\n    setFeedbackOptions: value => {\r\n      dispatch(setFeedbackOptions(value))\r\n    },\r\n  }\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n  return {\r\n    feedbackInputs: state.feedbackInput,\r\n  }\r\n}\r\n\r\nexport default connect(\r\n  mapStateToProps,\r\n  mapDispatchToProps\r\n)(FeedbackResponse)\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/chatframe/FeedbackResponse.js","/* eslint-disable no-param-reassign */\r\nimport { css } from 'styled-components'\r\n\r\nconst sizes = {\r\n  giant: 1170,\r\n  desktop: 992,\r\n  tablet: 768,\r\n  phone: 620,\r\n}\r\n\r\n// iterate through the sizes and create a media template\r\nexport const media = Object.keys(sizes).reduce((accumulator, label) => {\r\n  // use em in breakpoints to work properly cross-browser and support users\r\n  // changing their browsers font-size: https://zellwk.com/blog/media-query-units/\r\n  const emSize = sizes[label] / 16\r\n  accumulator[label] = (...args) => css`\r\n    @media (max-width: ${emSize}em) {\r\n      ${css(...args)};\r\n    }\r\n  `\r\n  return accumulator\r\n}, {})\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/chatframe/styles/media.js","import React, { PureComponent } from 'react'\r\nimport { connect } from 'react-redux'\r\nimport Send from '@material-ui/icons/Send'\r\nimport styled from 'styled-components'\r\nimport IconButton from '@material-ui/core/IconButton'\r\nimport TextField from '@material-ui/core/TextField'\r\n\r\n// Redux\r\nimport { saveUserInput, submitUserInput } from './actions/userInput'\r\n\r\nconst OuterFrame = styled.div`\r\n  grid-area: userinput;\r\n  background: #fefefe;\r\n  display: flex;\r\n  display: ${p => (p.visible ? 'none' : 'flex')};\r\n  flex-flow: row nowrap;\r\n  justify-content: center;\r\n  align-items: center;\r\n  border-top: 1px solid rgba(0, 0, 0, 0.2);\r\n  z-index: 4;\r\n  border-bottom-left-radius: 4px;\r\n  border-bottom-right-radius: 4px;\r\n`\r\n\r\nconst TextInput = styled(TextField)`\r\n  && {\r\n    padding: 8px 4px 8px 16px;\r\n    padding-bottom: ${p => p.helperText !== null && '16px'};\r\n    /*All properties below are specified to combat WordPress*/\r\n    & > textarea {\r\n      border: none;\r\n      width: 100%;\r\n      outline: none;\r\n      color: #000;\r\n      height: 100%;\r\n      padding: 0;\r\n      font-size: 16px;\r\n    }\r\n  }\r\n`\r\nconst Icon = styled(IconButton)`\r\n  && {\r\n    padding: 16px 12px 16px 4px;\r\n    &:hover {\r\n      background: transparent;\r\n    }\r\n  }\r\n`\r\nclass UserInput extends PureComponent {\r\n  constructor() {\r\n    super()\r\n    this.handleKeyPress = this.handleKeyPress.bind(this)\r\n  }\r\n\r\n  handleKeyPress(e) {\r\n    // Enter was pressed\r\n    if (e.charCode === 13) {\r\n      this.props.submitUserInput()\r\n      e.preventDefault()\r\n    }\r\n  }\r\n\r\n  render() {\r\n    const { saveUserInput, inputValue, shouldDisable } = this.props\r\n    const inputValues = inputValue.value\r\n    const charLimit = `${inputValue.charLength}/255`\r\n    const { maxExceeded } = inputValue\r\n    let helperTextValue = null\r\n\r\n    if (maxExceeded) {\r\n      helperTextValue = `Exceeded character limit: ${charLimit}`\r\n    } else {\r\n      helperTextValue = null\r\n    }\r\n\r\n    return (\r\n      <OuterFrame visible={shouldDisable}>\r\n        <TextInput\r\n          multiline\r\n          rowsMax='4'\r\n          fullWidth\r\n          InputProps={{ disableUnderline: true }}\r\n          placeholder='Send a message'\r\n          helperText={helperTextValue}\r\n          FormHelperTextProps={{\r\n            style: { color: '#cd5c5c', margin: 0 },\r\n          }}\r\n          onChange={saveUserInput}\r\n          value={inputValues}\r\n          onKeyPress={this.handleKeyPress}\r\n        />\r\n\r\n        <Icon\r\n          onClick={this.props.submitUserInput}\r\n          aria-label='Send'\r\n          color='primary'\r\n          disabled={maxExceeded}\r\n          disableRipple\r\n        >\r\n          <Send />\r\n        </Icon>\r\n      </OuterFrame>\r\n    )\r\n  }\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n  return {\r\n    inputValue: state.userInput,\r\n    shouldDisable: state.conversation.disableInput,\r\n  }\r\n}\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n  return {\r\n    saveUserInput: e => {\r\n      dispatch(saveUserInput(e.target.value))\r\n    },\r\n    submitUserInput: () => {\r\n      dispatch(submitUserInput())\r\n    },\r\n  }\r\n}\r\n\r\nexport default connect(\r\n  mapStateToProps,\r\n  mapDispatchToProps\r\n)(UserInput)\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/chatframe/UserInput.js","import React, { PureComponent } from 'react'\r\nimport { connect } from 'react-redux'\r\nimport styled from 'styled-components'\r\nimport Button from '@material-ui/core/Button'\r\nimport findLast from 'lodash/findLast'\r\nimport find from 'lodash/find'\r\nimport grey from '@material-ui/core/colors/grey'\r\nimport { sendQuickReply } from './actions/conversation'\r\n\r\nconst Container = styled.div`\r\n  grid-area: buttonbar;\r\n  display: flex;\r\n  flex-flow: row wrap;\r\n  justify-content: flex-start;\r\n  align-items: flex-start;\r\n  align-content: flex-start;\r\n  padding: ${p => (p.visible ? '4px 4px 16px 16px' : '0 16px')};\r\n  background: ${grey[300]};\r\n  border-top: ${p => (p.visible ? '1px solid rgba(0, 0, 0, 0.2)' : 'none')};\r\n  overflow-y: auto;\r\n`\r\n\r\nconst Btn = styled(Button)`\r\n  && {\r\n    margin-right: 12px;\r\n    margin-top: 12px;\r\n    display: ${p => (p.visible === 'true' ? 'block' : 'none')};\r\n  }\r\n`\r\n\r\nclass ButtonBar extends PureComponent {\r\n  render() {\r\n    const { visible, messages, sendQuickReply } = this.props\r\n    const lastMessageWithSuggestions = findLast(messages, m => {\r\n      const hasSuggestions = find(m.responses, ['type', 'suggestion'])\r\n      return hasSuggestions\r\n    })\r\n\r\n    const suggestionElements = []\r\n    if (lastMessageWithSuggestions) {\r\n      const messages = lastMessageWithSuggestions.responses.filter(m => {\r\n        return m.type === 'suggestion'\r\n      })\r\n      for (const message of messages) {\r\n        for (const suggestion of message.suggestions) {\r\n          suggestionElements.push({\r\n            label: suggestion,\r\n            id: lastMessageWithSuggestions.messageId,\r\n            visible,\r\n          })\r\n        }\r\n      }\r\n    }\r\n\r\n    return (\r\n      <Container visible={visible}>\r\n        {suggestionElements.map((btn, index) => (\r\n          <Btn\r\n            size=\"small\"\r\n            variant=\"outlined\"\r\n            color=\"secondary\"\r\n            key={`${btn.id}-btn${index}`}\r\n            visible={btn.visible.toString()}\r\n            onClick={() => sendQuickReply(btn.label)}\r\n          >\r\n            {btn.label}\r\n          </Btn>\r\n        ))}\r\n      </Container>\r\n    )\r\n  }\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n  return {\r\n    visible: state.buttonBar.visible,\r\n    messages: state.conversation.messages,\r\n  }\r\n}\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n  return {\r\n    sendQuickReply: text => {\r\n      dispatch(sendQuickReply(text))\r\n    },\r\n  }\r\n}\r\n\r\nexport default connect(\r\n  mapStateToProps,\r\n  mapDispatchToProps,\r\n)(ButtonBar)\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/chatframe/ButtonBar.js","import React, { PureComponent } from 'react'\r\nimport Paper from '@material-ui/core/Paper'\r\nimport styled, { css } from 'styled-components'\r\nimport { connect } from 'react-redux'\r\nimport grey from '@material-ui/core/colors/grey'\r\nimport Header from './Header'\r\nimport PrivacyPolicy from './PrivacyPolicy'\r\nimport ChatWindow from './ChatWindow'\r\nimport UserInput from './UserInput'\r\nimport ButtonBar from './ButtonBar'\r\nimport { media } from './styles/media'\r\n\r\nconst Container = styled(Paper)`\r\n  && {\r\n    width: 400px;\r\n    height: 70vh;\r\n    max-height: 600px;\r\n    overflow: hidden;\r\n    position: absolute;\r\n    bottom: 48px;\r\n    right: 48px;\r\n    transition: width 120ms ease-in-out, height 150ms ease-in-out;\r\n    pointer-events: none;\r\n    ${props =>\r\n      props.fullscreen &&\r\n      css`\r\n        width: calc(100% - 96px);\r\n        height: calc(100% - 96px);\r\n      `};\r\n    ${props =>\r\n      !props.visible &&\r\n      css`\r\n        width: 0;\r\n        height: 0;\r\n      `};\r\n\r\n    ${media.phone`\r\n    width: ${props => (props.visible ? 'calc(100% - 20px)' : '0')};\r\n    height: ${props => (props.visible ? 'calc(100% - 96px)' : '0')};\r\n    right: 10px;\r\n    max-width: none;\r\n    max-height: none;\r\n  `};\r\n  }\r\n`\r\n\r\nconst OuterFrame = styled.div`\r\n  && {\r\n    width: 100%;\r\n    height: 100%;\r\n    transform-origin: bottom right;\r\n    pointer-events: auto;\r\n    background: ${grey[100]};\r\n    display: grid;\r\n    grid-template-columns: 1fr;\r\n    grid-template-rows: 64px 1fr auto min-content;\r\n    grid-template-areas:\r\n      'header'\r\n      'chatwindow'\r\n      'buttonbar'\r\n      'userinput';\r\n    box-sizing: content-box;\r\n  }\r\n`\r\n\r\nclass ChatContainer extends PureComponent {\r\n  constructor(props) {\r\n    super(props)\r\n    this.containerRef = React.createRef()\r\n  }\r\n  render() {\r\n    const { windowVisible, fullscreen } = this.props\r\n    return (\r\n      <Container\r\n        elevation={4}\r\n        fullscreen={fullscreen ? 1 : 0}\r\n        visible={windowVisible ? 1 : 0}\r\n      >\r\n        <OuterFrame ref={this.containerRef} className='mui-fixed'>\r\n          <Header />\r\n          <PrivacyPolicy parentRef={this.containerRef.current} />\r\n          <ChatWindow />\r\n          <ButtonBar />\r\n          <UserInput />\r\n        </OuterFrame>\r\n      </Container>\r\n    )\r\n  }\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n  return {\r\n    windowVisible: state.config.windowVisible,\r\n    fullscreen: state.config.fullscreen,\r\n  }\r\n}\r\n\r\n// const mapDispatchToProps = dispatch => {\r\n//   return {}\r\n// }\r\n\r\nexport default connect(mapStateToProps)(ChatContainer)\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/chatframe/ChatContainer.js","import * as t from '../actions/actionTypes'\r\n\r\nconst initialState = {\r\n  avatar: null,\r\n  title: 'Chat Window',\r\n  windowVisible: false,\r\n  fullscreen: false,\r\n  privacyPolicyVisible: false,\r\n  googleMapsKey: '',\r\n  centerCoordinates: '',\r\n  activationText: '',\r\n  privacyPolicy:\r\n    'Please do not enter any personally identifiable information such as SSN, Date of Birth, Case Number or last name.',\r\n  feedbackUrl: '',\r\n}\r\n\r\nfunction config(state = initialState, action) {\r\n  switch (action.type) {\r\n    case t.HIDE_PRIVACY_POLICY:\r\n      return { ...state, privacyPolicyVisible: false }\r\n\r\n    case t.SHOW_PRIVACY_POLICY:\r\n      return { ...state, privacyPolicyVisible: true }\r\n\r\n    case t.SET_PRIVACY_POLICY:\r\n      return { ...state, privacyPolicy: action.policyText }\r\n\r\n    case t.SET_GOOGLE_MAPS_KEY:\r\n      return { ...state, googleMapsKey: action.googleMapsKey }\r\n\r\n    case t.SET_CENTER_COORDINATES:\r\n      return { ...state, centerCoordinates: action.centerCoordinates }\r\n\r\n    case t.SET_ACTIVATION_TEXT:\r\n      return { ...state, activationText: action.activationText }\r\n\r\n    case t.SET_AVATAR:\r\n      return { ...state, avatar: action.avatar }\r\n\r\n    case t.SET_TITLE:\r\n      return { ...state, title: action.title }\r\n\r\n    case t.SHOW_WINDOW:\r\n      return { ...state, windowVisible: true }\r\n\r\n    case t.HIDE_WINDOW:\r\n      return { ...state, windowVisible: false }\r\n\r\n    case t.FULLSCREEN:\r\n      return { ...state, fullscreen: true }\r\n\r\n    case t.WINDOWED:\r\n      return { ...state, fullscreen: false }\r\n\r\n    case t.SET_FEEDBACK_URL:\r\n      return { ...state, feedbackUrl: action.feedbackUrl }\r\n\r\n    default:\r\n      return state\r\n  }\r\n}\r\n\r\nexport default config\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/chatframe/reducers/configReducer.js","import { parse, format, differenceInMilliseconds } from 'date-fns'\r\nimport * as t from '../actions/actionTypes'\r\nimport { sysTimeFormat } from '../config/dateFormats'\r\n\r\nconst initialState = {\r\n  client: null,\r\n  clientName: null,\r\n  messages: [],\r\n  webhookPayload: null,\r\n  disableInput: false,\r\n  lastUpdateTime: format(new Date(), sysTimeFormat),\r\n  currentTime: format(new Date(), sysTimeFormat),\r\n  headerTime: 'Now',\r\n  timer: null,\r\n  conversationStarted: false,\r\n}\r\nfunction conversation(state = initialState, action) {\r\n  switch (action.type) {\r\n    case t.SAVE_CLIENT:\r\n      return { ...state, client: action.client, clientName: action.clientName }\r\n\r\n    case t.UPDATE_CURRENT_TIME:\r\n      return {\r\n        ...state,\r\n        headerTime: action.headerTime,\r\n        currentTime: action.currentTime,\r\n      }\r\n\r\n    case t.TIMER_START:\r\n      return {\r\n        ...state,\r\n        timer: action.timer,\r\n      }\r\n\r\n    case t.INITIATE_LOADING:\r\n      return {\r\n        ...state,\r\n        messages: [\r\n          ...state.messages,\r\n          {\r\n            loading: true,\r\n            entity: 'bot',\r\n            systemTime: format(new Date(), sysTimeFormat),\r\n          },\r\n        ],\r\n      }\r\n\r\n    case t.SAVE_RESPONSE:\r\n      return {\r\n        ...state,\r\n        lastUpdateTime: format(new Date(), sysTimeFormat),\r\n        headerTime: 'Now',\r\n        messages: action.newConversationArray,\r\n      }\r\n\r\n    case t.SAVE_USER_RESPONSE:\r\n      return {\r\n        ...state,\r\n        lastUpdateTime: format(new Date(), sysTimeFormat),\r\n        headerTime: 'Now',\r\n        messages: [...state.messages, action.response].sort((a, b) => {\r\n          const dateA = parse(\r\n            a.systemTime,\r\n            sysTimeFormat,\r\n            new Date(a.systemTime)\r\n          )\r\n          const dateB = parse(\r\n            b.systemTime,\r\n            sysTimeFormat,\r\n            new Date(b.systemTime)\r\n          )\r\n          const diff = differenceInMilliseconds(dateB, dateA)\r\n          return diff\r\n        }),\r\n      }\r\n\r\n    case t.RECEIVE_WEBHOOK_DATA:\r\n      return {\r\n        ...state,\r\n        webhookPayload: action.payload,\r\n      }\r\n\r\n    case t.ENABLE_INPUT:\r\n      return {\r\n        ...state,\r\n        disableInput: false,\r\n      }\r\n\r\n    case t.DISABLE_INPUT:\r\n      return {\r\n        ...state,\r\n        disableInput: true,\r\n      }\r\n\r\n    case t.SET_CONVERSATION_STARTED:\r\n      return {\r\n        ...state,\r\n        conversationStarted: true,\r\n      }\r\n\r\n    case t.SET_CONVERSATION_ENDED:\r\n      return {\r\n        ...state,\r\n        conversationStarted: false,\r\n      }\r\n\r\n    case t.SET_OUTPUT_CONTEXTS:\r\n      return {\r\n        ...state,\r\n        outputContexts: action.rawOutputContexts\r\n      }\r\n\r\n    default:\r\n      return state\r\n  }\r\n}\r\n\r\nexport default conversation\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/chatframe/reducers/conversationReducer.js","import * as t from '../actions/actionTypes'\r\n\r\nconst initialState = {\r\n  visible: false,\r\n  buttons: [],\r\n}\r\nfunction config(state = initialState, action) {\r\n  switch (action.type) {\r\n    case t.SHOW_BUTTON_BAR:\r\n      return {\r\n        ...state,\r\n        visible: true,\r\n      }\r\n    case t.HIDE_BUTTON_BAR:\r\n      return {\r\n        ...state,\r\n        visible: false,\r\n      }\r\n    default:\r\n      return state\r\n  }\r\n}\r\n\r\nexport default config\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/chatframe/reducers/buttonBarReducer.js","import * as t from '../actions/actionTypes'\r\n\r\nconst initialState = {\r\n  value: '',\r\n  charLength: 0,\r\n  maxExceeded: false,\r\n}\r\nfunction userInput(state = initialState, action) {\r\n  switch (action.type) {\r\n    case t.SAVE_USER_INPUT:\r\n      return action.userInput\r\n    default:\r\n      return state\r\n  }\r\n}\r\n\r\nexport default userInput\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/chatframe/reducers/userInputReducer.js","import * as t from '../actions/actionTypes'\r\n\r\nconst initialState = {\r\n  submitted: false,\r\n  wasHelpful: null,\r\n  feedbackList: null,\r\n}\r\n\r\nfunction feedbackInput(state = initialState, action) {\r\n  switch (action.type) {\r\n    case t.SAVE_FEEDBACK_INPUT:\r\n      return {\r\n        ...state,\r\n        feedbackList: state.feedbackList.map(item => {\r\n          if (item.value === action.value.value) {\r\n            return { ...item, checked: action.value.checked }\r\n          }\r\n          return item\r\n        }),\r\n      }\r\n    case t.SET_FEEDBACK_OPTIONS:\r\n      return {\r\n        ...state,\r\n        wasHelpful: action.value.helpful,\r\n        feedbackList: action.value.options.map(item => {\r\n          return { ...item, checked: false }\r\n        }),\r\n      }\r\n    case t.SET_FEEDBACK_SUBMITTED:\r\n      return { ...state, submitted: true }\r\n    default:\r\n      return state\r\n  }\r\n}\r\n\r\nexport default feedbackInput\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/chatframe/reducers/feedbackInputReducer.js","import * as t from '../actions/actionTypes'\r\n\r\nconst initialState = ''\r\nfunction config(state = initialState, action) {\r\n  switch (action.type) {\r\n    case t.DISPLAY_ERROR:\r\n      return action.error\r\n\r\n    case t.CLEAR_ERROR:\r\n      return initialState\r\n\r\n    default:\r\n      return state\r\n  }\r\n}\r\n\r\nexport default config\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/chatframe/reducers/errorReducer.js","import { combineReducers } from 'redux'\r\nimport config from './configReducer'\r\nimport conversation from './conversationReducer'\r\nimport buttonBar from './buttonBarReducer'\r\nimport userInput from './userInputReducer'\r\nimport feedbackInput from './feedbackInputReducer'\r\nimport error from './errorReducer'\r\n\r\nconst rootReducer = combineReducers({\r\n  config,\r\n  conversation,\r\n  buttonBar,\r\n  userInput,\r\n  feedbackInput,\r\n  error,\r\n})\r\nexport default rootReducer\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/chatframe/reducers/rootReducer.js","import { Provider } from 'react-redux'\r\nimport { createStore, applyMiddleware, compose } from 'redux'\r\nimport React, { PureComponent } from 'react'\r\nimport styled from 'styled-components'\r\nimport WebFont from 'webfontloader'\r\nimport MuiThemeProvider from '@material-ui/core/styles/MuiThemeProvider'\r\nimport thunkMiddleware from 'redux-thunk'\r\nimport 'whatwg-fetch'\r\nimport grey from '@material-ui/core/colors/grey'\r\nimport createTheme from './createTheme'\r\nimport ActivatorButton from './ActivatorButton'\r\nimport ChatContainer from './ChatContainer'\r\nimport rootReducer from './reducers/rootReducer'\r\nimport { initialize } from './actions/initialization'\r\n\r\nWebFont.load({\r\n  google: {\r\n    families: ['Roboto:300,400,500', 'Product Sans:400'],\r\n  },\r\n})\r\n\r\nconst OuterContainer = styled.div`\r\n  width: 100%;\r\n  height: 100%;\r\n  pointer-events: none;\r\n  position: fixed;\r\n  top: 0;\r\n  left: 0;\r\n  z-index: 999999;\r\n  display: flex;\r\n  flex-flow: column nowrap;\r\n  justify-content: center;\r\n  align-items: center;\r\n  align-content: center;\r\n  box-sizing: border-box;\r\n  font-family: 'Roboto', sans-serif;\r\n  line-height: normal; /*For WordPress*/\r\n  & > * {\r\n    box-sizing: border-box;\r\n    font-family: 'Roboto', sans-serif;\r\n\r\n    & ::-webkit-scrollbar-thumb {\r\n      background-color: ${grey[600]};\r\n      -webkit-border-radius: 8px;\r\n      border-radius: 8px;\r\n      border: 2px solid ${grey[100]};\r\n    }\r\n    & ::-webkit-scrollbar {\r\n      background-color: ${grey[100]};\r\n      width: 8px;\r\n    }\r\n  }\r\n`\r\n\r\n\r\nconst composeEnhancer = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose;\r\n\r\nclass ChatFrame extends PureComponent {\r\n  constructor(props) {\r\n    super(props)\r\n    this.store = createStore(rootReducer, composeEnhancer(applyMiddleware(thunkMiddleware)))\r\n    this.currentValue = null\r\n    this.theme = createTheme(\r\n      this.props.primaryColor,\r\n      this.props.secondaryColor,\r\n      this.props.headerColor\r\n    )\r\n  }\r\n  componentDidMount() {\r\n    // We load the initial options into the Redux store inside of the\r\n    // componentDidMount() lifecycle hook. This lets us use Redux to manage\r\n    // state instead of passing props down manually.\r\n    this.store.dispatch(initialize(this.props, this.theme))\r\n\r\n    // In order to expose when a webhook payload of custom data is received,\r\n    // we manually create a subscription to the data piece we want to expose\r\n    this.unsubscribe = this.store.subscribe(() => this.handleChange(this.store))\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    this.unsubscribe()\r\n  }\r\n\r\n  // Select the current conversation payload from our Redux store\r\n  select(state) {\r\n    return state.conversation.webhookPayload\r\n  }\r\n\r\n  // When props are updated (e.g. Theme changes), update entire component\r\n  handleChange(store) {\r\n    const previousValue = this.currentValue\r\n    this.currentValue = this.select(store.getState())\r\n    if (previousValue !== this.currentValue && this.props.onPayload) {\r\n      this.props.onPayload(this.currentValue)\r\n    }\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <Provider store={this.store}>\r\n        <MuiThemeProvider theme={this.theme}>\r\n          <OuterContainer>\r\n            <ChatContainer />\r\n            <ActivatorButton />\r\n          </OuterContainer>\r\n        </MuiThemeProvider>\r\n      </Provider>\r\n    )\r\n  }\r\n}\r\n\r\nexport default ChatFrame\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/chatframe/ChatFrame.js","import ChatFrame from './ChatFrame'\r\n\r\nexport default ChatFrame\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/chatframe/index.js","module.exports = require(\"webfontloader\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"webfontloader\"\n// module id = 21\n// module chunks = 0","module.exports = require(\"@material-ui/core/Paper\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"@material-ui/core/Paper\"\n// module id = 34\n// module chunks = 0","module.exports = \"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCI+PGRlZnM+PHBhdGggaWQ9ImEiIGQ9Ik0wIDBoMjR2MjRIMFYweiIvPjwvZGVmcz48Y2xpcFBhdGggaWQ9ImIiPjx1c2UgeGxpbms6aHJlZj0iI2EiIG92ZXJmbG93PSJ2aXNpYmxlIi8+PC9jbGlwUGF0aD48cGF0aCBjbGlwLXBhdGg9InVybCgjYikiIGZpbGw9IiMyOTc5RkYiIGQ9Ik0xMiAyQzguMTQgMiA1IDUuMTQgNSA5YzAgNS4yNSA3IDEzIDcgMTNzNy03Ljc1IDctMTNjMC0zLjg2LTMuMTQtNy03LTd6bTAgMmMxLjEgMCAyIC45IDIgMiAwIDEuMTEtLjkgMi0yIDJzLTItLjg5LTItMmMwLTEuMS45LTIgMi0yem0wIDEwYy0xLjY3IDAtMy4xNC0uODUtNC0yLjE1LjAyLTEuMzIgMi42Ny0yLjA1IDQtMi4wNXMzLjk4LjczIDQgMi4wNWMtLjg2IDEuMy0yLjMzIDIuMTUtNCAyLjE1eiIvPjwvc3ZnPg==\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/chatframe/person-pin.svg\n// module id = 56\n// module chunks = 0","module.exports = require(\"@material-ui/core/FormControl\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"@material-ui/core/FormControl\"\n// module id = 57\n// module chunks = 0"],"sourceRoot":""}